import{getData,createBrowsePage,createMainHeroSection,showErrorPopup,showBigLoader,hideBigLoader,createFilmSlider}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){const e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}},t=new Map;let a,r=1e4,o=0;const n="&page=",s=async(t,a,...r)=>{const o=[];for await(const s of r){const r=s+t+n+a,i=await fetch(r,e),c=await i.json();o.push(c)}return o},i=async(t,a,r)=>{const o=r+t+n+a;try{const t=await fetch(o,e);return await t.json()}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},c=async(e,t)=>{const a=[];for(let r=1;r<=t;r++)a.push(i(e,r,"https://api.themoviedb.org/3/movie/popular?language="));try{return await Promise.all(a)}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},l=async(e,t)=>{try{const a=await e(t,5),r=Math.trunc(20*Math.random());return a.map(e=>e.results[r])}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}},d=(e,t)=>{const a=e.querySelector(".browse-main__images"),r=a.querySelectorAll(".browse-main__img-box"),n=e.querySelector(".browse-main__carousell-controls");r.forEach(e=>e.classList.remove("currentVisible")),a.style.transform=`translateX(${100*-o}%)`,h(o,n),r[o].classList.add("currentVisible"),o++,o>t.length-1&&(o=0),g(e)},h=(e,a)=>{const r=a.querySelectorAll(".browse-main__btn"),o=a.querySelector(`.browse-main__btn[data-img="${e}"]`),n=o.querySelector(".browse-main__progress-bar"),s=a.querySelectorAll(".browse-main__progress-bar");t.forEach(e=>clearInterval(e)),t.clear(),s.forEach(e=>e.style.width="0"),m(n,e),r.forEach(e=>e.classList.remove("active")),o.classList.add("active")},m=(e,a)=>{t.has(a)&&clearInterval(t.get(a));let r=0;const o=setInterval(()=>{r+=2,e.style.width=`${r}%`,r>=100&&(e.style.width="0",clearInterval(o),t.delete(a))},200);t.set(a,o)},u=(e,t)=>{t.querySelector(".browse-main__carousell-controls").addEventListener("click",n=>{if(n.target.matches(".browse-main__btn")){if(n.target.classList.contains("active"))return;clearInterval(a);const s=n.target,i=parseInt(s.dataset.img);o=i,d(t,e),a=setInterval(()=>{d(t,e)},r)}})},g=e=>{e.querySelectorAll(".browse-main__img-box").forEach(e=>{const t=e.classList.contains("currentVisible")?0:-1;w(e,t,0===t?"visible":"hidden")})},w=(e,t,a)=>{const r=e.querySelector(".browse-main__trailer-btn"),o=e.querySelector(".browse-main__see-more-btn");r.setAttribute("tabindex",t),o.setAttribute("tabindex",t),r.style.visibility=a,o.style.visibility=a};let b,p,y,v;const _=(e,t)=>{const n=Math.abs(b-p),s=Math.abs(y-v);n<50||s>30||(p-b>50?(o=(o-2+t.length)%t.length,d(e,t)):b-p>50&&d(e,t),clearInterval(a),a=setInterval(()=>{d(e,t)},r))},I=(e,t)=>{const a=e.querySelector(".browse-main__images");a.addEventListener("touchstart",e=>{(e=>{b=e.touches[0].clientX,y=e.touches[0].clientY})(e)}),a.addEventListener("touchend",a=>{((e,t,a)=>{p=e.changedTouches[0].clientX,v=e.changedTouches[0].clientY,_(t,a)})(a,e,t)})};(async()=>{const e=getData(),t=e?.translations,o=e?.preferredLanguage,n=e?.loggedIn,i=document.querySelector(".container");if(e&&n){i.prepend(createBrowsePage(t)),i.append(showBigLoader());try{const e=await l(c,o);createMainHeroSection(e,t,i),d(i,e),a=setInterval(()=>d(i,e),r),u(e,i),I(i,e);const n=await s(o,1,"https://api.themoviedb.org/3/movie/upcoming?language="),h=document.querySelector("main");h||i.append(createFilmSlider(n,t,0,t.browseSection.sectionNames.upcoming)),h.append(createFilmSlider(n,t,0,t.browseSection.sectionNames.upcoming))}catch{showErrorPopup(t.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}}else window.location.href="/"})()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLm1pbi5qcyIsIm5hbWVzIjpbImdldERhdGEiLCJjcmVhdGVCcm93c2VQYWdlIiwiY3JlYXRlTWFpbkhlcm9TZWN0aW9uIiwic2hvd0Vycm9yUG9wdXAiLCJzaG93QmlnTG9hZGVyIiwiaGlkZUJpZ0xvYWRlciIsImNyZWF0ZUZpbG1TbGlkZXIiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcHRpb25zIiwibWV0aG9kIiwiaGVhZGVycyIsImFjY2VwdCIsIkF1dGhvcml6YXRpb24iLCJwcm9ncmVzc0JhckludGVydmFscyIsIk1hcCIsImNhcm91c2VsbEludGVydmFsIiwiY2Fyb3VzZWxsU3BlZWQiLCJpbmRleCIsIkZJTE1TX1BBR0VTX0FNT1VOVCIsImdldEFsbEZpbG1zIiwiYXN5bmMiLCJsYW5nIiwicGFnZU51bSIsInVybHMiLCJyZXNwb25zZXMiLCJ1cmwiLCJVUkwiLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJwdXNoIiwiZ2V0RmlsbXMiLCJ0cmFuc2xhdGlvbnMiLCJicm93c2VQYWdlIiwibG9hZGluZ0RhdGFFcnJvciIsImxvYWRGaWxtc1RvQ2Fyb3VzZWxsIiwicmVxdWVzdHMiLCJpIiwiUHJvbWlzZSIsImFsbCIsImNob29zZUZpbG1zVG9DYXJvdXNlbGwiLCJjdXJyZW50TGFuZ3VhZ2UiLCJwYWdlc0RhdGEiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwidHJ1bmMiLCJyYW5kb20iLCJtYXAiLCJwYWdlIiwicmVzdWx0cyIsImhhbmRsZUZpbG1zQ2Fyb3VzZWxsIiwiY29udGFpbmVyIiwibW92aWVzIiwiaW1hZ2VTbGlkZXIiLCJxdWVyeVNlbGVjdG9yIiwiYWxsSW1hZ2VzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhcm91c2VsbENvbnRyb2xzIiwiZm9yRWFjaCIsImltZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZSIsImFkZCIsImxlbmd0aCIsImhhbmRsZUJ0bnNWaXNpYmlsaXR5IiwiY2Fyb3VzZWxsQ29udHJvbHNCb3giLCJhbGxDb250cm9sQnRucyIsImN1cnJlbnRCdG4iLCJwcm9ncmVzc0JhciIsImFsbFByb2dyZXNzQmFycyIsImludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyIiwiYmFyIiwid2lkdGgiLCJjaGFuZ2VQcm9ncmVzc0JhciIsImJ0biIsImJ0bkluZGV4IiwiaGFzIiwiZ2V0IiwicHJvZ3Jlc3NCYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZGVsZXRlIiwic2V0IiwiY2hhbmdlQ3VycmVudEltZyIsImUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJpbWdEYXRhIiwicGFyc2VJbnQiLCJkYXRhc2V0IiwiZmlsbSIsInRhYmluZGV4IiwiZ2l2ZUJ0bnNBdHRyaWJ1dGUiLCJ2aXNpYmlsaXR5IiwidHJhaWxlckJ0biIsInNlZU1vcmVCdG4iLCJzZXRBdHRyaWJ1dGUiLCJzdGFydFgiLCJlbmRYIiwic3RhcnRZIiwiZW5kWSIsImhhbmRsZVN3aXBlIiwiaG9yaXpvbnRhbERpc3RhbmNlIiwiYWJzIiwidmVydGljYWxEaXN0YW5jZSIsInNldFRvdWNoRXZlbnRMaXN0ZW5lciIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsImhhbmRsZVRvdWNoU3RhcnRFdmVudCIsImNoYW5nZWRUb3VjaGVzIiwiaGFuZGxlVG91Y2hFbmRFdmVudCIsInVzZXJEYXRhIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJpc0xvZ2dlZEluIiwibG9nZ2VkSW4iLCJwcmVwZW5kIiwiYXBwZW5kIiwiZmlsbXMiLCJtYWluIiwiYnJvd3NlU2VjdGlvbiIsInNlY3Rpb25OYW1lcyIsInVwY29taW5nIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiY2hlY2tBdXRob3JpemF0aW9uIl0sInNvdXJjZXMiOlsibWFpbi1wYWdlLmpzIl0sIm1hcHBpbmdzIjoiT0FDQ0EsUUFDQUMsaUJBQ0FDLHNCQUNB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RyxFQUNuQnVCLEVBdERxQixFQWtCRyx5REF5Q25CbUYsRUFBT3ZILFNBQVNpRCxjQUFjLFFBQy9Cc0UsR0FDSnpFLEVBQVV1RSxPQUNUdEgsaUJBQ0N1SCxFQUNBM0YsRUFDQSxFQUNBQSxFQUFhNkYsY0FBY0MsYUFBYUMsV0FJM0NILEVBQUtGLE9BQ0p0SCxpQkFDQ3VILEVBQ0EzRixFQUNBLEVBQ0FBLEVBQWE2RixjQUFjQyxhQUFhQyxVQUczQyxDQUFFLE1BQ0Q5SCxlQUFlK0IsRUFBYUMsV0FBV0MsaUJBQWtCLFVBQzFELENBQUUsUUFDRC9CLGVBQ0QsQ0FsREEsTUFGQzZILE9BQU9DLFNBQVNDLEtBQU8sS0E4UXpCQyxFQUNEIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcblx0Z2V0RGF0YSxcclxuXHRjcmVhdGVCcm93c2VQYWdlLFxyXG5cdGNyZWF0ZU1haW5IZXJvU2VjdGlvbixcclxuXHRzaG93RXJyb3JQb3B1cCxcclxuXHRzaG93QmlnTG9hZGVyLFxyXG5cdGhpZGVCaWdMb2FkZXIsXHJcblx0Y3JlYXRlRmlsbVNsaWRlcixcclxufSBmcm9tIFwiLi9jb21wb25lbnRzLm1pbi5qc1wiO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcblx0Ly8gaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9kaXNjb3Zlci9tb3ZpZT9sYW5ndWFnZT1wbFxyXG5cdGNvbnN0IENBUk9VU0VMTF9MRU5HVEggPSA1O1xyXG5cdGNvbnN0IEZJTE1fQU1PVU5UX1BFUl9QQUdFID0gMjA7XHJcblx0Y29uc3QgRE9XTkxPQURFRF9QQUdFID0gMTtcclxuXHRjb25zdCBvcHRpb25zID0ge1xyXG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHRhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG5cdFx0XHRBdXRob3JpemF0aW9uOlxyXG5cdFx0XHRcdFwiQmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUo5LmV5SmhkV1FpT2lJek5UWXdaak00TWpVM05EUTFaR0UxWkdaa1lUWXhZekUwWVdNNFltTTRNeUlzSW01aVppSTZNVGMxT1RjMk5UQXpPQzQ1TkN3aWMzVmlJam9pTmpobE0yVXlNbVV5TmpZNU56WTRNemhsWXpJM056STVJaXdpYzJOdmNHVnpJanBiSW1Gd2FWOXlaV0ZrSWwwc0luWmxjbk5wYjI0aU9qRjkubnVHZkVqY2xKTGVwbXp6SGkyb21OaHAyOVRIZ3JKZjlOdjZENF9nVGR4QVwiLFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cdGNvbnN0IHByb2dyZXNzQmFySW50ZXJ2YWxzID0gbmV3IE1hcCgpO1xyXG5cdGxldCBjYXJvdXNlbGxTcGVlZCA9IDEwMDAwO1xyXG5cdGxldCBjYXJvdXNlbGxTdHJva2VSYW5nZSA9IDI7XHJcblx0bGV0IGludGVydmFsU3BlZWQgPSAoY2Fyb3VzZWxsU3BlZWQgKiBjYXJvdXNlbGxTdHJva2VSYW5nZSkgLyAxMDA7XHJcblx0bGV0IGNhcm91c2VsbFdpZHRoID0gMTAwO1xyXG5cdGxldCBpbmRleCA9IDA7XHJcblx0bGV0IGNhcm91c2VsbEludGVydmFsO1xyXG5cclxuXHRjb25zdCBQT1BVTEFSX0ZJTE1TX1VSTCA9IGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3BvcHVsYXI/bGFuZ3VhZ2U9YDtcclxuXHRjb25zdCBVUENPTUlOR19GSUxNU19VUkwgPSBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9tb3ZpZS91cGNvbWluZz9sYW5ndWFnZT1gO1xyXG5cdGNvbnN0IEZJTE1TX1BBR0VTX0FNT1VOVCA9IGAmcGFnZT1gO1xyXG5cclxuXHRjb25zdCBjaGVja0F1dGhvcml6YXRpb24gPSBhc3luYyAoKSA9PiB7XHJcblx0XHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHRcdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHVzZXJEYXRhPy50cmFuc2xhdGlvbnM7XHJcblx0XHRjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSB1c2VyRGF0YT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblx0XHRjb25zdCBpc0xvZ2dlZEluID0gdXNlckRhdGE/LmxvZ2dlZEluO1xyXG5cclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5cclxuXHRcdGlmICghdXNlckRhdGEgfHwgIWlzTG9nZ2VkSW4pIHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRhaW5lci5wcmVwZW5kKGNyZWF0ZUJyb3dzZVBhZ2UodHJhbnNsYXRpb25zKSk7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKHNob3dCaWdMb2FkZXIoKSk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgbW92aWVzID0gYXdhaXQgY2hvb3NlRmlsbXNUb0Nhcm91c2VsbChcclxuXHRcdFx0XHRsb2FkRmlsbXNUb0Nhcm91c2VsbCxcclxuXHRcdFx0XHRjdXJyZW50TGFuZ3VhZ2VcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNyZWF0ZU1haW5IZXJvU2VjdGlvbihtb3ZpZXMsIHRyYW5zbGF0aW9ucywgY29udGFpbmVyKTtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKFxyXG5cdFx0XHRcdCgpID0+IGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKSxcclxuXHRcdFx0XHRjYXJvdXNlbGxTcGVlZFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Y2hhbmdlQ3VycmVudEltZyhtb3ZpZXMsIGNvbnRhaW5lcik7XHJcblx0XHRcdHNldFRvdWNoRXZlbnRMaXN0ZW5lcihjb250YWluZXIsIG1vdmllcyk7XHJcblxyXG5cdFx0XHRjb25zdCBmaWxtcyA9IGF3YWl0IGdldEFsbEZpbG1zKFxyXG5cdFx0XHRcdGN1cnJlbnRMYW5ndWFnZSxcclxuXHRcdFx0XHRET1dOTE9BREVEX1BBR0UsXHJcblx0XHRcdFx0VVBDT01JTkdfRklMTVNfVVJMXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIik7XHJcblx0XHRcdGlmICghbWFpbikge1xyXG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmQoXHJcblx0XHRcdFx0XHRjcmVhdGVGaWxtU2xpZGVyKFxyXG5cdFx0XHRcdFx0XHRmaWxtcyxcclxuXHRcdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0XHQwLFxyXG5cdFx0XHRcdFx0XHR0cmFuc2xhdGlvbnMuYnJvd3NlU2VjdGlvbi5zZWN0aW9uTmFtZXMudXBjb21pbmdcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdG1haW4uYXBwZW5kKFxyXG5cdFx0XHRcdGNyZWF0ZUZpbG1TbGlkZXIoXHJcblx0XHRcdFx0XHRmaWxtcyxcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucyxcclxuXHRcdFx0XHRcdDAsXHJcblx0XHRcdFx0XHR0cmFuc2xhdGlvbnMuYnJvd3NlU2VjdGlvbi5zZWN0aW9uTmFtZXMudXBjb21pbmdcclxuXHRcdFx0XHQpXHJcblx0XHRcdCk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0c2hvd0Vycm9yUG9wdXAodHJhbnNsYXRpb25zLmJyb3dzZVBhZ2UubG9hZGluZ0RhdGFFcnJvciwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0aGlkZUJpZ0xvYWRlcigpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGdldEFsbEZpbG1zID0gYXN5bmMgKGxhbmcsIHBhZ2VOdW0sIC4uLnVybHMpID0+IHtcclxuXHRcdGNvbnN0IHJlc3BvbnNlcyA9IFtdO1xyXG5cdFx0Zm9yIGF3YWl0IChjb25zdCB1cmwgb2YgdXJscykge1xyXG5cdFx0XHRjb25zdCBVUkwgPSB1cmwgKyBsYW5nICsgRklMTVNfUEFHRVNfQU1PVU5UICsgcGFnZU51bTtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChVUkwsIG9wdGlvbnMpO1xyXG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuXHRcdFx0cmVzcG9uc2VzLnB1c2goZGF0YSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzcG9uc2VzO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGdldEZpbG1zID0gYXN5bmMgKGxhbmcsIHBhZ2VOdW0sIHVybCkgPT4ge1xyXG5cdFx0Y29uc3QgVVJMID0gdXJsICsgbGFuZyArIEZJTE1TX1BBR0VTX0FNT1VOVCArIHBhZ2VOdW07XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChVUkwsIG9wdGlvbnMpO1xyXG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGRhdGE7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0c2hvd0Vycm9yUG9wdXAodHJhbnNsYXRpb25zLmJyb3dzZVBhZ2UubG9hZGluZ0RhdGFFcnJvciwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGxvYWRGaWxtc1RvQ2Fyb3VzZWxsID0gYXN5bmMgKGxhbmcsIHBhZ2VOdW0pID0+IHtcclxuXHRcdGNvbnN0IHJlcXVlc3RzID0gW107XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gcGFnZU51bTsgaSsrKSB7XHJcblx0XHRcdHJlcXVlc3RzLnB1c2goZ2V0RmlsbXMobGFuZywgaSwgUE9QVUxBUl9GSUxNU19VUkwpKTtcclxuXHRcdH1cclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0cyk7XHJcblx0XHRcdHJldHVybiByZXNwb25zZXM7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0c2hvd0Vycm9yUG9wdXAodHJhbnNsYXRpb25zLmJyb3dzZVBhZ2UubG9hZGluZ0RhdGFFcnJvciwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNob29zZUZpbG1zVG9DYXJvdXNlbGwgPSBhc3luYyAoZGF0YSwgY3VycmVudExhbmd1YWdlKSA9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBwYWdlc0RhdGEgPSBhd2FpdCBkYXRhKGN1cnJlbnRMYW5ndWFnZSwgQ0FST1VTRUxMX0xFTkdUSCk7XHJcblx0XHRcdGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIEZJTE1fQU1PVU5UX1BFUl9QQUdFKTtcclxuXHRcdFx0Y29uc3QgY2hvb3Nlbk1vdmllcyA9IHBhZ2VzRGF0YS5tYXAoKHBhZ2UpID0+IHBhZ2UucmVzdWx0c1tyYW5kb21OdW1iZXJdKTtcclxuXHJcblx0XHRcdHJldHVybiBjaG9vc2VuTW92aWVzO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdGhpZGVCaWdMb2FkZXIoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBDQVJPVVNFTExcclxuXHJcblx0Y29uc3QgaGFuZGxlRmlsbXNDYXJvdXNlbGwgPSAoY29udGFpbmVyLCBtb3ZpZXMpID0+IHtcclxuXHRcdGNvbnN0IGltYWdlU2xpZGVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYnJvd3NlLW1haW5fX2ltYWdlc1wiKTtcclxuXHRcdGNvbnN0IGFsbEltYWdlcyA9IGltYWdlU2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnJvd3NlLW1haW5fX2ltZy1ib3hcIik7XHJcblx0XHRjb25zdCBjYXJvdXNlbGxDb250cm9scyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcIi5icm93c2UtbWFpbl9fY2Fyb3VzZWxsLWNvbnRyb2xzXCJcclxuXHRcdCk7XHJcblx0XHRhbGxJbWFnZXMuZm9yRWFjaCgoaW1nKSA9PiBpbWcuY2xhc3NMaXN0LnJlbW92ZShcImN1cnJlbnRWaXNpYmxlXCIpKTtcclxuXHJcblx0XHRpbWFnZVNsaWRlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkey1pbmRleCAqIGNhcm91c2VsbFdpZHRofSUpYDtcclxuXHRcdGhhbmRsZUNhcm91c2VsbENvbnRyb2xzU3RhdGUoaW5kZXgsIGNhcm91c2VsbENvbnRyb2xzKTtcclxuXHRcdGFsbEltYWdlc1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImN1cnJlbnRWaXNpYmxlXCIpO1xyXG5cclxuXHRcdGluZGV4Kys7XHJcblxyXG5cdFx0aWYgKGluZGV4ID4gbW92aWVzLmxlbmd0aCAtIDEpIGluZGV4ID0gMDtcclxuXHJcblx0XHRoYW5kbGVCdG5zVmlzaWJpbGl0eShjb250YWluZXIpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZUNhcm91c2VsbENvbnRyb2xzU3RhdGUgPSAoaW5kZXgsIGNhcm91c2VsbENvbnRyb2xzQm94KSA9PiB7XHJcblx0XHRjb25zdCBhbGxDb250cm9sQnRucyA9XHJcblx0XHRcdGNhcm91c2VsbENvbnRyb2xzQm94LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnJvd3NlLW1haW5fX2J0blwiKTtcclxuXHRcdGNvbnN0IGN1cnJlbnRCdG4gPSBjYXJvdXNlbGxDb250cm9sc0JveC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRgLmJyb3dzZS1tYWluX19idG5bZGF0YS1pbWc9XCIke2luZGV4fVwiXWBcclxuXHRcdCk7XHJcblx0XHRjb25zdCBwcm9ncmVzc0JhciA9IGN1cnJlbnRCdG4ucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9fcHJvZ3Jlc3MtYmFyXCIpO1xyXG5cdFx0Y29uc3QgYWxsUHJvZ3Jlc3NCYXJzID0gY2Fyb3VzZWxsQ29udHJvbHNCb3gucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFx0XCIuYnJvd3NlLW1haW5fX3Byb2dyZXNzLWJhclwiXHJcblx0XHQpO1xyXG5cclxuXHRcdHByb2dyZXNzQmFySW50ZXJ2YWxzLmZvckVhY2goKGludGVydmFsKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKSk7XHJcblx0XHRwcm9ncmVzc0JhckludGVydmFscy5jbGVhcigpO1xyXG5cclxuXHRcdGFsbFByb2dyZXNzQmFycy5mb3JFYWNoKChiYXIpID0+IChiYXIuc3R5bGUud2lkdGggPSBcIjBcIikpO1xyXG5cclxuXHRcdGNoYW5nZVByb2dyZXNzQmFyKHByb2dyZXNzQmFyLCBpbmRleCk7XHJcblxyXG5cdFx0YWxsQ29udHJvbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSk7XHJcblx0XHRjdXJyZW50QnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgY2hhbmdlUHJvZ3Jlc3NCYXIgPSAocHJvZ3Jlc3NCYXIsIGJ0bkluZGV4KSA9PiB7XHJcblx0XHRpZiAocHJvZ3Jlc3NCYXJJbnRlcnZhbHMuaGFzKGJ0bkluZGV4KSkge1xyXG5cdFx0XHRjbGVhckludGVydmFsKHByb2dyZXNzQmFySW50ZXJ2YWxzLmdldChidG5JbmRleCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCB3aWR0aCA9IDA7XHJcblx0XHRjb25zdCBwcm9ncmVzc0JhckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHR3aWR0aCArPSBjYXJvdXNlbGxTdHJva2VSYW5nZTtcclxuXHRcdFx0cHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBgJHt3aWR0aH0lYDtcclxuXHRcdFx0aWYgKHdpZHRoID49IDEwMCkge1xyXG5cdFx0XHRcdHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gXCIwXCI7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbChwcm9ncmVzc0JhckludGVydmFsKTtcclxuXHJcblx0XHRcdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuZGVsZXRlKGJ0bkluZGV4KTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgaW50ZXJ2YWxTcGVlZCk7XHJcblxyXG5cdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuc2V0KGJ0bkluZGV4LCBwcm9ncmVzc0JhckludGVydmFsKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBjaGFuZ2VDdXJyZW50SW1nID0gKG1vdmllcywgY29udGFpbmVyKSA9PiB7XHJcblx0XHRjb25zdCBjYXJvdXNlbGxDb250cm9scyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcIi5icm93c2UtbWFpbl9fY2Fyb3VzZWxsLWNvbnRyb2xzXCJcclxuXHRcdCk7XHJcblxyXG5cdFx0Y2Fyb3VzZWxsQ29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRcdGlmIChlLnRhcmdldC5tYXRjaGVzKFwiLmJyb3dzZS1tYWluX19idG5cIikpIHtcclxuXHRcdFx0XHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoY2Fyb3VzZWxsSW50ZXJ2YWwpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBjdXJyZW50QnRuID0gZS50YXJnZXQ7XHJcblx0XHRcdFx0Y29uc3QgaW1nRGF0YSA9IHBhcnNlSW50KGN1cnJlbnRCdG4uZGF0YXNldC5pbWcpO1xyXG5cclxuXHRcdFx0XHRpbmRleCA9IGltZ0RhdGE7XHJcblx0XHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cclxuXHRcdFx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdFx0XHR9LCBjYXJvdXNlbGxTcGVlZCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZUJ0bnNWaXNpYmlsaXR5ID0gKGNvbnRhaW5lcikgPT4ge1xyXG5cdFx0Y29uc3QgYWxsRmlsbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2UtbWFpbl9faW1nLWJveFwiKTtcclxuXHJcblx0XHRhbGxGaWxtcy5mb3JFYWNoKChmaWxtKSA9PiB7XHJcblx0XHRcdGNvbnN0IGlzQWN0aXZlID0gZmlsbS5jbGFzc0xpc3QuY29udGFpbnMoXCJjdXJyZW50VmlzaWJsZVwiKTtcclxuXHRcdFx0Y29uc3QgdGFiaW5kZXggPSBpc0FjdGl2ZSA/IDAgOiAtMTtcclxuXHRcdFx0Y29uc3QgdmlzaWJpbGl0eSA9IHRhYmluZGV4ID09PSAwID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiO1xyXG5cdFx0XHRnaXZlQnRuc0F0dHJpYnV0ZShmaWxtLCB0YWJpbmRleCwgdmlzaWJpbGl0eSk7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cdGNvbnN0IGdpdmVCdG5zQXR0cmlidXRlID0gKGZpbG0sIHRhYmluZGV4LCB2aXNpYmlsaXR5KSA9PiB7XHJcblx0XHRjb25zdCB0cmFpbGVyQnRuID0gZmlsbS5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX190cmFpbGVyLWJ0blwiKTtcclxuXHRcdGNvbnN0IHNlZU1vcmVCdG4gPSBmaWxtLnF1ZXJ5U2VsZWN0b3IoXCIuYnJvd3NlLW1haW5fX3NlZS1tb3JlLWJ0blwiKTtcclxuXHJcblx0XHR0cmFpbGVyQnRuLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIHRhYmluZGV4KTtcclxuXHRcdHNlZU1vcmVCdG4uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgdGFiaW5kZXgpO1xyXG5cdFx0dHJhaWxlckJ0bi5zdHlsZS52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcclxuXHRcdHNlZU1vcmVCdG4uc3R5bGUudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XHJcblx0fTtcclxuXHJcblx0bGV0IHN0YXJ0WDtcclxuXHRsZXQgZW5kWDtcclxuXHRsZXQgc3RhcnRZO1xyXG5cdGxldCBlbmRZO1xyXG5cclxuXHRjb25zdCBoYW5kbGVUb3VjaFN0YXJ0RXZlbnQgPSAoZSkgPT4ge1xyXG5cdFx0c3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcblx0XHRzdGFydFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBoYW5kbGVUb3VjaEVuZEV2ZW50ID0gKGUsIGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRlbmRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xyXG5cdFx0ZW5kWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcclxuXHRcdGhhbmRsZVN3aXBlKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBoYW5kbGVTd2lwZSA9IChjb250YWluZXIsIG1vdmllcykgPT4ge1xyXG5cdFx0Y29uc3QgSE9SSVpPTlRBTF9SQU5HRSA9IDUwO1xyXG5cdFx0Y29uc3QgVkVSVElDQUxfUkFOR0UgPSAzMDtcclxuXHJcblx0XHRjb25zdCBob3Jpem9udGFsRGlzdGFuY2UgPSBNYXRoLmFicyhzdGFydFggLSBlbmRYKTtcclxuXHRcdGNvbnN0IHZlcnRpY2FsRGlzdGFuY2UgPSBNYXRoLmFicyhzdGFydFkgLSBlbmRZKTtcclxuXHJcblx0XHRpZiAoXHJcblx0XHRcdGhvcml6b250YWxEaXN0YW5jZSA8IEhPUklaT05UQUxfUkFOR0UgfHxcclxuXHRcdFx0dmVydGljYWxEaXN0YW5jZSA+IFZFUlRJQ0FMX1JBTkdFXHJcblx0XHQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGVuZFggLSBzdGFydFggPiBIT1JJWk9OVEFMX1JBTkdFKSB7XHJcblx0XHRcdGluZGV4ID0gKGluZGV4IC0gMiArIG1vdmllcy5sZW5ndGgpICUgbW92aWVzLmxlbmd0aDtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0fSBlbHNlIGlmIChzdGFydFggLSBlbmRYID4gSE9SSVpPTlRBTF9SQU5HRSkge1xyXG5cdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y2xlYXJJbnRlcnZhbChjYXJvdXNlbGxJbnRlcnZhbCk7XHJcblx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0fSwgY2Fyb3VzZWxsU3BlZWQpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IHNldFRvdWNoRXZlbnRMaXN0ZW5lciA9IChjb250YWluZXIsIG1vdmllcykgPT4ge1xyXG5cdFx0Y29uc3QgaW1hZ2VTbGlkZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9faW1hZ2VzXCIpO1xyXG5cclxuXHRcdGltYWdlU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChlKSA9PiB7XHJcblx0XHRcdGhhbmRsZVRvdWNoU3RhcnRFdmVudChlKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGltYWdlU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoZSkgPT4ge1xyXG5cdFx0XHRoYW5kbGVUb3VjaEVuZEV2ZW50KGUsIGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdGNoZWNrQXV0aG9yaXphdGlvbigpO1xyXG59KTtcclxuIl19
