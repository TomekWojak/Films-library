import{getData,createBrowsePage,createMainHeroSection,showErrorPopup,showBigLoader,hideBigLoader}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){const e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}};let r;const t=async(r,t)=>{const a=`https://api.themoviedb.org/3/movie/popular?language=${r}&page=${t}`;try{const r=await fetch(a,e);return await r.json()}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},a=async(e,r)=>{const a=[];for(let o=1;o<=r;o++)a.push(t(e,o));try{return await Promise.all(a)}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},o=async(e,r)=>{try{const t=await e(r,5),a=Math.trunc(20*Math.random());return t.map(e=>e.results[a])}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}};let s=1e4,n=5*s/100,i=0;const c=(e,r)=>{const t=e.querySelector(".browse-main__images"),a=t.querySelectorAll(".browse-main__img-box"),o=e.querySelector(".browse-main__carousell-controls");a[a.length-1].classList.remove("currentVisible"),a[i-1]?.classList.remove("currentVisible"),t.style.transform=`translateX(${100*-i}%)`,l(i,o),a[i].classList.add("currentVisible"),i++,i>r.length-1&&(i=0)},l=(e,r)=>{const t=r.querySelectorAll(".browse-main__btn"),a=r.querySelector(`.browse-main__btn[data-img="${e}"]`),o=a.querySelector(".browse-main__progress-bar");r.querySelectorAll(".browse-main__progress-bar").forEach(e=>e.style.width="0"),d(o),t.forEach(e=>e.classList.remove("active")),a.classList.add("active")},d=e=>{let r=0;const t=setInterval(()=>{r+=5,e.style.width=`${r}%`,r>=100&&(e.style.width="0",clearInterval(t))},n)},m=(e,r,t)=>{r.querySelector(".browse-main__carousell-controls").addEventListener("click",a=>{if(a.target.matches(".browse-main__btn")){clearInterval(t),t=setInterval(()=>{c(r,e)},s);const o=a.target,n=parseInt(o.dataset.img);i=n,c(r,e)}})};(()=>{const e=getData(),t=e?.translations,n=e?.preferredLanguage,i=e?.loggedIn,l=document.querySelector(".container");e&&i?(l.prepend(createBrowsePage(t)),l.append(showBigLoader()),o(a,n).then(e=>{createMainHeroSection(e,t,l),c(l,e),r=setInterval(()=>{c(l,e)},s),m(e,l,r)})):window.location.href="/"})()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLm1pbi5qcyIsIm5hbWVzIjpbImdldERhdGEiLCJjcmVhdGVCcm93c2VQYWdlIiwiY3JlYXRlTWFpbkhlcm9TZWN0aW9uIiwic2hvd0Vycm9yUG9wdXAiLCJzaG93QmlnTG9hZGVyIiwiaGlkZUJpZ0xvYWRlciIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwiYWNjZXB0IiwiQXV0aG9yaXphdGlvbiIsImNhcm91c2VsbEludGVydmFsIiwiZ2V0UG9wdWxhckZpbG1zIiwiYXN5bmMiLCJsYW5nIiwicGFnZU51bSIsIlVSTCIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwidHJhbnNsYXRpb25zIiwiYnJvd3NlUGFnZSIsImxvYWRpbmdEYXRhRXJyb3IiLCJsb2FkRmlsbXNUb0Nhcm91c2VsbCIsInJlcXVlc3RzIiwiaSIsInB1c2giLCJQcm9taXNlIiwiYWxsIiwiY2hvb3NlRmlsbXNUb0Nhcm91c2VsbCIsImRhdGEiLCJjdXJyZW50TGFuZ3VhZ2UiLCJwYWdlc0RhdGEiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwidHJ1bmMiLCJyYW5kb20iLCJtYXAiLCJwYWdlIiwicmVzdWx0cyIsImNhcm91c2VsbFNwZWVkIiwiaW50ZXJ2YWxTcGVlZCIsImluZGV4IiwiaGFuZGxlRmlsbXNDYXJvdXNlbGwiLCJjb250YWluZXIiLCJtb3ZpZXMiLCJpbWFnZVNsaWRlciIsInF1ZXJ5U2VsZWN0b3IiLCJhbGxJbWFnZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2Fyb3VzZWxsQ29udHJvbHMiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJzdHlsZSIsInRyYW5zZm9ybSIsImhhbmRsZUNhcm91c2VsbENvbnRyb2xzU3RhdGUiLCJhZGQiLCJjYXJvdXNlbGxDb250cm9sc0JveCIsImFsbENvbnRyb2xCdG5zIiwiY3VycmVudEJ0biIsInByb2dyZXNzQmFyIiwiZm9yRWFjaCIsImJhciIsIndpZHRoIiwiY2hhbmdlUHJvZ3Jlc3NCYXIiLCJidG4iLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNoYW5nZUN1cnJlbnRJbWciLCJlIiwidGFyZ2V0IiwibWF0Y2hlcyIsImltZ0RhdGEiLCJwYXJzZUludCIsImRhdGFzZXQiLCJpbWciLCJ1c2VyRGF0YSIsInByZWZlcnJlZExhbmd1YWdlIiwiaXNMb2dnZWRJbiIsImxvZ2dlZEluIiwicHJlcGVuZCIsImFwcGVuZCIsInRoZW4iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjaGVja0F1dGhvcml6YXRpb24iXSwic291cmNlcyI6WyJtYWluLXBhZ2UuanMiXSwibWFwcGluZ3MiOiJPQUNDQSxRQUNBQyxpQkFDQUMsc0JBQ0FDLGVBQ0FDLGNBQ0FDLGtCQUNNLHNCQUNQQyxTQUFTQyxpQkFBaUIsbUJBQW9CLFdBRTdDLE1BRU1DLEVBQVUsQ0FDZkMsT0FBUSxNQUNSQyxRQUFTLENBQ1JDLE9BQVEsbUJBQ1JDLGNBQ0MseVBBR0gsSUFBSUMsRUFDSixNQTZCTUMsRUFBa0JDLE1BQU9DLEVBQU1DLEtBQ3BDLE1BQU1DLEVBQU0sdURBQXVERixVQUFhQyxJQUVoRixJQUNDLE1BQU1FLFFBQWlCQyxNQUFNRixFQUFLVixHQUdsQyxhQUZtQlcsRUFBU0UsTUFHN0IsQ0FBRSxNQUNEbEIsZUFBZW1CLGFBQWFDLFdBQVdDLGlCQUFrQixVQUMxRCxHQUVLQyxFQUF1QlYsTUFBT0MsRUFBTUMsS0FDekMsTUFBTVMsRUFBVyxHQUVqQixJQUFLLElBQUlDLEVBQUksRUFBR0EsR0FBS1YsRUFBU1UsSUFDN0JELEVBQVNFLEtBQUtkLEVBQWdCRSxFQUFNVyxJQUdyQyxJQUVDLGFBRHdCRSxRQUFRQyxJQUFJSixFQUVyQyxDQUFFLE1BQ0R2QixlQUFlbUIsYUFBYUMsV0FBV0MsaUJBQWtCLFVBQzFELEdBR0tPLEVBQXlCaEIsTUFBT2lCLEVBQU1DLEtBQzNDLElBQ0MsTUFBTUMsUUFBa0JGLEVBQUtDLEVBckVOLEdBc0VqQkUsRUFBZUMsS0FBS0MsTUFyRUMsR0FxRUtELEtBQUtFLFVBR3JDLE9BRnNCSixFQUFVSyxJQUFLQyxHQUFTQSxFQUFLQyxRQUFRTixHQUc1RCxDQUFFLE1BQ0RoQyxlQUFlbUIsYUFBYUMsV0FBV0MsaUJBQWtCLFVBQzFELENBQUUsUUFDRG5CLGVBQ0QsR0FJRCxJQUFJcUMsRUFBaUIsSUFFakJDLEVBRHVCLEVBQ05ELEVBQXlDLElBRTFERSxFQUFRLEVBQ1osTUFBTUMsRUFBdUIsQ0FBQ0MsRUFBV0MsS0FDeEMsTUFBTUMsRUFBY0YsRUFBVUcsY0FBYyx3QkFDdENDLEVBQVlGLEVBQVlHLGlCQUFpQix5QkFDekNDLEVBQW9CTixFQUFVRyxjQUNuQyxvQ0FHREMsRUFBVUEsRUFBVUcsT0FBUyxHQUFHQyxVQUFVQyxPQUFPLGtCQUNqREwsRUFBVU4sRUFBUSxJQUFJVSxVQUFVQyxPQUFPLGtCQUV2Q1AsRUFBWVEsTUFBTUMsVUFBWSxjQVpWLEtBWXlCYixNQUM3Q2MsRUFBNkJkLEVBQU9RLEdBRXBDRixFQUFVTixHQUFPVSxVQUFVSyxJQUFJLGtCQUUvQmYsSUFFSUEsRUFBUUcsRUFBT00sT0FBUyxJQUFHVCxFQUFRLElBR2xDYyxFQUErQixDQUFDZCxFQUFPZ0IsS0FDNUMsTUFBTUMsRUFDTEQsRUFBcUJULGlCQUFpQixxQkFDakNXLEVBQWFGLEVBQXFCWCxjQUN2QywrQkFBK0JMLE9BRTFCbUIsRUFBY0QsRUFBV2IsY0FBYyw4QkFDckJXLEVBQXFCVCxpQkFDNUMsOEJBR2VhLFFBQVNDLEdBQVNBLEVBQUlULE1BQU1VLE1BQVEsS0FFcERDLEVBQWtCSixHQUVsQkYsRUFBZUcsUUFBU0ksR0FBUUEsRUFBSWQsVUFBVUMsT0FBTyxXQUNyRE8sRUFBV1IsVUFBVUssSUFBSSxXQUdwQlEsRUFBcUJKLElBQzFCLElBQUlHLEVBQVEsRUFDWixNQUFNRyxFQUFXQyxZQUFZLEtBQzVCSixHQTlDeUIsRUErQ3pCSCxFQUFZUCxNQUFNVSxNQUFRLEdBQUdBLEtBQ3pCQSxHQUFTLE1BQ1pILEVBQVlQLE1BQU1VLE1BQVEsSUFDMUJLLGNBQWNGLEtBRWIxQixJQUVFNkIsRUFBbUIsQ0FBQ3pCLEVBQVFELEVBQVdqQyxLQUNsQmlDLEVBQVVHLGNBQ25DLG9DQUdpQjFDLGlCQUFpQixRQUFVa0UsSUFDNUMsR0FBSUEsRUFBRUMsT0FBT0MsUUFBUSxxQkFBc0IsQ0FDMUNKLGNBQWMxRCxHQUVkQSxFQUFvQnlELFlBQVksS0FDL0J6QixFQUFxQkMsRUFBV0MsSUFDOUJMLEdBRUgsTUFBTW9CLEVBQWFXLEVBQUVDLE9BQ2ZFLEVBQVVDLFNBQVNmLEVBQVdnQixRQUFRQyxLQUU1Q25DLEVBQVFnQyxFQUNSL0IsRUFBcUJDLEVBQVdDLEVBQ2pDLEtBaEp5QixNQUMxQixNQUFNaUMsRUFBV2hGLFVBQ1hzQixFQUFlMEQsR0FBVTFELGFBQ3pCVyxFQUFrQitDLEdBQVVDLGtCQUM1QkMsRUFBYUYsR0FBVUcsU0FFdkJyQyxFQUFZeEMsU0FBUzJDLGNBQWMsY0FFcEMrQixHQUFhRSxHQUdqQnBDLEVBQVVzQyxRQUFRbkYsaUJBQWlCcUIsSUFDbkN3QixFQUFVdUMsT0FBT2pGLGlCQUVqQjJCLEVBQXVCTixFQUFzQlEsR0FBaUJxRCxLQUM1RHZDLElBQ0E3QyxzQkFBc0I2QyxFQUFRekIsRUFBY3dCLEdBQzVDRCxFQUFxQkMsRUFBV0MsR0FFaENsQyxFQUFvQnlELFlBQVksS0FDL0J6QixFQUFxQkMsRUFBV0MsSUFDOUJMLEdBRUg4QixFQUFpQnpCLEVBQVFELEVBQVdqQyxNQWR0QzBFLE9BQU9DLFNBQVNDLEtBQU8sS0EwSXpCQyxFQUNEIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcblx0Z2V0RGF0YSxcclxuXHRjcmVhdGVCcm93c2VQYWdlLFxyXG5cdGNyZWF0ZU1haW5IZXJvU2VjdGlvbixcclxuXHRzaG93RXJyb3JQb3B1cCxcclxuXHRzaG93QmlnTG9hZGVyLFxyXG5cdGhpZGVCaWdMb2FkZXIsXHJcbn0gZnJvbSBcIi4vY29tcG9uZW50cy5taW4uanNcIjtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG5cdC8vIGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvZGlzY292ZXIvbW92aWU/bGFuZ3VhZ2U9cGxcclxuXHRjb25zdCBDQVJPVVNFTExfTEVOR1RIID0gNTtcclxuXHRjb25zdCBGSUxNX0FNT1VOVF9QRVJfUEFHRSA9IDIwO1xyXG5cdGNvbnN0IG9wdGlvbnMgPSB7XHJcblx0XHRtZXRob2Q6IFwiR0VUXCIsXHJcblx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdGFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcblx0XHRcdEF1dGhvcml6YXRpb246XHJcblx0XHRcdFx0XCJCZWFyZXIgZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKaGRXUWlPaUl6TlRZd1pqTTRNalUzTkRRMVpHRTFaR1prWVRZeFl6RTBZV000WW1NNE15SXNJbTVpWmlJNk1UYzFPVGMyTlRBek9DNDVOQ3dpYzNWaUlqb2lOamhsTTJVeU1tVXlOalk1TnpZNE16aGxZekkzTnpJNUlpd2ljMk52Y0dWeklqcGJJbUZ3YVY5eVpXRmtJbDBzSW5abGNuTnBiMjRpT2pGOS5udUdmRWpjbEpMZXBtenpIaTJvbU5ocDI5VEhnckpmOU52NkQ0X2dUZHhBXCIsXHJcblx0XHR9LFxyXG5cdH07XHJcblx0bGV0IGNhcm91c2VsbEludGVydmFsO1xyXG5cdGNvbnN0IGNoZWNrQXV0aG9yaXphdGlvbiA9ICgpID0+IHtcclxuXHRcdGNvbnN0IHVzZXJEYXRhID0gZ2V0RGF0YSgpO1xyXG5cdFx0Y29uc3QgdHJhbnNsYXRpb25zID0gdXNlckRhdGE/LnRyYW5zbGF0aW9ucztcclxuXHRcdGNvbnN0IGN1cnJlbnRMYW5ndWFnZSA9IHVzZXJEYXRhPy5wcmVmZXJyZWRMYW5ndWFnZTtcclxuXHRcdGNvbnN0IGlzTG9nZ2VkSW4gPSB1c2VyRGF0YT8ubG9nZ2VkSW47XHJcblxyXG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcblxyXG5cdFx0aWYgKCF1c2VyRGF0YSB8fCAhaXNMb2dnZWRJbikge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29udGFpbmVyLnByZXBlbmQoY3JlYXRlQnJvd3NlUGFnZSh0cmFuc2xhdGlvbnMpKTtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZChzaG93QmlnTG9hZGVyKCkpO1xyXG5cclxuXHRcdFx0Y2hvb3NlRmlsbXNUb0Nhcm91c2VsbChsb2FkRmlsbXNUb0Nhcm91c2VsbCwgY3VycmVudExhbmd1YWdlKS50aGVuKFxyXG5cdFx0XHRcdChtb3ZpZXMpID0+IHtcclxuXHRcdFx0XHRcdGNyZWF0ZU1haW5IZXJvU2VjdGlvbihtb3ZpZXMsIHRyYW5zbGF0aW9ucywgY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHJcblx0XHRcdFx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0XHRcdFx0fSwgY2Fyb3VzZWxsU3BlZWQpO1xyXG5cclxuXHRcdFx0XHRcdGNoYW5nZUN1cnJlbnRJbWcobW92aWVzLCBjb250YWluZXIsIGNhcm91c2VsbEludGVydmFsKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgZ2V0UG9wdWxhckZpbG1zID0gYXN5bmMgKGxhbmcsIHBhZ2VOdW0pID0+IHtcclxuXHRcdGNvbnN0IFVSTCA9IGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3BvcHVsYXI/bGFuZ3VhZ2U9JHtsYW5nfSZwYWdlPSR7cGFnZU51bX1gO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVVJMLCBvcHRpb25zKTtcclxuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdGNvbnN0IGxvYWRGaWxtc1RvQ2Fyb3VzZWxsID0gYXN5bmMgKGxhbmcsIHBhZ2VOdW0pID0+IHtcclxuXHRcdGNvbnN0IHJlcXVlc3RzID0gW107XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gcGFnZU51bTsgaSsrKSB7XHJcblx0XHRcdHJlcXVlc3RzLnB1c2goZ2V0UG9wdWxhckZpbG1zKGxhbmcsIGkpKTtcclxuXHRcdH1cclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0cyk7XHJcblx0XHRcdHJldHVybiByZXNwb25zZXM7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0c2hvd0Vycm9yUG9wdXAodHJhbnNsYXRpb25zLmJyb3dzZVBhZ2UubG9hZGluZ0RhdGFFcnJvciwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNob29zZUZpbG1zVG9DYXJvdXNlbGwgPSBhc3luYyAoZGF0YSwgY3VycmVudExhbmd1YWdlKSA9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBwYWdlc0RhdGEgPSBhd2FpdCBkYXRhKGN1cnJlbnRMYW5ndWFnZSwgQ0FST1VTRUxMX0xFTkdUSCk7XHJcblx0XHRcdGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIEZJTE1fQU1PVU5UX1BFUl9QQUdFKTtcclxuXHRcdFx0Y29uc3QgY2hvb3Nlbk1vdmllcyA9IHBhZ2VzRGF0YS5tYXAoKHBhZ2UpID0+IHBhZ2UucmVzdWx0c1tyYW5kb21OdW1iZXJdKTtcclxuXHJcblx0XHRcdHJldHVybiBjaG9vc2VuTW92aWVzO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdGhpZGVCaWdMb2FkZXIoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBDQVJPVVNFTExcclxuXHRsZXQgY2Fyb3VzZWxsU3BlZWQgPSAxMDAwMDtcclxuXHRsZXQgY2Fyb3VzZWxsU3Ryb2tlUmFuZ2UgPSA1O1xyXG5cdGxldCBpbnRlcnZhbFNwZWVkID0gKGNhcm91c2VsbFNwZWVkICogY2Fyb3VzZWxsU3Ryb2tlUmFuZ2UpIC8gMTAwO1xyXG5cdGxldCBjYXJvdXNlbGxXaWR0aCA9IDEwMDtcclxuXHRsZXQgaW5kZXggPSAwO1xyXG5cdGNvbnN0IGhhbmRsZUZpbG1zQ2Fyb3VzZWxsID0gKGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRjb25zdCBpbWFnZVNsaWRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19pbWFnZXNcIik7XHJcblx0XHRjb25zdCBhbGxJbWFnZXMgPSBpbWFnZVNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmJyb3dzZS1tYWluX19pbWctYm94XCIpO1xyXG5cdFx0Y29uc3QgY2Fyb3VzZWxsQ29udHJvbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XCIuYnJvd3NlLW1haW5fX2Nhcm91c2VsbC1jb250cm9sc1wiXHJcblx0XHQpO1xyXG5cdFx0Ly8gT2JzxYJ1Z2Egb3N0YXRuaWVnbyBpIHBpZXJ3c3plZ28gZmlsbXVcclxuXHRcdGFsbEltYWdlc1thbGxJbWFnZXMubGVuZ3RoIC0gMV0uY2xhc3NMaXN0LnJlbW92ZShcImN1cnJlbnRWaXNpYmxlXCIpO1xyXG5cdFx0YWxsSW1hZ2VzW2luZGV4IC0gMV0/LmNsYXNzTGlzdC5yZW1vdmUoXCJjdXJyZW50VmlzaWJsZVwiKTtcclxuXHJcblx0XHRpbWFnZVNsaWRlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkey1pbmRleCAqIGNhcm91c2VsbFdpZHRofSUpYDtcclxuXHRcdGhhbmRsZUNhcm91c2VsbENvbnRyb2xzU3RhdGUoaW5kZXgsIGNhcm91c2VsbENvbnRyb2xzKTtcclxuXHJcblx0XHRhbGxJbWFnZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50VmlzaWJsZVwiKTtcclxuXHJcblx0XHRpbmRleCsrO1xyXG5cclxuXHRcdGlmIChpbmRleCA+IG1vdmllcy5sZW5ndGggLSAxKSBpbmRleCA9IDA7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgaGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZSA9IChpbmRleCwgY2Fyb3VzZWxsQ29udHJvbHNCb3gpID0+IHtcclxuXHRcdGNvbnN0IGFsbENvbnRyb2xCdG5zID1cclxuXHRcdFx0Y2Fyb3VzZWxsQ29udHJvbHNCb3gucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2UtbWFpbl9fYnRuXCIpO1xyXG5cdFx0Y29uc3QgY3VycmVudEJ0biA9IGNhcm91c2VsbENvbnRyb2xzQm94LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdGAuYnJvd3NlLW1haW5fX2J0bltkYXRhLWltZz1cIiR7aW5kZXh9XCJdYFxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IHByb2dyZXNzQmFyID0gY3VycmVudEJ0bi5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19wcm9ncmVzcy1iYXJcIik7XHJcblx0XHRjb25zdCBhbGxQcm9ncmVzc0JhcnMgPSBjYXJvdXNlbGxDb250cm9sc0JveC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFx0XHRcIi5icm93c2UtbWFpbl9fcHJvZ3Jlc3MtYmFyXCJcclxuXHRcdCk7XHJcblxyXG5cdFx0YWxsUHJvZ3Jlc3NCYXJzLmZvckVhY2goKGJhcikgPT4gKGJhci5zdHlsZS53aWR0aCA9IFwiMFwiKSk7XHJcblxyXG5cdFx0Y2hhbmdlUHJvZ3Jlc3NCYXIocHJvZ3Jlc3NCYXIpO1xyXG5cclxuXHRcdGFsbENvbnRyb2xCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIikpO1xyXG5cdFx0Y3VycmVudEJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNoYW5nZVByb2dyZXNzQmFyID0gKHByb2dyZXNzQmFyKSA9PiB7XHJcblx0XHRsZXQgd2lkdGggPSAwO1xyXG5cdFx0Y29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHdpZHRoICs9IGNhcm91c2VsbFN0cm9rZVJhbmdlO1xyXG5cdFx0XHRwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IGAke3dpZHRofSVgO1xyXG5cdFx0XHRpZiAod2lkdGggPj0gMTAwKSB7XHJcblx0XHRcdFx0cHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBcIjBcIjtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKGludGVydmFsKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgaW50ZXJ2YWxTcGVlZCk7XHJcblx0fTtcclxuXHRjb25zdCBjaGFuZ2VDdXJyZW50SW1nID0gKG1vdmllcywgY29udGFpbmVyLCBjYXJvdXNlbGxJbnRlcnZhbCkgPT4ge1xyXG5cdFx0Y29uc3QgY2Fyb3VzZWxsQ29udHJvbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XCIuYnJvd3NlLW1haW5fX2Nhcm91c2VsbC1jb250cm9sc1wiXHJcblx0XHQpO1xyXG5cclxuXHRcdGNhcm91c2VsbENvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdFx0XHRpZiAoZS50YXJnZXQubWF0Y2hlcyhcIi5icm93c2UtbWFpbl9fYnRuXCIpKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbChjYXJvdXNlbGxJbnRlcnZhbCk7XHJcblxyXG5cdFx0XHRcdGNhcm91c2VsbEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0XHRcdH0sIGNhcm91c2VsbFNwZWVkKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgY3VycmVudEJ0biA9IGUudGFyZ2V0O1xyXG5cdFx0XHRcdGNvbnN0IGltZ0RhdGEgPSBwYXJzZUludChjdXJyZW50QnRuLmRhdGFzZXQuaW1nKTtcclxuXHJcblx0XHRcdFx0aW5kZXggPSBpbWdEYXRhO1xyXG5cdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fTtcclxuXHRjaGVja0F1dGhvcml6YXRpb24oKTtcclxufSk7XHJcbiJdfQ==
