import{getData,createBrowsePage,createMainHeroSection,showErrorPopup,showBigLoader,hideBigLoader,createFilmSlider,createFooter}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){const e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}},t=new Map;let r,a=1e4,n=0;const o=new Date,i=`https://api.themoviedb.org/3/discover/movie?primary_release_year=2025&primary_release_date.gte=${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}&sort_by=popularity.desc\n`,s="&page=",c=async(t,...r)=>{const a=[];for await(const n of r){const r=n+t+s+1,o=await fetch(r,e),i=await o.json();a.push(i)}return a},l=async(t,r,a)=>{const n=a+t+s+r;try{const t=await fetch(n,e);return await t.json()}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},d=async(e,t)=>{const r=[];for(let a=1;a<=t;a++)r.push(l(e,a,"https://api.themoviedb.org/3/movie/popular?language="));try{return await Promise.all(r)}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},w=async(e,t)=>{try{const r=await e(t,5),a=Math.trunc(20*Math.random());return r.map(e=>e.results[a])}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}},h=(e,t)=>{const r=e.querySelector(".browse-main__images"),a=r.querySelectorAll(".browse-main__img-box"),o=e.querySelector(".browse-main__carousell-controls");a.forEach(e=>e.classList.remove("currentVisible")),r.style.transform=`translateX(${100*-n}%)`,u(n,o),a[n].classList.add("currentVisible"),n++,n>t.length-1&&(n=0),b(e)},u=(e,r)=>{const a=r.querySelectorAll(".browse-main__btn"),n=r.querySelector(`.browse-main__btn[data-img="${e}"]`),o=n.querySelector(".browse-main__progress-bar"),i=r.querySelectorAll(".browse-main__progress-bar");t.forEach(e=>clearInterval(e)),t.clear(),i.forEach(e=>e.style.width="0"),m(o,e),a.forEach(e=>e.classList.remove("active")),n.classList.add("active")},m=(e,r)=>{t.has(r)&&clearInterval(t.get(r));let a=0;const n=setInterval(()=>{a+=2,e.style.width=`${a}%`,a>=100&&(e.style.width="0",clearInterval(n),t.delete(r))},200);t.set(r,n)},g=(e,t)=>{t.querySelector(".browse-main__carousell-controls").addEventListener("click",o=>{if(o.target.matches(".browse-main__btn")){if(o.target.classList.contains("active"))return;clearInterval(r);const i=o.target,s=parseInt(i.dataset.img);n=s,h(t,e),r=setInterval(()=>{h(t,e)},a)}})},b=e=>{e.querySelectorAll(".browse-main__img-box").forEach(e=>{const t=e.classList.contains("currentVisible")?0:-1;p(e,t,0===t?"visible":"hidden")})},p=(e,t,r)=>{const a=e.querySelector(".browse-main__trailer-btn"),n=e.querySelector(".browse-main__see-more-btn");a.setAttribute("tabindex",t),n.setAttribute("tabindex",t),a.style.visibility=r,n.style.visibility=r};let y,_,v,f;const S=(e,t)=>{const o=Math.abs(y-_),i=Math.abs(v-f);o<30||i>30||(_-y>30?(n=(n-2+t.length)%t.length,h(e,t)):y-_>30&&h(e,t),clearInterval(r),r=setInterval(()=>{h(e,t)},a))},E=(e,t)=>{const r=e.querySelector(".browse-main__images");r.addEventListener("touchstart",e=>{(e=>{y=e.touches[0].clientX,v=e.touches[0].clientY})(e)}),r.addEventListener("touchend",r=>{((e,t,r)=>{_=e.changedTouches[0].clientX,f=e.changedTouches[0].clientY,S(t,r)})(r,e,t)})},I=(e,t)=>{e.dataset.index=t},L=e=>{const t=(()=>{let e=2;return window.innerWidth>576&&window.innerWidth<992&&(e=1),window.innerWidth>=992&&window.innerWidth<1200&&(e=4),e})();let r=e.dataset.index;const a=e.querySelector(".browse-section__slider-images"),n=e.querySelector(".browse-section__slider-box");if(!n)return;const o=n.offsetWidth;a.style.transform=`translateX(${-r*o*t}px)`},q=(e,t)=>{let r=0===t?parseInt(e.dataset.index):0;r>=(()=>{let e;return window.innerWidth<576&&(e=9),window.innerWidth>=576&&window.innerWidth<992&&(e=17),window.innerWidth>=992&&window.innerWidth<1200&&(e=4),window.innerWidth>=1200&&(e=7),e})()||(r++,I(e,r),L(e))},M=e=>{e.querySelectorAll(".browse-section__slider").forEach(e=>e.addEventListener("click",t=>{t.target.matches(".browse-section__slider-next-btn")?q(e,0):t.target.matches(".browse-section__slider-prev-btn")&&((e,t)=>{let r=0===t?parseInt(e.dataset.index):0;r<=0||(r--,I(e,r),L(e))})(e,0)}))};let N=window.innerWidth;window.addEventListener("resize",()=>{if(window.innerWidth===N)return;N=window.innerWidth;document.querySelectorAll(".browse-section__slider").forEach(e=>{const t=e.querySelector(".browse-section__slider-images");I(e,0),t.style.transform="translateX(0)"})}),window.addEventListener("unload",()=>{clearInterval(r),t.forEach(e=>clearInterval(e)),t.clear()}),(async()=>{const e=getData(),t=e?.translations,n=e?.preferredLanguage,o=e?.loggedIn,s=document.querySelector(".container");if(e&&o){s.prepend(createBrowsePage(t)),s.append(showBigLoader());try{const e=await w(d,n);createMainHeroSection(e,t,s),h(s,e),r=setInterval(()=>h(s,e),a),g(e,s),E(s,e);const o=await c(n,"https://api.themoviedb.org/3/movie/upcoming?language=","https://api.themoviedb.org/3/trending/all/week?language=","https://api.themoviedb.org/3/discover/tv?with_origin_country=US|GB&language=&sort_by=popularity.desc\n",i),l=document.querySelector("main");l||showErrorPopup(t.browsePage.loadingDataError,"#dc4a34"),l.append(createFilmSlider(o,t,1,t.browseSection.sectionNames.trending),createFilmSlider(o,t,0,t.browseSection.sectionNames.upcoming),createFilmSlider(o,t,2,t.browseSection.sectionNames.topRatedSeries),createFilmSlider(o,t,3,t.browseSection.sectionNames.futureFilms)),M(s),s.append(createFooter(t))}catch{showErrorPopup(t.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}}else window.location.href="/"})()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLm1pbi5qcyIsIm5hbWVzIjpbImdldERhdGEiLCJjcmVhdGVCcm93c2VQYWdlIiwiY3JlYXRlTWFpbkhlcm9TZWN0aW9uIiwic2hvd0Vycm9yUG9wdXAiLCJzaG93QmlnTG9hZGVyIiwiaGlkZUJpZ0xvYWRlciIsImNyZWF0ZUZpbG1TbGlkZXIiLCJjcmVhdGVGb290ZXIiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcHRpb25zIiwibWV0aG9kIiwiaGVhZGVycyIsImFjY2VwdCIsIkF1dGhvcml6YXRpb24iLCJwcm9ncmVzc0JhckludGVydmFscyIsIk1hcCIsImNhcm91c2VsbEludGVydmFsIiwiY2Fyb3VzZWxsU3BlZWQiLCJpbmRleCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsIlVQQ09NSU5HX0ZJTE1TIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJGSUxNU19QQUdFU19BTU9VTlQiLCJnZXRBbGxGaWxtcyIsImFzeW5jIiwibGFuZyIsInVybHMiLCJmaWxtc0FyciIsInVybCIsIlVSTCIsInJlc3BvbnNlIiwiZmV0Y2giLCJkYXRhIiwianNvbiIsInB1c2giLCJnZXRGaWxtcyIsInBhZ2VOdW0iLCJ0cmFuc2xhdGlvbnMiLCJicm93c2VQYWdlIiwibG9hZGluZ0RhdGFFcnJvciIsImxvYWRGaWxtc1RvQ2Fyb3VzZWxsIiwicmVxdWVzdHMiLCJpIiwiUHJvbWlzZSIsImFsbCIsImNob29zZUZpbG1zVG9DYXJvdXNlbGwiLCJjdXJyZW50TGFuZ3VhZ2UiLCJwYWdlc0RhdGEiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwidHJ1bmMiLCJyYW5kb20iLCJtYXAiLCJwYWdlIiwicmVzdWx0cyIsImhhbmRsZUZpbG1zQ2Fyb3VzZWxsIiwiY29udGFpbmVyIiwibW92aWVzIiwiaW1hZ2VTbGlkZXIiLCJxdWVyeVNlbGVjdG9yIiwiYWxsSW1hZ2VzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhcm91c2VsbENvbnRyb2xzIiwiZm9yRWFjaCIsImltZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZSIsImFkZCIsImxlbmd0aCIsImhhbmRsZUJ0bnNWaXNpYmlsaXR5IiwiY2Fyb3VzZWxsQ29udHJvbHNCb3giLCJhbGxDb250cm9sQnRucyIsImN1cnJlbnRCdG4iLCJwcm9ncmVzc0JhciIsImFsbFByb2dyZXNzQmFycyIsImludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyIiwiYmFyIiwid2lkdGgiLCJjaGFuZ2VQcm9ncmVzc0JhciIsImJ0biIsImJ0bkluZGV4IiwiaGFzIiwiZ2V0IiwicHJvZ3Jlc3NCYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZGVsZXRlIiwic2V0IiwiY2hhbmdlQ3VycmVudEltZyIsImUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJpbWdEYXRhIiwicGFyc2VJbnQiLCJkYXRhc2V0IiwiZmlsbSIsInRhYmluZGV4IiwiZ2l2ZUJ0bnNBdHRyaWJ1dGUiLCJ2aXNpYmlsaXR5IiwidHJhaWxlckJ0biIsInNlZU1vcmVCdG4iLCJzZXRBdHRyaWJ1dGUiLCJzdGFydFgiLCJlbmRYIiwic3RhcnRZIiwiZW5kWSIsImhhbmRsZVN3aXBlIiwiaG9yaXpvbnRhbERpc3RhbmNlIiwiYWJzIiwidmVydGljYWxEaXN0YW5jZSIsInNldFRvdWNoRXZlbnRMaXN0ZW5lciIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsImhhbmRsZVRvdWNoU3RhcnRFdmVudCIsImNoYW5nZWRUb3VjaGVzIiwiaGFuZGxlVG91Y2hFbmRFdmVudCIsImNoYW5nZUNhcm91c2VsbERhdGFJbmRleCIsInNsaWRlciIsIm1vdmVTbGlkZXIiLCJ0aHJlc2hvbGQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2V0VGhyZXNob2xkIiwic2xpZGVyRGF0YXNldCIsInNsaWRlckNhcm91c2VsbCIsInBvc3RlciIsInBvc3RlcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJzaG93TmV4dFNsaWRlIiwiaW5pdGlhbEluZGV4IiwibWF4SW5kZXgiLCJnZXRDYXJvdXNlbENvbmZpZyIsInByZXBhcmVDYXJvdXNlbEl0ZW1zIiwic2hvd1ByZXZTbGlkZSIsImxhc3RXaWR0aCIsInVzZXJEYXRhIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJpc0xvZ2dlZEluIiwibG9nZ2VkSW4iLCJwcmVwZW5kIiwiYXBwZW5kIiwiZmlsbXMiLCJtYWluIiwiYnJvd3NlU2VjdGlvbiIsInNlY3Rpb25OYW1lcyIsInRyZW5kaW5nIiwidXBjb21pbmciLCJ0b3BSYXRlZFNlcmllcyIsImZ1dHVyZUZpbG1zIiwibG9jYXRpb24iLCJocmVmIiwiY2hlY2tBdXRob3JpemF0aW9uIl0sInNvdXJjZXMiOlsibWFpbi1wYWdlLmpzIl0sIm1hcHBpbmdzIjoiT0FDQ0EsUUFDQUMsaUJBQ0FDLHNCQUNBQyxlQUNBQyxjQUNBQyxjQUNBQyxpQkFDQUMsaUJBQ00sc0JBQ1BDLFNBQVNDLGlCQUFpQixtQkFBb0IsV0FDN0MsTUFHTUMsRUFBVSxDQUNmQyxPQUFRLE1BQ1JDLFFBQVMsQ0FDUkMsT0FBUSxtQkFDUkMsY0FDQyx5UEFHR0MsRUFBdUIsSUFBSUMsSUFDakMsSUFLSUMsRUFMQUMsRUFBaUIsSUFJakJDLEVBQVEsRUFHWixNQUtNQyxFQUFjLElBQUlDLEtBQ2xCQyxFQUFpQixrR0FBa0dGLEVBQVlHLGlCQUNwSUgsRUFBWUksV0FBYSxLQUN0QkosRUFBWUssc0NBR1ZDLEVBQXFCLFNBb0ZyQkMsRUFBY0MsTUFBT0MsS0FBU0MsS0FDbkMsTUFBTUMsRUFBVyxHQUNqQixVQUFXLE1BQU1DLEtBQU9GLEVBQU0sQ0FDN0IsTUFBTUcsRUFDTEQsRUFBTUgsRUFBT0gsRUFwSHdCLEVBcUhoQ1EsUUFBaUJDLE1BQU1GLEVBQUt2QixHQUM1QjBCLFFBQWFGLEVBQVNHLE9BRTVCTixFQUFTTyxLQUFLRixFQUNmLENBRUEsT0FBT0wsR0FFRlEsRUFBV1gsTUFBT0MsRUFBTVcsRUFBU1IsS0FDdEMsTUFBTUMsRUFBTUQsRUFBTUgsRUFBT0gsRUFBcUJjLEVBRTlDLElBQ0MsTUFBTU4sUUFBaUJDLE1BQU1GLEVBQUt2QixHQUdsQyxhQUZtQndCLEVBQVNHLE1BRzdCLENBQUUsTUFDRGxDLGVBQWVzQyxhQUFhQyxXQUFXQyxpQkFBa0IsVUFDMUQsR0FHS0MsRUFBdUJoQixNQUFPQyxFQUFNVyxLQUN6QyxNQUFNSyxFQUFXLEdBRWpCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxHQUFLTixFQUFTTSxJQUM3QkQsRUFBU1AsS0FBS0MsRUFBU1YsRUFBTWlCLEVBN0hMLHlEQWdJekIsSUFFQyxhQUR3QkMsUUFBUUMsSUFBSUgsRUFFckMsQ0FBRSxNQUNEMUMsZUFBZXNDLGFBQWFDLFdBQVdDLGlCQUFrQixVQUMxRCxHQUdLTSxFQUF5QnJCLE1BQU9RLEVBQU1jLEtBQzNDLElBQ0MsTUFBTUMsUUFBa0JmLEVBQUtjLEVBN0pOLEdBOEpqQkUsRUFBZUMsS0FBS0MsTUE3SkMsR0E2SktELEtBQUtFLFVBR3JDLE9BRnNCSixFQUFVSyxJQUFLQyxHQUFTQSxFQUFLQyxRQUFRTixHQUc1RCxDQUFFLE1BQ0RqRCxlQUFlc0MsYUFBYUMsV0FBV0MsaUJBQWtCLFVBQzFELENBQUUsUUFDRHRDLGVBQ0QsR0FLS3NELEVBQXVCLENBQUNDLEVBQVdDLEtBQ3hDLE1BQU1DLEVBQWNGLEVBQVVHLGNBQWMsd0JBQ3RDQyxFQUFZRixFQUFZRyxpQkFBaUIseUJBQ3pDQyxFQUFvQk4sRUFBVUcsY0FDbkMsb0NBRURDLEVBQVVHLFFBQVNDLEdBQVFBLEVBQUlDLFVBQVVDLE9BQU8sbUJBRWhEUixFQUFZUyxNQUFNQyxVQUFZLGNBcEtWLEtBb0t5QnJELE1BQzdDc0QsRUFBNkJ0RCxFQUFPK0MsR0FDcENGLEVBQVU3QyxHQUFPa0QsVUFBVUssSUFBSSxrQkFFL0J2RCxJQUVJQSxFQUFRMEMsRUFBT2MsT0FBUyxJQUFHeEQsRUFBUSxHQUV2Q3lELEVBQXFCaEIsSUFHaEJhLEVBQStCLENBQUN0RCxFQUFPMEQsS0FDNUMsTUFBTUMsRUFDTEQsRUFBcUJaLGlCQUFpQixxQkFDakNjLEVBQWFGLEVBQXFCZCxjQUN2QywrQkFBK0I1QyxPQUUxQjZELEVBQWNELEVBQVdoQixjQUFjLDhCQUN2Q2tCLEVBQWtCSixFQUFxQlosaUJBQzVDLDhCQUdEbEQsRUFBcUJvRCxRQUFTZSxHQUFhQyxjQUFjRCxJQUN6RG5FLEVBQXFCcUUsUUFFckJILEVBQWdCZCxRQUFTa0IsR0FBU0EsRUFBSWQsTUFBTWUsTUFBUSxLQUVwREMsRUFBa0JQLEVBQWE3RCxHQUUvQjJELEVBQWVYLFFBQVNxQixHQUFRQSxFQUFJbkIsVUFBVUMsT0FBTyxXQUNyRFMsRUFBV1YsVUFBVUssSUFBSSxXQUdwQmEsRUFBb0IsQ0FBQ1AsRUFBYVMsS0FDbkMxRSxFQUFxQjJFLElBQUlELElBQzVCTixjQUFjcEUsRUFBcUI0RSxJQUFJRixJQUd4QyxJQUFJSCxFQUFRLEVBQ1osTUFBTU0sRUFBc0JDLFlBQVksS0FDdkNQLEdBOU15QixFQStNekJOLEVBQVlULE1BQU1lLE1BQVEsR0FBR0EsS0FDekJBLEdBQVMsTUFDWk4sRUFBWVQsTUFBTWUsTUFBUSxJQUMxQkgsY0FBY1MsR0FFZDdFLEVBQXFCK0UsT0FBT0wsS0FuTlgsS0F1Tm5CMUUsRUFBcUJnRixJQUFJTixFQUFVRyxJQUc5QkksRUFBbUIsQ0FBQ25DLEVBQVFELEtBQ1BBLEVBQVVHLGNBQ25DLG9DQUdpQnRELGlCQUFpQixRQUFVd0YsSUFDNUMsR0FBSUEsRUFBRUMsT0FBT0MsUUFBUSxxQkFBc0IsQ0FDMUMsR0FBSUYsRUFBRUMsT0FBTzdCLFVBQVUrQixTQUFTLFVBQVcsT0FFM0NqQixjQUFjbEUsR0FFZCxNQUFNOEQsRUFBYWtCLEVBQUVDLE9BQ2ZHLEVBQVVDLFNBQVN2QixFQUFXd0IsUUFBUW5DLEtBRTVDakQsRUFBUWtGLEVBQ1IxQyxFQUFxQkMsRUFBV0MsR0FFaEM1QyxFQUFvQjRFLFlBQVksS0FDL0JsQyxFQUFxQkMsRUFBV0MsSUFDOUIzQyxFQUNKLEtBSUkwRCxFQUF3QmhCLElBQ1pBLEVBQVVLLGlCQUFpQix5QkFFbkNFLFFBQVNxQyxJQUNqQixNQUNNQyxFQURXRCxFQUFLbkMsVUFBVStCLFNBQVMsa0JBQ2IsR0FBSyxFQUVqQ00sRUFBa0JGLEVBQU1DLEVBRFEsSUFBYkEsRUFBaUIsVUFBWSxhQUk1Q0MsRUFBb0IsQ0FBQ0YsRUFBTUMsRUFBVUUsS0FDMUMsTUFBTUMsRUFBYUosRUFBS3pDLGNBQWMsNkJBQ2hDOEMsRUFBYUwsRUFBS3pDLGNBQWMsOEJBRXRDNkMsRUFBV0UsYUFBYSxXQUFZTCxHQUNwQ0ksRUFBV0MsYUFBYSxXQUFZTCxHQUNwQ0csRUFBV3JDLE1BQU1vQyxXQUFhQSxFQUM5QkUsRUFBV3RDLE1BQU1vQyxXQUFhQSxHQUcvQixJQUFJSSxFQUNBQyxFQUNBQyxFQUNBQyxFQUVKLE1BV01DLEVBQWMsQ0FBQ3ZELEVBQVdDLEtBQy9CLE1BR011RCxFQUFxQi9ELEtBQUtnRSxJQUFJTixFQUFTQyxHQUN2Q00sRUFBbUJqRSxLQUFLZ0UsSUFBSUosRUFBU0MsR0FHMUNFLEVBUHdCLElBUXhCRSxFQVBzQixLQVduQk4sRUFBT0QsRUFaYyxJQWF4QjVGLEdBQVNBLEVBQVEsRUFBSTBDLEVBQU9jLFFBQVVkLEVBQU9jLE9BQzdDaEIsRUFBcUJDLEVBQVdDLElBQ3RCa0QsRUFBU0MsRUFmSyxJQWdCeEJyRCxFQUFxQkMsRUFBV0MsR0FHakNzQixjQUFjbEUsR0FDZEEsRUFBb0I0RSxZQUFZLEtBQy9CbEMsRUFBcUJDLEVBQVdDLElBQzlCM0MsS0FHRXFHLEVBQXdCLENBQUMzRCxFQUFXQyxLQUN6QyxNQUFNQyxFQUFjRixFQUFVRyxjQUFjLHdCQUU1Q0QsRUFBWXJELGlCQUFpQixhQUFld0YsSUF4Q2YsQ0FBQ0EsSUFDOUJjLEVBQVNkLEVBQUV1QixRQUFRLEdBQUdDLFFBQ3RCUixFQUFTaEIsRUFBRXVCLFFBQVEsR0FBR0UsU0F1Q3JCQyxDQUFzQjFCLEtBR3ZCbkMsRUFBWXJELGlCQUFpQixXQUFhd0YsSUF2Q2YsRUFBQ0EsRUFBR3JDLEVBQVdDLEtBQzFDbUQsRUFBT2YsRUFBRTJCLGVBQWUsR0FBR0gsUUFDM0JQLEVBQU9qQixFQUFFMkIsZUFBZSxHQUFHRixRQUMzQlAsRUFBWXZELEVBQVdDLElBcUN0QmdFLENBQW9CNUIsRUFBR3JDLEVBQVdDLE1BSTlCaUUsRUFBMkIsQ0FBQ0MsRUFBUTVHLEtBQ3pDNEcsRUFBT3hCLFFBQVFwRixNQUFRQSxHQXVCbEI2RyxFQUFjRCxJQUNuQixNQUFNRSxFQVZjLE1BQ3BCLElBQUlBLEVBQVksRUFLaEIsT0FISUMsT0FBT0MsV0FBYSxLQUFPRCxPQUFPQyxXQUFhLE1BQUtGLEVBQVksR0FDaEVDLE9BQU9DLFlBQWMsS0FBT0QsT0FBT0MsV0FBYSxPQUFNRixFQUFZLEdBRS9EQSxHQUlXRyxHQUNsQixJQUFJQyxFQUFnQk4sRUFBT3hCLFFBQVFwRixNQUNuQyxNQUFNbUgsRUFBa0JQLEVBQU9oRSxjQUM5QixrQ0FHS3dFLEVBQVNSLEVBQU9oRSxjQUFjLCtCQUNwQyxJQUFLd0UsRUFBUSxPQUViLE1BQU1DLEVBQWNELEVBQU9FLFlBQzNCSCxFQUFnQi9ELE1BQU1DLFVBQVksZUFDaEM2RCxFQUFnQkcsRUFBY1AsUUFJM0JTLEVBQWdCLENBQUNYLEVBQVE1RyxLQUM5QixJQUFJd0gsRUFBeUIsSUFBVnhILEVBQWNtRixTQUFTeUIsRUFBT3hCLFFBQVFwRixPQUFTLEVBRzlEd0gsR0F4Q3FCLE1BQ3pCLElBQUlDLEVBT0osT0FMSVYsT0FBT0MsV0FBYSxNQUFLUyxFQUFXLEdBQ3BDVixPQUFPQyxZQUFjLEtBQU9ELE9BQU9DLFdBQWEsTUFBS1MsRUFBVyxJQUNoRVYsT0FBT0MsWUFBYyxLQUFPRCxPQUFPQyxXQUFhLE9BQU1TLEVBQVcsR0FDakVWLE9BQU9DLFlBQWMsT0FBTVMsRUFBVyxHQUVuQ0EsR0E4QlVDLEtBSWpCRixJQUNBYixFQUF5QkMsRUFBUVksR0FDakNYLEVBQVdELEtBYU5lLEVBQXdCbEYsSUFDYkEsRUFBVUssaUJBQWlCLDJCQUVuQ0UsUUFBUzRELEdBQ2hCQSxFQUFPdEgsaUJBQWlCLFFBQVV3RixJQUc3QkEsRUFBRUMsT0FBT0MsUUFBUSxvQ0FDcEJ1QyxFQUFjWCxFQUhXLEdBSWY5QixFQUFFQyxPQUFPQyxRQUFRLHFDQW5CVCxFQUFDNEIsRUFBUTVHLEtBQzlCLElBQUl3SCxFQUF5QixJQUFWeEgsRUFBY21GLFNBQVN5QixFQUFPeEIsUUFBUXBGLE9BQVMsRUFFOUR3SCxHQUFnQixJQUVwQkEsSUFDQWIsRUFBeUJDLEVBQVFZLEdBQ2pDWCxFQUFXRCxLQWFSZ0IsQ0FBY2hCLEVBTFcsT0FXN0IsSUFBSWlCLEVBQVlkLE9BQU9DLFdBQ3ZCRCxPQUFPekgsaUJBQWlCLFNBQVUsS0FDakMsR0FBSXlILE9BQU9DLGFBQWVhLEVBQVcsT0FDckNBLEVBQVlkLE9BQU9DLFdBRUEzSCxTQUFTeUQsaUJBQWlCLDJCQUNsQ0UsUUFBUzRELElBQ25CLE1BQU1PLEVBQWtCUCxFQUFPaEUsY0FDOUIsa0NBRUQrRCxFQUF5QkMsRUFBUSxHQUNqQ08sRUFBZ0IvRCxNQUFNQyxVQUFZLG9CQUdwQzBELE9BQU96SCxpQkFBaUIsU0FBVSxLQUNqQzBFLGNBQWNsRSxHQUNkRixFQUFxQm9ELFFBQVNlLEdBQWFDLGNBQWNELElBQ3pEbkUsRUFBcUJxRSxVQXhZS3hELFdBQzFCLE1BQU1xSCxFQUFXakosVUFDWHlDLEVBQWV3RyxHQUFVeEcsYUFDekJTLEVBQWtCK0YsR0FBVUMsa0JBQzVCQyxFQUFhRixHQUFVRyxTQUV2QnhGLEVBQVlwRCxTQUFTdUQsY0FBYyxjQUV6QyxHQUFLa0YsR0FBYUUsRUFBbEIsQ0FLQXZGLEVBQVV5RixRQUFRcEosaUJBQWlCd0MsSUFDbkNtQixFQUFVMEYsT0FBT2xKLGlCQUVqQixJQUNDLE1BQU15RCxRQUFlWixFQUNwQkwsRUFDQU0sR0FHRGhELHNCQUFzQjJELEVBQVFwQixFQUFjbUIsR0FDNUNELEVBQXFCQyxFQUFXQyxHQUVoQzVDLEVBQW9CNEUsWUFDbkIsSUFBTWxDLEVBQXFCQyxFQUFXQyxHQUN0QzNDLEdBR0Q4RSxFQUFpQm5DLEVBQVFELEdBQ3pCMkQsRUFBc0IzRCxFQUFXQyxHQUVqQyxNQUFNMEYsUUFBYzVILEVBQ25CdUIsRUE5Q3lCLHdEQUNELDJEQUNLLHlHQWdEN0I1QixHQUdLa0ksRUFBT2hKLFNBQVN1RCxjQUFjLFFBRS9CeUYsR0FDSnJKLGVBQWVzQyxFQUFhQyxXQUFXQyxpQkFBa0IsV0FHMUQ2RyxFQUFLRixPQUNKaEosaUJBQ0NpSixFQUNBOUcsRUFDQSxFQUNBQSxFQUFhZ0gsY0FBY0MsYUFBYUMsVUFFekNySixpQkFDQ2lKLEVBQ0E5RyxFQUNBLEVBQ0FBLEVBQWFnSCxjQUFjQyxhQUFhRSxVQUV6Q3RKLGlCQUNDaUosRUFDQTlHLEVBQ0EsRUFDQUEsRUFBYWdILGNBQWNDLGFBQWFHLGdCQUV6Q3ZKLGlCQUNDaUosRUFDQTlHLEVBQ0EsRUFDQUEsRUFBYWdILGNBQWNDLGFBQWFJLGNBRzFDaEIsRUFBcUJsRixHQUNyQkEsRUFBVTBGLE9BQU8vSSxhQUFha0MsR0FDL0IsQ0FBRSxNQUNEdEMsZUFBZXNDLEVBQWFDLFdBQVdDLGlCQUFrQixVQUMxRCxDQUFFLFFBQ0R0QyxlQUNELENBcEVBLE1BRkM2SCxPQUFPNkIsU0FBU0MsS0FBTyxLQWlZekJDLEVBQ0QiLCJpZ25vcmVMaXN0IjpbXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuXHRnZXREYXRhLFxyXG5cdGNyZWF0ZUJyb3dzZVBhZ2UsXHJcblx0Y3JlYXRlTWFpbkhlcm9TZWN0aW9uLFxyXG5cdHNob3dFcnJvclBvcHVwLFxyXG5cdHNob3dCaWdMb2FkZXIsXHJcblx0aGlkZUJpZ0xvYWRlcixcclxuXHRjcmVhdGVGaWxtU2xpZGVyLFxyXG5cdGNyZWF0ZUZvb3RlcixcclxufSBmcm9tIFwiLi9jb21wb25lbnRzLm1pbi5qc1wiO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcblx0Y29uc3QgQ0FST1VTRUxMX0xFTkdUSCA9IDU7XHJcblx0Y29uc3QgRklMTV9BTU9VTlRfUEVSX1BBR0UgPSAyMDtcclxuXHRjb25zdCBQQUdFX1RPX1NIT1dfT05fU01BTExfQ0FST1VTRUxTID0gMTtcclxuXHRjb25zdCBvcHRpb25zID0ge1xyXG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHRhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG5cdFx0XHRBdXRob3JpemF0aW9uOlxyXG5cdFx0XHRcdFwiQmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUo5LmV5SmhkV1FpT2lJek5UWXdaak00TWpVM05EUTFaR0UxWkdaa1lUWXhZekUwWVdNNFltTTRNeUlzSW01aVppSTZNVGMxT1RjMk5UQXpPQzQ1TkN3aWMzVmlJam9pTmpobE0yVXlNbVV5TmpZNU56WTRNemhsWXpJM056STVJaXdpYzJOdmNHVnpJanBiSW1Gd2FWOXlaV0ZrSWwwc0luWmxjbk5wYjI0aU9qRjkubnVHZkVqY2xKTGVwbXp6SGkyb21OaHAyOVRIZ3JKZjlOdjZENF9nVGR4QVwiLFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cdGNvbnN0IHByb2dyZXNzQmFySW50ZXJ2YWxzID0gbmV3IE1hcCgpO1xyXG5cdGxldCBjYXJvdXNlbGxTcGVlZCA9IDEwMDAwO1xyXG5cdGxldCBjYXJvdXNlbGxTdHJva2VSYW5nZSA9IDI7XHJcblx0bGV0IGludGVydmFsU3BlZWQgPSAoY2Fyb3VzZWxsU3BlZWQgKiBjYXJvdXNlbGxTdHJva2VSYW5nZSkgLyAxMDA7XHJcblx0bGV0IGNhcm91c2VsbFdpZHRoID0gMTAwO1xyXG5cdGxldCBpbmRleCA9IDA7XHJcblx0bGV0IGNhcm91c2VsbEludGVydmFsO1xyXG5cclxuXHRjb25zdCBQT1BVTEFSX0ZJTE1TX1VSTCA9IGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3BvcHVsYXI/bGFuZ3VhZ2U9YDtcclxuXHRjb25zdCBIT1RfUkFURURfRklMTVNfVVJMID0gYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvbW92aWUvdXBjb21pbmc/bGFuZ3VhZ2U9YDtcclxuXHRjb25zdCBUUkVORElOR19GSUxNU19VUkwgPSBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy90cmVuZGluZy9hbGwvd2Vlaz9sYW5ndWFnZT1gO1xyXG5cdGNvbnN0IFRPUF9SQVRFRF9UVl9TRVJJRVNfVVJMID0gYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvZGlzY292ZXIvdHY/d2l0aF9vcmlnaW5fY291bnRyeT1VU3xHQiZsYW5ndWFnZT0mc29ydF9ieT1wb3B1bGFyaXR5LmRlc2NcclxuYDtcclxuXHRjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcblx0Y29uc3QgVVBDT01JTkdfRklMTVMgPSBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9kaXNjb3Zlci9tb3ZpZT9wcmltYXJ5X3JlbGVhc2VfeWVhcj0yMDI1JnByaW1hcnlfcmVsZWFzZV9kYXRlLmd0ZT0ke2N1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCl9LSR7XHJcblx0XHRjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMVxyXG5cdH0tJHtjdXJyZW50RGF0ZS5nZXREYXRlKCl9JnNvcnRfYnk9cG9wdWxhcml0eS5kZXNjXHJcbmA7XHJcblxyXG5cdGNvbnN0IEZJTE1TX1BBR0VTX0FNT1VOVCA9IGAmcGFnZT1gO1xyXG5cclxuXHRjb25zdCBjaGVja0F1dGhvcml6YXRpb24gPSBhc3luYyAoKSA9PiB7XHJcblx0XHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHRcdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHVzZXJEYXRhPy50cmFuc2xhdGlvbnM7XHJcblx0XHRjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSB1c2VyRGF0YT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblx0XHRjb25zdCBpc0xvZ2dlZEluID0gdXNlckRhdGE/LmxvZ2dlZEluO1xyXG5cclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5cclxuXHRcdGlmICghdXNlckRhdGEgfHwgIWlzTG9nZ2VkSW4pIHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRhaW5lci5wcmVwZW5kKGNyZWF0ZUJyb3dzZVBhZ2UodHJhbnNsYXRpb25zKSk7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKHNob3dCaWdMb2FkZXIoKSk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgbW92aWVzID0gYXdhaXQgY2hvb3NlRmlsbXNUb0Nhcm91c2VsbChcclxuXHRcdFx0XHRsb2FkRmlsbXNUb0Nhcm91c2VsbCxcclxuXHRcdFx0XHRjdXJyZW50TGFuZ3VhZ2VcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNyZWF0ZU1haW5IZXJvU2VjdGlvbihtb3ZpZXMsIHRyYW5zbGF0aW9ucywgY29udGFpbmVyKTtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cclxuXHRcdFx0Y2Fyb3VzZWxsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcclxuXHRcdFx0XHQoKSA9PiBoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyksXHJcblx0XHRcdFx0Y2Fyb3VzZWxsU3BlZWRcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNoYW5nZUN1cnJlbnRJbWcobW92aWVzLCBjb250YWluZXIpO1xyXG5cdFx0XHRzZXRUb3VjaEV2ZW50TGlzdGVuZXIoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cclxuXHRcdFx0Y29uc3QgZmlsbXMgPSBhd2FpdCBnZXRBbGxGaWxtcyhcclxuXHRcdFx0XHRjdXJyZW50TGFuZ3VhZ2UsXHJcblx0XHRcdFx0SE9UX1JBVEVEX0ZJTE1TX1VSTCxcclxuXHRcdFx0XHRUUkVORElOR19GSUxNU19VUkwsXHJcblx0XHRcdFx0VE9QX1JBVEVEX1RWX1NFUklFU19VUkwsXHJcblx0XHRcdFx0VVBDT01JTkdfRklMTVNcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpblwiKTtcclxuXHJcblx0XHRcdGlmICghbWFpbikge1xyXG5cdFx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bWFpbi5hcHBlbmQoXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MSxcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy50cmVuZGluZ1xyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MCxcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy51cGNvbWluZ1xyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MixcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy50b3BSYXRlZFNlcmllc1xyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MyxcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy5mdXR1cmVGaWxtc1xyXG5cdFx0XHRcdClcclxuXHRcdFx0KTtcclxuXHRcdFx0cHJlcGFyZUNhcm91c2VsSXRlbXMoY29udGFpbmVyKTtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZChjcmVhdGVGb290ZXIodHJhbnNsYXRpb25zKSk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0c2hvd0Vycm9yUG9wdXAodHJhbnNsYXRpb25zLmJyb3dzZVBhZ2UubG9hZGluZ0RhdGFFcnJvciwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0aGlkZUJpZ0xvYWRlcigpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGdldEFsbEZpbG1zID0gYXN5bmMgKGxhbmcsIC4uLnVybHMpID0+IHtcclxuXHRcdGNvbnN0IGZpbG1zQXJyID0gW107XHJcblx0XHRmb3IgYXdhaXQgKGNvbnN0IHVybCBvZiB1cmxzKSB7XHJcblx0XHRcdGNvbnN0IFVSTCA9XHJcblx0XHRcdFx0dXJsICsgbGFuZyArIEZJTE1TX1BBR0VTX0FNT1VOVCArIFBBR0VfVE9fU0hPV19PTl9TTUFMTF9DQVJPVVNFTFM7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVVJMLCBvcHRpb25zKTtcclxuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcblx0XHRcdGZpbG1zQXJyLnB1c2goZGF0YSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZpbG1zQXJyO1xyXG5cdH07XHJcblx0Y29uc3QgZ2V0RmlsbXMgPSBhc3luYyAobGFuZywgcGFnZU51bSwgdXJsKSA9PiB7XHJcblx0XHRjb25zdCBVUkwgPSB1cmwgKyBsYW5nICsgRklMTVNfUEFHRVNfQU1PVU5UICsgcGFnZU51bTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFVSTCwgb3B0aW9ucyk7XHJcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cCh0cmFuc2xhdGlvbnMuYnJvd3NlUGFnZS5sb2FkaW5nRGF0YUVycm9yLCBcIiNkYzRhMzRcIik7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgbG9hZEZpbG1zVG9DYXJvdXNlbGwgPSBhc3luYyAobGFuZywgcGFnZU51bSkgPT4ge1xyXG5cdFx0Y29uc3QgcmVxdWVzdHMgPSBbXTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8PSBwYWdlTnVtOyBpKyspIHtcclxuXHRcdFx0cmVxdWVzdHMucHVzaChnZXRGaWxtcyhsYW5nLCBpLCBQT1BVTEFSX0ZJTE1TX1VSTCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKHJlcXVlc3RzKTtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlcztcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cCh0cmFuc2xhdGlvbnMuYnJvd3NlUGFnZS5sb2FkaW5nRGF0YUVycm9yLCBcIiNkYzRhMzRcIik7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgY2hvb3NlRmlsbXNUb0Nhcm91c2VsbCA9IGFzeW5jIChkYXRhLCBjdXJyZW50TGFuZ3VhZ2UpID0+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHBhZ2VzRGF0YSA9IGF3YWl0IGRhdGEoY3VycmVudExhbmd1YWdlLCBDQVJPVVNFTExfTEVOR1RIKTtcclxuXHRcdFx0Y29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpICogRklMTV9BTU9VTlRfUEVSX1BBR0UpO1xyXG5cdFx0XHRjb25zdCBjaG9vc2VuTW92aWVzID0gcGFnZXNEYXRhLm1hcCgocGFnZSkgPT4gcGFnZS5yZXN1bHRzW3JhbmRvbU51bWJlcl0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIGNob29zZW5Nb3ZpZXM7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0c2hvd0Vycm9yUG9wdXAodHJhbnNsYXRpb25zLmJyb3dzZVBhZ2UubG9hZGluZ0RhdGFFcnJvciwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0aGlkZUJpZ0xvYWRlcigpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIENBUk9VU0VMTFxyXG5cclxuXHRjb25zdCBoYW5kbGVGaWxtc0Nhcm91c2VsbCA9IChjb250YWluZXIsIG1vdmllcykgPT4ge1xyXG5cdFx0Y29uc3QgaW1hZ2VTbGlkZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9faW1hZ2VzXCIpO1xyXG5cdFx0Y29uc3QgYWxsSW1hZ2VzID0gaW1hZ2VTbGlkZXIucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2UtbWFpbl9faW1nLWJveFwiKTtcclxuXHRcdGNvbnN0IGNhcm91c2VsbENvbnRyb2xzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFwiLmJyb3dzZS1tYWluX19jYXJvdXNlbGwtY29udHJvbHNcIlxyXG5cdFx0KTtcclxuXHRcdGFsbEltYWdlcy5mb3JFYWNoKChpbWcpID0+IGltZy5jbGFzc0xpc3QucmVtb3ZlKFwiY3VycmVudFZpc2libGVcIikpO1xyXG5cclxuXHRcdGltYWdlU2xpZGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7LWluZGV4ICogY2Fyb3VzZWxsV2lkdGh9JSlgO1xyXG5cdFx0aGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZShpbmRleCwgY2Fyb3VzZWxsQ29udHJvbHMpO1xyXG5cdFx0YWxsSW1hZ2VzW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwiY3VycmVudFZpc2libGVcIik7XHJcblxyXG5cdFx0aW5kZXgrKztcclxuXHJcblx0XHRpZiAoaW5kZXggPiBtb3ZpZXMubGVuZ3RoIC0gMSkgaW5kZXggPSAwO1xyXG5cclxuXHRcdGhhbmRsZUJ0bnNWaXNpYmlsaXR5KGNvbnRhaW5lcik7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgaGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZSA9IChpbmRleCwgY2Fyb3VzZWxsQ29udHJvbHNCb3gpID0+IHtcclxuXHRcdGNvbnN0IGFsbENvbnRyb2xCdG5zID1cclxuXHRcdFx0Y2Fyb3VzZWxsQ29udHJvbHNCb3gucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2UtbWFpbl9fYnRuXCIpO1xyXG5cdFx0Y29uc3QgY3VycmVudEJ0biA9IGNhcm91c2VsbENvbnRyb2xzQm94LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdGAuYnJvd3NlLW1haW5fX2J0bltkYXRhLWltZz1cIiR7aW5kZXh9XCJdYFxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IHByb2dyZXNzQmFyID0gY3VycmVudEJ0bi5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19wcm9ncmVzcy1iYXJcIik7XHJcblx0XHRjb25zdCBhbGxQcm9ncmVzc0JhcnMgPSBjYXJvdXNlbGxDb250cm9sc0JveC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFx0XHRcIi5icm93c2UtbWFpbl9fcHJvZ3Jlc3MtYmFyXCJcclxuXHRcdCk7XHJcblxyXG5cdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuZm9yRWFjaCgoaW50ZXJ2YWwpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpKTtcclxuXHRcdHByb2dyZXNzQmFySW50ZXJ2YWxzLmNsZWFyKCk7XHJcblxyXG5cdFx0YWxsUHJvZ3Jlc3NCYXJzLmZvckVhY2goKGJhcikgPT4gKGJhci5zdHlsZS53aWR0aCA9IFwiMFwiKSk7XHJcblxyXG5cdFx0Y2hhbmdlUHJvZ3Jlc3NCYXIocHJvZ3Jlc3NCYXIsIGluZGV4KTtcclxuXHJcblx0XHRhbGxDb250cm9sQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpKTtcclxuXHRcdGN1cnJlbnRCdG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBjaGFuZ2VQcm9ncmVzc0JhciA9IChwcm9ncmVzc0JhciwgYnRuSW5kZXgpID0+IHtcclxuXHRcdGlmIChwcm9ncmVzc0JhckludGVydmFscy5oYXMoYnRuSW5kZXgpKSB7XHJcblx0XHRcdGNsZWFySW50ZXJ2YWwocHJvZ3Jlc3NCYXJJbnRlcnZhbHMuZ2V0KGJ0bkluZGV4KSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHdpZHRoID0gMDtcclxuXHRcdGNvbnN0IHByb2dyZXNzQmFySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHdpZHRoICs9IGNhcm91c2VsbFN0cm9rZVJhbmdlO1xyXG5cdFx0XHRwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IGAke3dpZHRofSVgO1xyXG5cdFx0XHRpZiAod2lkdGggPj0gMTAwKSB7XHJcblx0XHRcdFx0cHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBcIjBcIjtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKHByb2dyZXNzQmFySW50ZXJ2YWwpO1xyXG5cclxuXHRcdFx0XHRwcm9ncmVzc0JhckludGVydmFscy5kZWxldGUoYnRuSW5kZXgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBpbnRlcnZhbFNwZWVkKTtcclxuXHJcblx0XHRwcm9ncmVzc0JhckludGVydmFscy5zZXQoYnRuSW5kZXgsIHByb2dyZXNzQmFySW50ZXJ2YWwpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNoYW5nZUN1cnJlbnRJbWcgPSAobW92aWVzLCBjb250YWluZXIpID0+IHtcclxuXHRcdGNvbnN0IGNhcm91c2VsbENvbnRyb2xzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFwiLmJyb3dzZS1tYWluX19jYXJvdXNlbGwtY29udHJvbHNcIlxyXG5cdFx0KTtcclxuXHJcblx0XHRjYXJvdXNlbGxDb250cm9scy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdFx0aWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCIuYnJvd3NlLW1haW5fX2J0blwiKSkge1xyXG5cdFx0XHRcdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHJldHVybjtcclxuXHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbChjYXJvdXNlbGxJbnRlcnZhbCk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRCdG4gPSBlLnRhcmdldDtcclxuXHRcdFx0XHRjb25zdCBpbWdEYXRhID0gcGFyc2VJbnQoY3VycmVudEJ0bi5kYXRhc2V0LmltZyk7XHJcblxyXG5cdFx0XHRcdGluZGV4ID0gaW1nRGF0YTtcclxuXHRcdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblxyXG5cdFx0XHRcdGNhcm91c2VsbEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0XHRcdH0sIGNhcm91c2VsbFNwZWVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgaGFuZGxlQnRuc1Zpc2liaWxpdHkgPSAoY29udGFpbmVyKSA9PiB7XHJcblx0XHRjb25zdCBhbGxGaWxtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLmJyb3dzZS1tYWluX19pbWctYm94XCIpO1xyXG5cclxuXHRcdGFsbEZpbG1zLmZvckVhY2goKGZpbG0pID0+IHtcclxuXHRcdFx0Y29uc3QgaXNBY3RpdmUgPSBmaWxtLmNsYXNzTGlzdC5jb250YWlucyhcImN1cnJlbnRWaXNpYmxlXCIpO1xyXG5cdFx0XHRjb25zdCB0YWJpbmRleCA9IGlzQWN0aXZlID8gMCA6IC0xO1xyXG5cdFx0XHRjb25zdCB2aXNpYmlsaXR5ID0gdGFiaW5kZXggPT09IDAgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCI7XHJcblx0XHRcdGdpdmVCdG5zQXR0cmlidXRlKGZpbG0sIHRhYmluZGV4LCB2aXNpYmlsaXR5KTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblx0Y29uc3QgZ2l2ZUJ0bnNBdHRyaWJ1dGUgPSAoZmlsbSwgdGFiaW5kZXgsIHZpc2liaWxpdHkpID0+IHtcclxuXHRcdGNvbnN0IHRyYWlsZXJCdG4gPSBmaWxtLnF1ZXJ5U2VsZWN0b3IoXCIuYnJvd3NlLW1haW5fX3RyYWlsZXItYnRuXCIpO1xyXG5cdFx0Y29uc3Qgc2VlTW9yZUJ0biA9IGZpbG0ucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9fc2VlLW1vcmUtYnRuXCIpO1xyXG5cclxuXHRcdHRyYWlsZXJCdG4uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgdGFiaW5kZXgpO1xyXG5cdFx0c2VlTW9yZUJ0bi5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCB0YWJpbmRleCk7XHJcblx0XHR0cmFpbGVyQnRuLnN0eWxlLnZpc2liaWxpdHkgPSB2aXNpYmlsaXR5O1xyXG5cdFx0c2VlTW9yZUJ0bi5zdHlsZS52aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcclxuXHR9O1xyXG5cclxuXHRsZXQgc3RhcnRYO1xyXG5cdGxldCBlbmRYO1xyXG5cdGxldCBzdGFydFk7XHJcblx0bGV0IGVuZFk7XHJcblxyXG5cdGNvbnN0IGhhbmRsZVRvdWNoU3RhcnRFdmVudCA9IChlKSA9PiB7XHJcblx0XHRzdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcclxuXHRcdHN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZVRvdWNoRW5kRXZlbnQgPSAoZSwgY29udGFpbmVyLCBtb3ZpZXMpID0+IHtcclxuXHRcdGVuZFggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XHJcblx0XHRlbmRZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xyXG5cdFx0aGFuZGxlU3dpcGUoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZVN3aXBlID0gKGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRjb25zdCBIT1JJWk9OVEFMX1JBTkdFID0gMzA7XHJcblx0XHRjb25zdCBWRVJUSUNBTF9SQU5HRSA9IDMwO1xyXG5cclxuXHRcdGNvbnN0IGhvcml6b250YWxEaXN0YW5jZSA9IE1hdGguYWJzKHN0YXJ0WCAtIGVuZFgpO1xyXG5cdFx0Y29uc3QgdmVydGljYWxEaXN0YW5jZSA9IE1hdGguYWJzKHN0YXJ0WSAtIGVuZFkpO1xyXG5cclxuXHRcdGlmIChcclxuXHRcdFx0aG9yaXpvbnRhbERpc3RhbmNlIDwgSE9SSVpPTlRBTF9SQU5HRSB8fFxyXG5cdFx0XHR2ZXJ0aWNhbERpc3RhbmNlID4gVkVSVElDQUxfUkFOR0VcclxuXHRcdCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoZW5kWCAtIHN0YXJ0WCA+IEhPUklaT05UQUxfUkFOR0UpIHtcclxuXHRcdFx0aW5kZXggPSAoaW5kZXggLSAyICsgbW92aWVzLmxlbmd0aCkgJSBtb3ZpZXMubGVuZ3RoO1xyXG5cdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblx0XHR9IGVsc2UgaWYgKHN0YXJ0WCAtIGVuZFggPiBIT1JJWk9OVEFMX1JBTkdFKSB7XHJcblx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdH1cclxuXHJcblx0XHRjbGVhckludGVydmFsKGNhcm91c2VsbEludGVydmFsKTtcclxuXHRcdGNhcm91c2VsbEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblx0XHR9LCBjYXJvdXNlbGxTcGVlZCk7XHJcblx0fTtcclxuXHJcblx0Y29uc3Qgc2V0VG91Y2hFdmVudExpc3RlbmVyID0gKGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRjb25zdCBpbWFnZVNsaWRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19pbWFnZXNcIik7XHJcblxyXG5cdFx0aW1hZ2VTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGUpID0+IHtcclxuXHRcdFx0aGFuZGxlVG91Y2hTdGFydEV2ZW50KGUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aW1hZ2VTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIChlKSA9PiB7XHJcblx0XHRcdGhhbmRsZVRvdWNoRW5kRXZlbnQoZSwgY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0fSk7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgY2hhbmdlQ2Fyb3VzZWxsRGF0YUluZGV4ID0gKHNsaWRlciwgaW5kZXgpID0+IHtcclxuXHRcdHNsaWRlci5kYXRhc2V0LmluZGV4ID0gaW5kZXg7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgZ2V0Q2Fyb3VzZWxDb25maWcgPSAoKSA9PiB7XHJcblx0XHRsZXQgbWF4SW5kZXg7XHJcblxyXG5cdFx0aWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgNTc2KSBtYXhJbmRleCA9IDk7XHJcblx0XHRpZiAod2luZG93LmlubmVyV2lkdGggPj0gNTc2ICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgOTkyKSBtYXhJbmRleCA9IDE3O1xyXG5cdFx0aWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDk5MiAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8IDEyMDApIG1heEluZGV4ID0gNDtcclxuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMjAwKSBtYXhJbmRleCA9IDc7XHJcblxyXG5cdFx0cmV0dXJuIG1heEluZGV4O1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IHNldFRocmVzaG9sZCA9ICgpID0+IHtcclxuXHRcdGxldCB0aHJlc2hvbGQgPSAyO1xyXG5cclxuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDU3NiAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8IDk5MikgdGhyZXNob2xkID0gMTtcclxuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA5OTIgJiYgd2luZG93LmlubmVyV2lkdGggPCAxMjAwKSB0aHJlc2hvbGQgPSA0O1xyXG5cclxuXHRcdHJldHVybiB0aHJlc2hvbGQ7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgbW92ZVNsaWRlciA9IChzbGlkZXIpID0+IHtcclxuXHRcdGNvbnN0IHRocmVzaG9sZCA9IHNldFRocmVzaG9sZCgpO1xyXG5cdFx0bGV0IHNsaWRlckRhdGFzZXQgPSBzbGlkZXIuZGF0YXNldC5pbmRleDtcclxuXHRcdGNvbnN0IHNsaWRlckNhcm91c2VsbCA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcIi5icm93c2Utc2VjdGlvbl9fc2xpZGVyLWltYWdlc1wiXHJcblx0XHQpO1xyXG5cclxuXHRcdGNvbnN0IHBvc3RlciA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1zZWN0aW9uX19zbGlkZXItYm94XCIpO1xyXG5cdFx0aWYgKCFwb3N0ZXIpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBwb3N0ZXJXaWR0aCA9IHBvc3Rlci5vZmZzZXRXaWR0aDtcclxuXHRcdHNsaWRlckNhcm91c2VsbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke1xyXG5cdFx0XHQtc2xpZGVyRGF0YXNldCAqIHBvc3RlcldpZHRoICogdGhyZXNob2xkXHJcblx0XHR9cHgpYDtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBzaG93TmV4dFNsaWRlID0gKHNsaWRlciwgaW5kZXgpID0+IHtcclxuXHRcdGxldCBpbml0aWFsSW5kZXggPSBpbmRleCA9PT0gMCA/IHBhcnNlSW50KHNsaWRlci5kYXRhc2V0LmluZGV4KSA6IDA7XHJcblx0XHRjb25zdCBtYXhJbmRleCA9IGdldENhcm91c2VsQ29uZmlnKCk7XHJcblxyXG5cdFx0aWYgKGluaXRpYWxJbmRleCA+PSBtYXhJbmRleCkgcmV0dXJuO1xyXG5cclxuXHRcdGluaXRpYWxJbmRleCsrO1xyXG5cdFx0Y2hhbmdlQ2Fyb3VzZWxsRGF0YUluZGV4KHNsaWRlciwgaW5pdGlhbEluZGV4KTtcclxuXHRcdG1vdmVTbGlkZXIoc2xpZGVyKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBzaG93UHJldlNsaWRlID0gKHNsaWRlciwgaW5kZXgpID0+IHtcclxuXHRcdGxldCBpbml0aWFsSW5kZXggPSBpbmRleCA9PT0gMCA/IHBhcnNlSW50KHNsaWRlci5kYXRhc2V0LmluZGV4KSA6IDA7XHJcblxyXG5cdFx0aWYgKGluaXRpYWxJbmRleCA8PSAwKSByZXR1cm47XHJcblxyXG5cdFx0aW5pdGlhbEluZGV4LS07XHJcblx0XHRjaGFuZ2VDYXJvdXNlbGxEYXRhSW5kZXgoc2xpZGVyLCBpbml0aWFsSW5kZXgpO1xyXG5cdFx0bW92ZVNsaWRlcihzbGlkZXIpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IHByZXBhcmVDYXJvdXNlbEl0ZW1zID0gKGNvbnRhaW5lcikgPT4ge1xyXG5cdFx0Y29uc3Qgc2xpZGVycyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLmJyb3dzZS1zZWN0aW9uX19zbGlkZXJcIik7XHJcblxyXG5cdFx0c2xpZGVycy5mb3JFYWNoKChzbGlkZXIpID0+XHJcblx0XHRcdHNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdFx0XHRsZXQgc21hbGxDYXJvdXNlbGxJbmRleCA9IDA7XHJcblxyXG5cdFx0XHRcdGlmIChlLnRhcmdldC5tYXRjaGVzKFwiLmJyb3dzZS1zZWN0aW9uX19zbGlkZXItbmV4dC1idG5cIikpIHtcclxuXHRcdFx0XHRcdHNob3dOZXh0U2xpZGUoc2xpZGVyLCBzbWFsbENhcm91c2VsbEluZGV4KTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCIuYnJvd3NlLXNlY3Rpb25fX3NsaWRlci1wcmV2LWJ0blwiKSkge1xyXG5cdFx0XHRcdFx0c2hvd1ByZXZTbGlkZShzbGlkZXIsIHNtYWxsQ2Fyb3VzZWxsSW5kZXgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0fTtcclxuXHJcblx0bGV0IGxhc3RXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHtcclxuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA9PT0gbGFzdFdpZHRoKSByZXR1cm47XHJcblx0XHRsYXN0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHJcblx0XHRjb25zdCBhbGxTbGlkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2Utc2VjdGlvbl9fc2xpZGVyXCIpO1xyXG5cdFx0YWxsU2xpZGVycy5mb3JFYWNoKChzbGlkZXIpID0+IHtcclxuXHRcdFx0Y29uc3Qgc2xpZGVyQ2Fyb3VzZWxsID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFx0XCIuYnJvd3NlLXNlY3Rpb25fX3NsaWRlci1pbWFnZXNcIlxyXG5cdFx0XHQpO1xyXG5cdFx0XHRjaGFuZ2VDYXJvdXNlbGxEYXRhSW5kZXgoc2xpZGVyLCAwKTtcclxuXHRcdFx0c2xpZGVyQ2Fyb3VzZWxsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgwKVwiO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIiwgKCkgPT4ge1xyXG5cdFx0Y2xlYXJJbnRlcnZhbChjYXJvdXNlbGxJbnRlcnZhbCk7XHJcblx0XHRwcm9ncmVzc0JhckludGVydmFscy5mb3JFYWNoKChpbnRlcnZhbCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCkpO1xyXG5cdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuY2xlYXIoKTtcclxuXHR9KTtcclxuXHRjaGVja0F1dGhvcml6YXRpb24oKTtcclxufSk7XHJcbiJdfQ==
