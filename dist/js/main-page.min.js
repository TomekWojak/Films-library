import{getData,createBrowsePage,createMainHeroSection,showErrorPopup,showBigLoader,hideBigLoader}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){const e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}},t=new Map;let r,a=1e4,o=0;const n=async(t,r)=>{const a=`https://api.themoviedb.org/3/movie/popular?language=${t}&page=${r}`;try{const t=await fetch(a,e);return await t.json()}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},s=async(e,t)=>{const r=[];for(let a=1;a<=t;a++)r.push(n(e,a));try{return await Promise.all(r)}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},c=async(e,t)=>{try{const r=await e(t,5),a=Math.trunc(20*Math.random());return r.map(e=>e.results[a])}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}},i=(e,t)=>{const r=e.querySelector(".browse-main__images"),a=r.querySelectorAll(".browse-main__img-box"),n=e.querySelector(".browse-main__carousell-controls");a.forEach(e=>e.classList.remove("currentVisible")),r.style.transform=`translateX(${100*-o}%)`,l(o,n),a[o].classList.add("currentVisible"),o++,o>t.length-1&&(o=0),u(e)},l=(e,r)=>{const a=r.querySelectorAll(".browse-main__btn"),o=r.querySelector(`.browse-main__btn[data-img="${e}"]`),n=o.querySelector(".browse-main__progress-bar"),s=r.querySelectorAll(".browse-main__progress-bar");t.forEach(e=>clearInterval(e)),t.clear(),s.forEach(e=>e.style.width="0"),d(n,e),a.forEach(e=>e.classList.remove("active")),o.classList.add("active")},d=(e,r)=>{t.has(r)&&clearInterval(t.get(r));let a=0;const o=setInterval(()=>{a+=2,e.style.width=`${a}%`,a>=100&&(e.style.width="0",clearInterval(o),t.delete(r))},200);t.set(r,o)},h=(e,t)=>{t.querySelector(".browse-main__carousell-controls").addEventListener("click",n=>{if(n.target.matches(".browse-main__btn")){if(n.target.classList.contains("active"))return;clearInterval(r);const s=n.target,c=parseInt(s.dataset.img);o=c,i(t,e),r=setInterval(()=>{i(t,e)},a)}})},u=e=>{e.querySelectorAll(".browse-main__img-box").forEach(e=>{const t=e.classList.contains("currentVisible");m(e,t?0:-1)})},m=(e,t)=>{const r=e.querySelector(".browse-main__trailer-btn"),a=e.querySelector(".browse-main__see-more-btn");r.setAttribute("tabindex",t),a.setAttribute("tabindex",t)};let g,w;const b=(e,t)=>{g-w>50?i(e,t):w-g>50&&(o=(o-2+t.length)%t.length,i(e,t)),clearInterval(r),r=setInterval(()=>{i(e,t)},a)},p=(e,t)=>{const r=e.querySelector(".browse-main__images");r.addEventListener("touchstart",e=>{(e=>{g=e.touches[0].clientX})(e)}),r.addEventListener("touchend",r=>{((e,t,r)=>{w=e.changedTouches[0].clientX,b(t,r)})(r,e,t)})};(()=>{const e=getData(),t=e?.translations,o=e?.preferredLanguage,n=e?.loggedIn,l=document.querySelector(".container");e&&n?(l.prepend(createBrowsePage(t)),l.append(showBigLoader()),c(s,o).then(e=>{createMainHeroSection(e,t,l),i(l,e),r=setInterval(()=>{i(l,e)},a),h(e,l),p(l,e)})):window.location.href="/"})()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLm1pbi5qcyIsIm5hbWVzIjpbImdldERhdGEiLCJjcmVhdGVCcm93c2VQYWdlIiwiY3JlYXRlTWFpbkhlcm9TZWN0aW9uIiwic2hvd0Vycm9yUG9wdXAiLCJzaG93QmlnTG9hZGVyIiwiaGlkZUJpZ0xvYWRlciIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwiYWNjZXB0IiwiQXV0aG9yaXphdGlvbiIsInByb2dyZXNzQmFySW50ZXJ2YWxzIiwiTWFwIiwiY2Fyb3VzZWxsSW50ZXJ2YWwiLCJjYXJvdXNlbGxTcGVlZCIsImluZGV4IiwiZ2V0UG9wdWxhckZpbG1zIiwiYXN5bmMiLCJsYW5nIiwicGFnZU51bSIsIlVSTCIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwidHJhbnNsYXRpb25zIiwiYnJvd3NlUGFnZSIsImxvYWRpbmdEYXRhRXJyb3IiLCJsb2FkRmlsbXNUb0Nhcm91c2VsbCIsInJlcXVlc3RzIiwiaSIsInB1c2giLCJQcm9taXNlIiwiYWxsIiwiY2hvb3NlRmlsbXNUb0Nhcm91c2VsbCIsImRhdGEiLCJjdXJyZW50TGFuZ3VhZ2UiLCJwYWdlc0RhdGEiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwidHJ1bmMiLCJyYW5kb20iLCJtYXAiLCJwYWdlIiwicmVzdWx0cyIsImhhbmRsZUZpbG1zQ2Fyb3VzZWxsIiwiY29udGFpbmVyIiwibW92aWVzIiwiaW1hZ2VTbGlkZXIiLCJxdWVyeVNlbGVjdG9yIiwiYWxsSW1hZ2VzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhcm91c2VsbENvbnRyb2xzIiwiZm9yRWFjaCIsImltZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZSIsImFkZCIsImxlbmd0aCIsImhhbmRsZUJ0bnNWaXNpYmlsaXR5IiwiY2Fyb3VzZWxsQ29udHJvbHNCb3giLCJhbGxDb250cm9sQnRucyIsImN1cnJlbnRCdG4iLCJwcm9ncmVzc0JhciIsImFsbFByb2dyZXNzQmFycyIsImludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyIiwiYmFyIiwid2lkdGgiLCJjaGFuZ2VQcm9ncmVzc0JhciIsImJ0biIsImJ0bkluZGV4IiwiaGFzIiwiZ2V0IiwicHJvZ3Jlc3NCYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZGVsZXRlIiwic2V0IiwiY2hhbmdlQ3VycmVudEltZyIsImUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJpbWdEYXRhIiwicGFyc2VJbnQiLCJkYXRhc2V0IiwiZmlsbSIsImlzQWN0aXZlIiwiZ2l2ZUJ0bnNBdHRyaWJ1dGUiLCJ0YWJpbmRleCIsInRyYWlsZXJCdG4iLCJzZWVNb3JlQnRuIiwic2V0QXR0cmlidXRlIiwic3RhcnRYIiwiZW5kWCIsImhhbmRsZVN3aXBlIiwic2V0VG91Y2hFdmVudExpc3RlbmVyIiwidG91Y2hlcyIsImNsaWVudFgiLCJoYW5kbGVUb3VjaFN0YXJ0RXZlbnQiLCJjaGFuZ2VkVG91Y2hlcyIsImhhbmRsZVRvdWNoRW5kRXZlbnQiLCJ1c2VyRGF0YSIsInByZWZlcnJlZExhbmd1YWdlIiwiaXNMb2dnZWRJbiIsImxvZ2dlZEluIiwicHJlcGVuZCIsImFwcGVuZCIsInRoZW4iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjaGVja0F1dGhvcml6YXRpb24iXSwic291cmNlcyI6WyJtYWluLXBhZ2UuanMiXSwibWFwcGluZ3MiOiJPQUNDQSxRQUNBQyxpQkFDQUMsc0JBQ0FDLGVBQ0FDLGNBQ0FDLGtCQUNNLHNCQUNQQyxTQUFTQyxpQkFBaUIsbUJBQW9CLFdBRTdDLE1BRU1DLEVBQVUsQ0FDZkMsT0FBUSxNQUNSQyxRQUFTLENBQ1JDLE9BQVEsbUJBQ1JDLGNBQ0MseVBBR0dDLEVBQXVCLElBQUlDLElBQ2pDLElBS0lDLEVBTEFDLEVBQWlCLElBSWpCQyxFQUFRLEVBR1osTUE4Qk1DLEVBQWtCQyxNQUFPQyxFQUFNQyxL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RWpCK0IsRUFBdUJOLEVBQXNCUSxHQUFpQjRFLEtBQzVEakUsSUFDQTlDLHNCQUFzQjhDLEVBQVF0QixFQUFjcUIsR0FDNUNELEVBQXFCQyxFQUFXQyxHQUVoQ2pDLEVBQW9CaUUsWUFBWSxLQUMvQmxDLEVBQXFCQyxFQUFXQyxJQUM5QmhDLEdBRUhtRSxFQUFpQm5DLEVBQVFELEdBQ3pCc0QsRUFBc0J0RCxFQUFXQyxNQWZuQ2tFLE9BQU9DLFNBQVNDLEtBQU8sS0E0TXpCQyxFQUNEIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcblx0Z2V0RGF0YSxcclxuXHRjcmVhdGVCcm93c2VQYWdlLFxyXG5cdGNyZWF0ZU1haW5IZXJvU2VjdGlvbixcclxuXHRzaG93RXJyb3JQb3B1cCxcclxuXHRzaG93QmlnTG9hZGVyLFxyXG5cdGhpZGVCaWdMb2FkZXIsXHJcbn0gZnJvbSBcIi4vY29tcG9uZW50cy5taW4uanNcIjtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG5cdC8vIGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvZGlzY292ZXIvbW92aWU/bGFuZ3VhZ2U9cGxcclxuXHRjb25zdCBDQVJPVVNFTExfTEVOR1RIID0gNTtcclxuXHRjb25zdCBGSUxNX0FNT1VOVF9QRVJfUEFHRSA9IDIwO1xyXG5cdGNvbnN0IG9wdGlvbnMgPSB7XHJcblx0XHRtZXRob2Q6IFwiR0VUXCIsXHJcblx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdGFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcblx0XHRcdEF1dGhvcml6YXRpb246XHJcblx0XHRcdFx0XCJCZWFyZXIgZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKaGRXUWlPaUl6TlRZd1pqTTRNalUzTkRRMVpHRTFaR1prWVRZeFl6RTBZV000WW1NNE15SXNJbTVpWmlJNk1UYzFPVGMyTlRBek9DNDVOQ3dpYzNWaUlqb2lOamhsTTJVeU1tVXlOalk1TnpZNE16aGxZekkzTnpJNUlpd2ljMk52Y0dWeklqcGJJbUZ3YVY5eVpXRmtJbDBzSW5abGNuTnBiMjRpT2pGOS5udUdmRWpjbEpMZXBtenpIaTJvbU5ocDI5VEhnckpmOU52NkQ0X2dUZHhBXCIsXHJcblx0XHR9LFxyXG5cdH07XHJcblx0Y29uc3QgcHJvZ3Jlc3NCYXJJbnRlcnZhbHMgPSBuZXcgTWFwKCk7XHJcblx0bGV0IGNhcm91c2VsbFNwZWVkID0gMTAwMDA7XHJcblx0bGV0IGNhcm91c2VsbFN0cm9rZVJhbmdlID0gMjtcclxuXHRsZXQgaW50ZXJ2YWxTcGVlZCA9IChjYXJvdXNlbGxTcGVlZCAqIGNhcm91c2VsbFN0cm9rZVJhbmdlKSAvIDEwMDtcclxuXHRsZXQgY2Fyb3VzZWxsV2lkdGggPSAxMDA7XHJcblx0bGV0IGluZGV4ID0gMDtcclxuXHRsZXQgY2Fyb3VzZWxsSW50ZXJ2YWw7XHJcblxyXG5cdGNvbnN0IGNoZWNrQXV0aG9yaXphdGlvbiA9ICgpID0+IHtcclxuXHRcdGNvbnN0IHVzZXJEYXRhID0gZ2V0RGF0YSgpO1xyXG5cdFx0Y29uc3QgdHJhbnNsYXRpb25zID0gdXNlckRhdGE/LnRyYW5zbGF0aW9ucztcclxuXHRcdGNvbnN0IGN1cnJlbnRMYW5ndWFnZSA9IHVzZXJEYXRhPy5wcmVmZXJyZWRMYW5ndWFnZTtcclxuXHRcdGNvbnN0IGlzTG9nZ2VkSW4gPSB1c2VyRGF0YT8ubG9nZ2VkSW47XHJcblxyXG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcblxyXG5cdFx0aWYgKCF1c2VyRGF0YSB8fCAhaXNMb2dnZWRJbikge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29udGFpbmVyLnByZXBlbmQoY3JlYXRlQnJvd3NlUGFnZSh0cmFuc2xhdGlvbnMpKTtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZChzaG93QmlnTG9hZGVyKCkpO1xyXG5cclxuXHRcdFx0Y2hvb3NlRmlsbXNUb0Nhcm91c2VsbChsb2FkRmlsbXNUb0Nhcm91c2VsbCwgY3VycmVudExhbmd1YWdlKS50aGVuKFxyXG5cdFx0XHRcdChtb3ZpZXMpID0+IHtcclxuXHRcdFx0XHRcdGNyZWF0ZU1haW5IZXJvU2VjdGlvbihtb3ZpZXMsIHRyYW5zbGF0aW9ucywgY29udGFpbmVyKTtcclxuXHRcdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHJcblx0XHRcdFx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0XHRcdFx0fSwgY2Fyb3VzZWxsU3BlZWQpO1xyXG5cclxuXHRcdFx0XHRcdGNoYW5nZUN1cnJlbnRJbWcobW92aWVzLCBjb250YWluZXIpO1xyXG5cdFx0XHRcdFx0c2V0VG91Y2hFdmVudExpc3RlbmVyKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgZ2V0UG9wdWxhckZpbG1zID0gYXN5bmMgKGxhbmcsIHBhZ2VOdW0pID0+IHtcclxuXHRcdGNvbnN0IFVSTCA9IGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3BvcHVsYXI/bGFuZ3VhZ2U9JHtsYW5nfSZwYWdlPSR7cGFnZU51bX1gO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVVJMLCBvcHRpb25zKTtcclxuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdGNvbnN0IGxvYWRGaWxtc1RvQ2Fyb3VzZWxsID0gYXN5bmMgKGxhbmcsIHBhZ2VOdW0pID0+IHtcclxuXHRcdGNvbnN0IHJlcXVlc3RzID0gW107XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gcGFnZU51bTsgaSsrKSB7XHJcblx0XHRcdHJlcXVlc3RzLnB1c2goZ2V0UG9wdWxhckZpbG1zKGxhbmcsIGkpKTtcclxuXHRcdH1cclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0cyk7XHJcblx0XHRcdHJldHVybiByZXNwb25zZXM7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0c2hvd0Vycm9yUG9wdXAodHJhbnNsYXRpb25zLmJyb3dzZVBhZ2UubG9hZGluZ0RhdGFFcnJvciwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNob29zZUZpbG1zVG9DYXJvdXNlbGwgPSBhc3luYyAoZGF0YSwgY3VycmVudExhbmd1YWdlKSA9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBwYWdlc0RhdGEgPSBhd2FpdCBkYXRhKGN1cnJlbnRMYW5ndWFnZSwgQ0FST1VTRUxMX0xFTkdUSCk7XHJcblx0XHRcdGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIEZJTE1fQU1PVU5UX1BFUl9QQUdFKTtcclxuXHRcdFx0Y29uc3QgY2hvb3Nlbk1vdmllcyA9IHBhZ2VzRGF0YS5tYXAoKHBhZ2UpID0+IHBhZ2UucmVzdWx0c1tyYW5kb21OdW1iZXJdKTtcclxuXHJcblx0XHRcdHJldHVybiBjaG9vc2VuTW92aWVzO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdGhpZGVCaWdMb2FkZXIoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBDQVJPVVNFTExcclxuXHJcblx0Y29uc3QgaGFuZGxlRmlsbXNDYXJvdXNlbGwgPSAoY29udGFpbmVyLCBtb3ZpZXMpID0+IHtcclxuXHRcdGNvbnN0IGltYWdlU2xpZGVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYnJvd3NlLW1haW5fX2ltYWdlc1wiKTtcclxuXHRcdGNvbnN0IGFsbEltYWdlcyA9IGltYWdlU2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnJvd3NlLW1haW5fX2ltZy1ib3hcIik7XHJcblx0XHRjb25zdCBjYXJvdXNlbGxDb250cm9scyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcIi5icm93c2UtbWFpbl9fY2Fyb3VzZWxsLWNvbnRyb2xzXCJcclxuXHRcdCk7XHJcblx0XHQvLyBPYnPFgnVnYSBvc3RhdG5pZWdvIGkgcGllcndzemVnbyBmaWxtdVxyXG5cdFx0YWxsSW1hZ2VzLmZvckVhY2goKGltZykgPT4gaW1nLmNsYXNzTGlzdC5yZW1vdmUoXCJjdXJyZW50VmlzaWJsZVwiKSk7XHJcblxyXG5cdFx0aW1hZ2VTbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstaW5kZXggKiBjYXJvdXNlbGxXaWR0aH0lKWA7XHJcblx0XHRoYW5kbGVDYXJvdXNlbGxDb250cm9sc1N0YXRlKGluZGV4LCBjYXJvdXNlbGxDb250cm9scyk7XHJcblx0XHRhbGxJbWFnZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50VmlzaWJsZVwiKTtcclxuXHJcblx0XHRpbmRleCsrO1xyXG5cclxuXHRcdGlmIChpbmRleCA+IG1vdmllcy5sZW5ndGggLSAxKSBpbmRleCA9IDA7XHJcblxyXG5cdFx0aGFuZGxlQnRuc1Zpc2liaWxpdHkoY29udGFpbmVyKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBoYW5kbGVDYXJvdXNlbGxDb250cm9sc1N0YXRlID0gKGluZGV4LCBjYXJvdXNlbGxDb250cm9sc0JveCkgPT4ge1xyXG5cdFx0Y29uc3QgYWxsQ29udHJvbEJ0bnMgPVxyXG5cdFx0XHRjYXJvdXNlbGxDb250cm9sc0JveC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJyb3dzZS1tYWluX19idG5cIik7XHJcblx0XHRjb25zdCBjdXJyZW50QnRuID0gY2Fyb3VzZWxsQ29udHJvbHNCb3gucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0YC5icm93c2UtbWFpbl9fYnRuW2RhdGEtaW1nPVwiJHtpbmRleH1cIl1gXHJcblx0XHQpO1xyXG5cdFx0Y29uc3QgcHJvZ3Jlc3NCYXIgPSBjdXJyZW50QnRuLnF1ZXJ5U2VsZWN0b3IoXCIuYnJvd3NlLW1haW5fX3Byb2dyZXNzLWJhclwiKTtcclxuXHRcdGNvbnN0IGFsbFByb2dyZXNzQmFycyA9IGNhcm91c2VsbENvbnRyb2xzQm94LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcblx0XHRcdFwiLmJyb3dzZS1tYWluX19wcm9ncmVzcy1iYXJcIlxyXG5cdFx0KTtcclxuXHJcblx0XHRwcm9ncmVzc0JhckludGVydmFscy5mb3JFYWNoKChpbnRlcnZhbCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCkpO1xyXG5cdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuY2xlYXIoKTtcclxuXHJcblx0XHRhbGxQcm9ncmVzc0JhcnMuZm9yRWFjaCgoYmFyKSA9PiAoYmFyLnN0eWxlLndpZHRoID0gXCIwXCIpKTtcclxuXHJcblx0XHRjaGFuZ2VQcm9ncmVzc0Jhcihwcm9ncmVzc0JhciwgaW5kZXgpO1xyXG5cclxuXHRcdGFsbENvbnRyb2xCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIikpO1xyXG5cdFx0Y3VycmVudEJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNoYW5nZVByb2dyZXNzQmFyID0gKHByb2dyZXNzQmFyLCBidG5JbmRleCkgPT4ge1xyXG5cdFx0aWYgKHByb2dyZXNzQmFySW50ZXJ2YWxzLmhhcyhidG5JbmRleCkpIHtcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbChwcm9ncmVzc0JhckludGVydmFscy5nZXQoYnRuSW5kZXgpKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgd2lkdGggPSAwO1xyXG5cdFx0Y29uc3QgcHJvZ3Jlc3NCYXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0d2lkdGggKz0gY2Fyb3VzZWxsU3Ryb2tlUmFuZ2U7XHJcblx0XHRcdHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9JWA7XHJcblx0XHRcdGlmICh3aWR0aCA+PSAxMDApIHtcclxuXHRcdFx0XHRwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IFwiMFwiO1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwocHJvZ3Jlc3NCYXJJbnRlcnZhbCk7XHJcblxyXG5cdFx0XHRcdHByb2dyZXNzQmFySW50ZXJ2YWxzLmRlbGV0ZShidG5JbmRleCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIGludGVydmFsU3BlZWQpO1xyXG5cclxuXHRcdHByb2dyZXNzQmFySW50ZXJ2YWxzLnNldChidG5JbmRleCwgcHJvZ3Jlc3NCYXJJbnRlcnZhbCk7XHJcblx0fTtcclxuXHQvLyBsZXQgY29udHJvbHNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuXHRjb25zdCBjaGFuZ2VDdXJyZW50SW1nID0gKG1vdmllcywgY29udGFpbmVyKSA9PiB7XHJcblx0XHRjb25zdCBjYXJvdXNlbGxDb250cm9scyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcIi5icm93c2UtbWFpbl9fY2Fyb3VzZWxsLWNvbnRyb2xzXCJcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gaWYgKGNvbnRyb2xzSW5pdGlhbGl6ZWQpIHJldHVybjtcclxuXHRcdC8vIGNvbnRyb2xzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG5cclxuXHRcdGNhcm91c2VsbENvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdFx0XHRpZiAoZS50YXJnZXQubWF0Y2hlcyhcIi5icm93c2UtbWFpbl9fYnRuXCIpKSB7XHJcblx0XHRcdFx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRjbGVhckludGVydmFsKGNhcm91c2VsbEludGVydmFsKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgY3VycmVudEJ0biA9IGUudGFyZ2V0O1xyXG5cdFx0XHRcdGNvbnN0IGltZ0RhdGEgPSBwYXJzZUludChjdXJyZW50QnRuLmRhdGFzZXQuaW1nKTtcclxuXHJcblx0XHRcdFx0aW5kZXggPSBpbWdEYXRhO1xyXG5cdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHJcblx0XHRcdFx0Y2Fyb3VzZWxsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblx0XHRcdFx0fSwgY2Fyb3VzZWxsU3BlZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBoYW5kbGVCdG5zVmlzaWJpbGl0eSA9IChjb250YWluZXIpID0+IHtcclxuXHRcdGNvbnN0IGFsbEZpbG1zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnJvd3NlLW1haW5fX2ltZy1ib3hcIik7XHJcblxyXG5cdFx0YWxsRmlsbXMuZm9yRWFjaCgoZmlsbSkgPT4ge1xyXG5cdFx0XHRjb25zdCBpc0FjdGl2ZSA9IGZpbG0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY3VycmVudFZpc2libGVcIik7XHJcblx0XHRcdGNvbnN0IHRhYmluZGV4ID0gaXNBY3RpdmUgPyAwIDogLTE7XHJcblx0XHRcdGdpdmVCdG5zQXR0cmlidXRlKGZpbG0sIHRhYmluZGV4KTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblx0Y29uc3QgZ2l2ZUJ0bnNBdHRyaWJ1dGUgPSAoZmlsbSwgdGFiaW5kZXgpID0+IHtcclxuXHRcdGNvbnN0IHRyYWlsZXJCdG4gPSBmaWxtLnF1ZXJ5U2VsZWN0b3IoXCIuYnJvd3NlLW1haW5fX3RyYWlsZXItYnRuXCIpO1xyXG5cdFx0Y29uc3Qgc2VlTW9yZUJ0biA9IGZpbG0ucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9fc2VlLW1vcmUtYnRuXCIpO1xyXG5cclxuXHRcdHRyYWlsZXJCdG4uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgdGFiaW5kZXgpO1xyXG5cdFx0c2VlTW9yZUJ0bi5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCB0YWJpbmRleCk7XHJcblx0fTtcclxuXHJcblx0bGV0IHN0YXJ0WDtcclxuXHRsZXQgZW5kWDtcclxuXHRjb25zdCBoYW5kbGVUb3VjaFN0YXJ0RXZlbnQgPSAoZSkgPT4ge1xyXG5cdFx0c3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcblx0fTtcclxuXHRjb25zdCBoYW5kbGVUb3VjaEVuZEV2ZW50ID0gKGUsIGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRlbmRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xyXG5cdFx0aGFuZGxlU3dpcGUoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdH07XHJcblx0Y29uc3QgaGFuZGxlU3dpcGUgPSAoY29udGFpbmVyLCBtb3ZpZXMpID0+IHtcclxuXHRcdGNvbnN0IHJhbmdlID0gNTA7XHJcblx0XHRpZiAoc3RhcnRYIC0gZW5kWCA+IHJhbmdlKSB7XHJcblx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdH0gZWxzZSBpZiAoZW5kWCAtIHN0YXJ0WCA+IDUwKSB7XHJcblx0XHRcdGluZGV4ID0gKGluZGV4IC0gMiArIG1vdmllcy5sZW5ndGgpICUgbW92aWVzLmxlbmd0aDtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0fVxyXG5cdFx0Y2xlYXJJbnRlcnZhbChjYXJvdXNlbGxJbnRlcnZhbCk7XHJcblx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0fSwgY2Fyb3VzZWxsU3BlZWQpO1xyXG5cdH07XHJcblx0Y29uc3Qgc2V0VG91Y2hFdmVudExpc3RlbmVyID0gKGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRjb25zdCBpbWFnZVNsaWRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19pbWFnZXNcIik7XHJcblxyXG5cdFx0aW1hZ2VTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGUpID0+IHtcclxuXHRcdFx0aGFuZGxlVG91Y2hTdGFydEV2ZW50KGUpO1xyXG5cdFx0fSk7XHJcblx0XHRpbWFnZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgKGUpID0+IHtcclxuXHRcdFx0aGFuZGxlVG91Y2hFbmRFdmVudChlLCBjb250YWluZXIsIG1vdmllcyk7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHRjaGVja0F1dGhvcml6YXRpb24oKTtcclxufSk7XHJcbiJdfQ==
