import{getData,createBrowsePage,createMainHeroSection,showErrorPopup,showBigLoader,hideBigLoader,createFilmSlider}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){const e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}},t=new Map;let r,a=1e4,n=0;const i=new Date,o=`https://api.themoviedb.org/3/discover/movie?primary_release_year=2025&primary_release_date.gte=${i.getFullYear()}-${i.getMonth()+1}-${i.getDate()}&sort_by=popularity.desc\n`,s="&page=",c=async(t,...r)=>{const a=[];for await(const n of r){const r=n+t+s+1,i=await fetch(r,e),o=await i.json();a.push(o)}return a},l=async(t,r,a)=>{const n=a+t+s+r;try{const t=await fetch(n,e);return await t.json()}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},d=async(e,t)=>{const r=[];for(let a=1;a<=t;a++)r.push(l(e,a,"https://api.themoviedb.org/3/movie/popular?language="));try{return await Promise.all(r)}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},w=async(e,t)=>{try{const r=await e(t,5),a=Math.trunc(20*Math.random());return r.map(e=>e.results[a])}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}},h=(e,t)=>{const r=e.querySelector(".browse-main__images"),a=r.querySelectorAll(".browse-main__img-box"),i=e.querySelector(".browse-main__carousell-controls");a.forEach(e=>e.classList.remove("currentVisible")),r.style.transform=`translateX(${100*-n}%)`,u(n,i),a[n].classList.add("currentVisible"),n++,n>t.length-1&&(n=0),b(e)},u=(e,r)=>{const a=r.querySelectorAll(".browse-main__btn"),n=r.querySelector(`.browse-main__btn[data-img="${e}"]`),i=n.querySelector(".browse-main__progress-bar"),o=r.querySelectorAll(".browse-main__progress-bar");t.forEach(e=>clearInterval(e)),t.clear(),o.forEach(e=>e.style.width="0"),m(i,e),a.forEach(e=>e.classList.remove("active")),n.classList.add("active")},m=(e,r)=>{t.has(r)&&clearInterval(t.get(r));let a=0;const n=setInterval(()=>{a+=2,e.style.width=`${a}%`,a>=100&&(e.style.width="0",clearInterval(n),t.delete(r))},200);t.set(r,n)},g=(e,t)=>{t.querySelector(".browse-main__carousell-controls").addEventListener("click",i=>{if(i.target.matches(".browse-main__btn")){if(i.target.classList.contains("active"))return;clearInterval(r);const o=i.target,s=parseInt(o.dataset.img);n=s,h(t,e),r=setInterval(()=>{h(t,e)},a)}})},b=e=>{e.querySelectorAll(".browse-main__img-box").forEach(e=>{const t=e.classList.contains("currentVisible")?0:-1;p(e,t,0===t?"visible":"hidden")})},p=(e,t,r)=>{const a=e.querySelector(".browse-main__trailer-btn"),n=e.querySelector(".browse-main__see-more-btn");a.setAttribute("tabindex",t),n.setAttribute("tabindex",t),a.style.visibility=r,n.style.visibility=r};let y,_,v,f;const S=(e,t)=>{const i=Math.abs(y-_),o=Math.abs(v-f);i<50||o>30||(_-y>50?(n=(n-2+t.length)%t.length,h(e,t)):y-_>50&&h(e,t),clearInterval(r),r=setInterval(()=>{h(e,t)},a))},E=(e,t)=>{const r=e.querySelector(".browse-main__images");r.addEventListener("touchstart",e=>{(e=>{e.preventDefault(),y=e.touches[0].clientX,v=e.touches[0].clientY})(e)}),r.addEventListener("touchend",r=>{((e,t,r)=>{e.preventDefault(),_=e.changedTouches[0].clientX,f=e.changedTouches[0].clientY,S(t,r)})(r,e,t)})},I=(e,t)=>{e.dataset.index=t},L=e=>{const t=(()=>{let e=2;return window.innerWidth>576&&window.innerWidth<992&&(e=1),window.innerWidth>=992&&window.innerWidth<1200&&(e=4),e})();let r=e.dataset.index;const a=e.querySelector(".browse-section__slider-images"),n=e.querySelector(".browse-section__slider-box");if(!n)return;const i=n.offsetWidth;a.style.transform=`translateX(${-r*i*t}px)`},q=(e,t)=>{let r=0===t?parseInt(e.dataset.index):0;r>=(()=>{let e;return window.innerWidth<576&&(e=9),window.innerWidth>=576&&window.innerWidth<992&&(e=17),window.innerWidth>=992&&window.innerWidth<1200&&(e=4),window.innerWidth>=1200&&(e=7),e})()||(r++,I(e,r),L(e))},M=e=>{e.querySelectorAll(".browse-section__slider").forEach(e=>e.addEventListener("click",t=>{t.target.matches(".browse-section__slider-next-btn")?q(e,0):t.target.matches(".browse-section__slider-prev-btn")&&((e,t)=>{let r=0===t?parseInt(e.dataset.index):0;r<=0||(r--,I(e,r),L(e))})(e,0)}))};window.addEventListener("resize",()=>{let e=window.innerWidth;if(window.innerWidth===e)return;document.querySelectorAll(".browse-section__slider").forEach(e=>{const t=e.querySelector(".browse-section__slider-images");I(e,0),t.style.transform="translateX(0)"})}),(async()=>{const e=getData(),t=e?.translations,n=e?.preferredLanguage,i=e?.loggedIn,s=document.querySelector(".container");if(e&&i){s.prepend(createBrowsePage(t)),s.append(showBigLoader());try{const e=await w(d,n);createMainHeroSection(e,t,s),h(s,e),r=setInterval(()=>h(s,e),a),g(e,s),E(s,e);const i=await c(n,"https://api.themoviedb.org/3/movie/upcoming?language=","https://api.themoviedb.org/3/trending/all/week?language=","https://api.themoviedb.org/3/discover/tv?with_origin_country=US|GB&language=&sort_by=popularity.desc\n",o),l=document.querySelector("main");l||showErrorPopup(t.browsePage.loadingDataError,"#dc4a34"),l.append(createFilmSlider(i,t,1,t.browseSection.sectionNames.trending),createFilmSlider(i,t,0,t.browseSection.sectionNames.upcoming),createFilmSlider(i,t,2,t.browseSection.sectionNames.topRatedSeries),createFilmSlider(i,t,3,t.browseSection.sectionNames.futureFilms)),M(s)}catch{showErrorPopup(t.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}}else window.location.href="/"})()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLm1pbi5qcyIsIm5hbWVzIjpbImdldERhdGEiLCJjcmVhdGVCcm93c2VQYWdlIiwiY3JlYXRlTWFpbkhlcm9TZWN0aW9uIiwic2hvd0Vycm9yUG9wdXAiLCJzaG93QmlnTG9hZGVyIiwiaGlkZUJpZ0xvYWRlciIsImNyZWF0ZUZpbG1TbGlkZXIiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcHRpb25zIiwibWV0aG9kIiwiaGVhZGVycyIsImFjY2VwdCIsIkF1dGhvcml6YXRpb24iLCJwcm9ncmVzc0JhckludGVydmFscyIsIk1hcCIsImNhcm91c2VsbEludGVydmFsIiwiY2Fyb3VzZWxsU3BlZWQiLCJpbmRleCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsIlVQQ09NSU5HX0ZJTE1TIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJGSUxNU19QQUdFU19BTU9VTlQiLCJnZXRBbGxGaWxtcyIsImFzeW5jIiwibGFuZyIsInVybHMiLCJmaWxtc0FyciIsInVybCIsIlVSTCIsInJlc3BvbnNlIiwiZmV0Y2giLCJkYXRhIiwianNvbiIsInB1c2giLCJnZXRGaWxtcyIsInBhZ2VOdW0iLCJ0cmFuc2xhdGlvbnMiLCJicm93c2VQYWdlIiwibG9hZGluZ0RhdGFFcnJvciIsImxvYWRGaWxtc1RvQ2Fyb3VzZWxsIiwicmVxdWVzdHMiLCJpIiwiUHJvbWlzZSIsImFsbCIsImNob29zZUZpbG1zVG9DYXJvdXNlbGwiLCJjdXJyZW50TGFuZ3VhZ2UiLCJwYWdlc0RhdGEiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwidHJ1bmMiLCJyYW5kb20iLCJtYXAiLCJwYWdlIiwicmVzdWx0cyIsImhhbmRsZUZpbG1zQ2Fyb3VzZWxsIiwiY29udGFpbmVyIiwibW92aWVzIiwiaW1hZ2VTbGlkZXIiLCJxdWVyeVNlbGVjdG9yIiwiYWxsSW1hZ2VzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhcm91c2VsbENvbnRyb2xzIiwiZm9yRWFjaCIsImltZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZSIsImFkZCIsImxlbmd0aCIsImhhbmRsZUJ0bnNWaXNpYmlsaXR5IiwiY2Fyb3VzZWxsQ29udHJvbHNCb3giLCJhbGxDb250cm9sQnRucyIsImN1cnJlbnRCdG4iLCJwcm9ncmVzc0JhciIsImFsbFByb2dyZXNzQmFycyIsImludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyIiwiYmFyIiwid2lkdGgiLCJjaGFuZ2VQcm9ncmVzc0JhciIsImJ0biIsImJ0bkluZGV4IiwiaGFzIiwiZ2V0IiwicHJvZ3Jlc3NCYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZGVsZXRlIiwic2V0IiwiY2hhbmdlQ3VycmVudEltZyIsImUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJpbWdEYXRhIiwicGFyc2VJbnQiLCJkYXRhc2V0IiwiZmlsbSIsInRhYmluZGV4IiwiZ2l2ZUJ0bnNBdHRyaWJ1dGUiLCJ2aXNpYmlsaXR5IiwidHJhaWxlckJ0biIsInNlZU1vcmVCdG4iLCJzZXRBdHRyaWJ1dGUiLCJzdGFydFgiLCJlbmRYIiwic3RhcnRZIiwiZW5kWSIsImhhbmRsZVN3aXBlIiwiaG9yaXpvbnRhbERpc3RhbmNlIiwiYWJzIiwidmVydGljYWxEaXN0YW5jZSIsInNldFRvdWNoRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwidG91Y2hlcyIsImNsaWVudFgiLCJjbGllbnRZIiwiaGFuZGxlVG91Y2hTdGFydEV2ZW50IiwiY2hhbmdlZFRvdWNoZXMiLCJoYW5kbGVUb3VjaEVuZEV2ZW50IiwiY2hhbmdlQ2Fyb3VzZWxsRGF0YUluZGV4Iiwic2xpZGVyIiwibW92ZVNsaWRlciIsInRocmVzaG9sZCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJzZXRUaHJlc2hvbGQiLCJzbGlkZXJEYXRhc2V0Iiwic2xpZGVyQ2Fyb3VzZWxsIiwicG9zdGVyIiwicG9zdGVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsInNob3dOZXh0U2xpZGUiLCJpbml0aWFsSW5kZXgiLCJtYXhJbmRleCIsImdldENhcm91c2VsQ29uZmlnIiwicHJlcGFyZUNhcm91c2VsSXRlbXMiLCJzaG93UHJldlNsaWRlIiwibGFzdFdpZHRoIiwidXNlckRhdGEiLCJwcmVmZXJyZWRMYW5ndWFnZSIsImlzTG9nZ2VkSW4iLCJsb2dnZWRJbiIsInByZXBlbmQiLCJhcHBlbmQiLCJmaWxtcyIsIm1haW4iLCJicm93c2VTZWN0aW9uIiwic2VjdGlvbk5hbWVzIiwidHJlbmRpbmciLCJ1cGNvbWluZyIsInRvcFJhdGVkU2VyaWVzIiwiZnV0dXJlRmlsbXMiLCJsb2NhdGlvbiIsImhyZWYiLCJjaGVja0F1dGhvcml6YXRpb24iXSwic291cmNlcyI6WyJtYWluLXBhZ2UuanMiXSwibWFwcGluZ3MiOiJPQUNDQSxRQUNBQyxpQkFDQUMsc0JBQ0FDLGVBQ0FDLGNBQ0FDLGNBQ0FDLHFCQUNNLHNCQUNQQyxTQUFTQyxpQkFBaUIsbUJBQW9CLFdBRTdDLE1BR01DLEVBQVUsQ0FDZkMsT0FBUSxNQUNSQyxRQUFTLENBQ1JDLE9BQVEsbUJBQ1JDLGNBQ0MseVBBR0dDLEVBQXVCLElBQUlDLElBQ2pDLElBS0lDLEVBTEFDLEVBQWlCLElBSWpCQyxFQUFRLEVBR1osTUFLTUMsRUFBYyxJQUFJQyxLQUNsQkMsRUFBaUIsa0dBQWtHRixFQUFZRyxpQkFDcElILEVBQVlJLFdBQWEsS0FDdEJKLEVBQVlLLHNDQUdWQyxFQUFxQixTQW1GckJDLEVBQWNDLE1BQU9DLEtBQVNDLEtBQ25DLE1BQU1DLEVBQVcsR0FDakIsVUFBVyxNQUFNQyxLQUFPRixFQUFNLENBQzdCLE1BQU1HLEVBQ0xELEVBQU1ILEVBQU9ILEVBbkh3QixFQW9IaENRLFFBQWlCQyxNQUFNRixFQUFLdkIsR0FDNUIwQixRQUFhRixFQUFTRyxPQUU1Qk4sRUFBU08sS0FBS0YsRUFDZixDQUVBLE9BQU9MLEdBRUZRLEVBQVdYLE1BQU9DLEVBQU1XLEVBQVNSLEtBQ3RDLE1BQU1D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V0FBV0MsaUJBQWtCLFdBRzFEOEcsRUFBS0YsT0FDSmhKLGlCQUNDaUosRUFDQS9HLEVBQ0EsRUFDQUEsRUFBYWlILGNBQWNDLGFBQWFDLFVBRXpDckosaUJBQ0NpSixFQUNBL0csRUFDQSxFQUNBQSxFQUFhaUgsY0FBY0MsYUFBYUUsVUFFekN0SixpQkFDQ2lKLEVBQ0EvRyxFQUNBLEVBQ0FBLEVBQWFpSCxjQUFjQyxhQUFhRyxnQkFFekN2SixpQkFDQ2lKLEVBQ0EvRyxFQUNBLEVBQ0FBLEVBQWFpSCxjQUFjQyxhQUFhSSxjQUcxQ2hCLEVBQXFCbkYsRUFDdEIsQ0FBRSxNQUNEeEQsZUFBZXFDLEVBQWFDLFdBQVdDLGlCQUFrQixVQUMxRCxDQUFFLFFBQ0RyQyxlQUNELENBbkVBLE1BRkM2SCxPQUFPNkIsU0FBU0MsS0FBTyxLQWtZekJDLEVBQ0QiLCJpZ25vcmVMaXN0IjpbXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuXHRnZXREYXRhLFxyXG5cdGNyZWF0ZUJyb3dzZVBhZ2UsXHJcblx0Y3JlYXRlTWFpbkhlcm9TZWN0aW9uLFxyXG5cdHNob3dFcnJvclBvcHVwLFxyXG5cdHNob3dCaWdMb2FkZXIsXHJcblx0aGlkZUJpZ0xvYWRlcixcclxuXHRjcmVhdGVGaWxtU2xpZGVyLFxyXG59IGZyb20gXCIuL2NvbXBvbmVudHMubWluLmpzXCI7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuXHQvLyBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL2Rpc2NvdmVyL21vdmllP2xhbmd1YWdlPXBsXHJcblx0Y29uc3QgQ0FST1VTRUxMX0xFTkdUSCA9IDU7XHJcblx0Y29uc3QgRklMTV9BTU9VTlRfUEVSX1BBR0UgPSAyMDtcclxuXHRjb25zdCBQQUdFX1RPX1NIT1dfT05fU01BTExfQ0FST1VTRUxTID0gMTtcclxuXHRjb25zdCBvcHRpb25zID0ge1xyXG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHRhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG5cdFx0XHRBdXRob3JpemF0aW9uOlxyXG5cdFx0XHRcdFwiQmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUo5LmV5SmhkV1FpT2lJek5UWXdaak00TWpVM05EUTFaR0UxWkdaa1lUWXhZekUwWVdNNFltTTRNeUlzSW01aVppSTZNVGMxT1RjMk5UQXpPQzQ1TkN3aWMzVmlJam9pTmpobE0yVXlNbVV5TmpZNU56WTRNemhsWXpJM056STVJaXdpYzJOdmNHVnpJanBiSW1Gd2FWOXlaV0ZrSWwwc0luWmxjbk5wYjI0aU9qRjkubnVHZkVqY2xKTGVwbXp6SGkyb21OaHAyOVRIZ3JKZjlOdjZENF9nVGR4QVwiLFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cdGNvbnN0IHByb2dyZXNzQmFySW50ZXJ2YWxzID0gbmV3IE1hcCgpO1xyXG5cdGxldCBjYXJvdXNlbGxTcGVlZCA9IDEwMDAwO1xyXG5cdGxldCBjYXJvdXNlbGxTdHJva2VSYW5nZSA9IDI7XHJcblx0bGV0IGludGVydmFsU3BlZWQgPSAoY2Fyb3VzZWxsU3BlZWQgKiBjYXJvdXNlbGxTdHJva2VSYW5nZSkgLyAxMDA7XHJcblx0bGV0IGNhcm91c2VsbFdpZHRoID0gMTAwO1xyXG5cdGxldCBpbmRleCA9IDA7XHJcblx0bGV0IGNhcm91c2VsbEludGVydmFsO1xyXG5cclxuXHRjb25zdCBQT1BVTEFSX0ZJTE1TX1VSTCA9IGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3BvcHVsYXI/bGFuZ3VhZ2U9YDtcclxuXHRjb25zdCBIT1RfUkFURURfRklMTVNfVVJMID0gYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvbW92aWUvdXBjb21pbmc/bGFuZ3VhZ2U9YDtcclxuXHRjb25zdCBUUkVORElOR19GSUxNU19VUkwgPSBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy90cmVuZGluZy9hbGwvd2Vlaz9sYW5ndWFnZT1gO1xyXG5cdGNvbnN0IFRPUF9SQVRFRF9UVl9TRVJJRVNfVVJMID0gYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvZGlzY292ZXIvdHY/d2l0aF9vcmlnaW5fY291bnRyeT1VU3xHQiZsYW5ndWFnZT0mc29ydF9ieT1wb3B1bGFyaXR5LmRlc2NcclxuYDtcclxuXHRjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcblx0Y29uc3QgVVBDT01JTkdfRklMTVMgPSBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9kaXNjb3Zlci9tb3ZpZT9wcmltYXJ5X3JlbGVhc2VfeWVhcj0yMDI1JnByaW1hcnlfcmVsZWFzZV9kYXRlLmd0ZT0ke2N1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCl9LSR7XHJcblx0XHRjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMVxyXG5cdH0tJHtjdXJyZW50RGF0ZS5nZXREYXRlKCl9JnNvcnRfYnk9cG9wdWxhcml0eS5kZXNjXHJcbmA7XHJcblxyXG5cdGNvbnN0IEZJTE1TX1BBR0VTX0FNT1VOVCA9IGAmcGFnZT1gO1xyXG5cclxuXHRjb25zdCBjaGVja0F1dGhvcml6YXRpb24gPSBhc3luYyAoKSA9PiB7XHJcblx0XHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHRcdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHVzZXJEYXRhPy50cmFuc2xhdGlvbnM7XHJcblx0XHRjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSB1c2VyRGF0YT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblx0XHRjb25zdCBpc0xvZ2dlZEluID0gdXNlckRhdGE/LmxvZ2dlZEluO1xyXG5cclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5cclxuXHRcdGlmICghdXNlckRhdGEgfHwgIWlzTG9nZ2VkSW4pIHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRhaW5lci5wcmVwZW5kKGNyZWF0ZUJyb3dzZVBhZ2UodHJhbnNsYXRpb25zKSk7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKHNob3dCaWdMb2FkZXIoKSk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgbW92aWVzID0gYXdhaXQgY2hvb3NlRmlsbXNUb0Nhcm91c2VsbChcclxuXHRcdFx0XHRsb2FkRmlsbXNUb0Nhcm91c2VsbCxcclxuXHRcdFx0XHRjdXJyZW50TGFuZ3VhZ2VcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNyZWF0ZU1haW5IZXJvU2VjdGlvbihtb3ZpZXMsIHRyYW5zbGF0aW9ucywgY29udGFpbmVyKTtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cclxuXHRcdFx0Y2Fyb3VzZWxsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcclxuXHRcdFx0XHQoKSA9PiBoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyksXHJcblx0XHRcdFx0Y2Fyb3VzZWxsU3BlZWRcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNoYW5nZUN1cnJlbnRJbWcobW92aWVzLCBjb250YWluZXIpO1xyXG5cdFx0XHRzZXRUb3VjaEV2ZW50TGlzdGVuZXIoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cclxuXHRcdFx0Y29uc3QgZmlsbXMgPSBhd2FpdCBnZXRBbGxGaWxtcyhcclxuXHRcdFx0XHRjdXJyZW50TGFuZ3VhZ2UsXHJcblx0XHRcdFx0SE9UX1JBVEVEX0ZJTE1TX1VSTCxcclxuXHRcdFx0XHRUUkVORElOR19GSUxNU19VUkwsXHJcblx0XHRcdFx0VE9QX1JBVEVEX1RWX1NFUklFU19VUkwsXHJcblx0XHRcdFx0VVBDT01JTkdfRklMTVNcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpblwiKTtcclxuXHJcblx0XHRcdGlmICghbWFpbikge1xyXG5cdFx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bWFpbi5hcHBlbmQoXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MSxcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy50cmVuZGluZ1xyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MCxcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy51cGNvbWluZ1xyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MixcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy50b3BSYXRlZFNlcmllc1xyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0Y3JlYXRlRmlsbVNsaWRlcihcclxuXHRcdFx0XHRcdGZpbG1zLFxyXG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zLFxyXG5cdFx0XHRcdFx0MyxcclxuXHRcdFx0XHRcdHRyYW5zbGF0aW9ucy5icm93c2VTZWN0aW9uLnNlY3Rpb25OYW1lcy5mdXR1cmVGaWxtc1xyXG5cdFx0XHRcdClcclxuXHRcdFx0KTtcclxuXHRcdFx0cHJlcGFyZUNhcm91c2VsSXRlbXMoY29udGFpbmVyKTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cCh0cmFuc2xhdGlvbnMuYnJvd3NlUGFnZS5sb2FkaW5nRGF0YUVycm9yLCBcIiNkYzRhMzRcIik7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRoaWRlQmlnTG9hZGVyKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgZ2V0QWxsRmlsbXMgPSBhc3luYyAobGFuZywgLi4udXJscykgPT4ge1xyXG5cdFx0Y29uc3QgZmlsbXNBcnIgPSBbXTtcclxuXHRcdGZvciBhd2FpdCAoY29uc3QgdXJsIG9mIHVybHMpIHtcclxuXHRcdFx0Y29uc3QgVVJMID1cclxuXHRcdFx0XHR1cmwgKyBsYW5nICsgRklMTVNfUEFHRVNfQU1PVU5UICsgUEFHRV9UT19TSE9XX09OX1NNQUxMX0NBUk9VU0VMUztcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChVUkwsIG9wdGlvbnMpO1xyXG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuXHRcdFx0ZmlsbXNBcnIucHVzaChkYXRhKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmlsbXNBcnI7XHJcblx0fTtcclxuXHRjb25zdCBnZXRGaWxtcyA9IGFzeW5jIChsYW5nLCBwYWdlTnVtLCB1cmwpID0+IHtcclxuXHRcdGNvbnN0IFVSTCA9IHVybCArIGxhbmcgKyBGSUxNU19QQUdFU19BTU9VTlQgKyBwYWdlTnVtO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVVJMLCBvcHRpb25zKTtcclxuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjb25zdCBsb2FkRmlsbXNUb0Nhcm91c2VsbCA9IGFzeW5jIChsYW5nLCBwYWdlTnVtKSA9PiB7XHJcblx0XHRjb25zdCByZXF1ZXN0cyA9IFtdO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IHBhZ2VOdW07IGkrKykge1xyXG5cdFx0XHRyZXF1ZXN0cy5wdXNoKGdldEZpbG1zKGxhbmcsIGksIFBPUFVMQVJfRklMTVNfVVJMKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdHMpO1xyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VzO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjb25zdCBjaG9vc2VGaWxtc1RvQ2Fyb3VzZWxsID0gYXN5bmMgKGRhdGEsIGN1cnJlbnRMYW5ndWFnZSkgPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcGFnZXNEYXRhID0gYXdhaXQgZGF0YShjdXJyZW50TGFuZ3VhZ2UsIENBUk9VU0VMTF9MRU5HVEgpO1xyXG5cdFx0XHRjb25zdCByYW5kb21OdW1iZXIgPSBNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiBGSUxNX0FNT1VOVF9QRVJfUEFHRSk7XHJcblx0XHRcdGNvbnN0IGNob29zZW5Nb3ZpZXMgPSBwYWdlc0RhdGEubWFwKChwYWdlKSA9PiBwYWdlLnJlc3VsdHNbcmFuZG9tTnVtYmVyXSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gY2hvb3Nlbk1vdmllcztcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cCh0cmFuc2xhdGlvbnMuYnJvd3NlUGFnZS5sb2FkaW5nRGF0YUVycm9yLCBcIiNkYzRhMzRcIik7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRoaWRlQmlnTG9hZGVyKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQ0FST1VTRUxMXHJcblxyXG5cdGNvbnN0IGhhbmRsZUZpbG1zQ2Fyb3VzZWxsID0gKGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRjb25zdCBpbWFnZVNsaWRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19pbWFnZXNcIik7XHJcblx0XHRjb25zdCBhbGxJbWFnZXMgPSBpbWFnZVNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmJyb3dzZS1tYWluX19pbWctYm94XCIpO1xyXG5cdFx0Y29uc3QgY2Fyb3VzZWxsQ29udHJvbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XCIuYnJvd3NlLW1haW5fX2Nhcm91c2VsbC1jb250cm9sc1wiXHJcblx0XHQpO1xyXG5cdFx0YWxsSW1hZ2VzLmZvckVhY2goKGltZykgPT4gaW1nLmNsYXNzTGlzdC5yZW1vdmUoXCJjdXJyZW50VmlzaWJsZVwiKSk7XHJcblxyXG5cdFx0aW1hZ2VTbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstaW5kZXggKiBjYXJvdXNlbGxXaWR0aH0lKWA7XHJcblx0XHRoYW5kbGVDYXJvdXNlbGxDb250cm9sc1N0YXRlKGluZGV4LCBjYXJvdXNlbGxDb250cm9scyk7XHJcblx0XHRhbGxJbWFnZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50VmlzaWJsZVwiKTtcclxuXHJcblx0XHRpbmRleCsrO1xyXG5cclxuXHRcdGlmIChpbmRleCA+IG1vdmllcy5sZW5ndGggLSAxKSBpbmRleCA9IDA7XHJcblxyXG5cdFx0aGFuZGxlQnRuc1Zpc2liaWxpdHkoY29udGFpbmVyKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBoYW5kbGVDYXJvdXNlbGxDb250cm9sc1N0YXRlID0gKGluZGV4LCBjYXJvdXNlbGxDb250cm9sc0JveCkgPT4ge1xyXG5cdFx0Y29uc3QgYWxsQ29udHJvbEJ0bnMgPVxyXG5cdFx0XHRjYXJvdXNlbGxDb250cm9sc0JveC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJyb3dzZS1tYWluX19idG5cIik7XHJcblx0XHRjb25zdCBjdXJyZW50QnRuID0gY2Fyb3VzZWxsQ29udHJvbHNCb3gucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0YC5icm93c2UtbWFpbl9fYnRuW2RhdGEtaW1nPVwiJHtpbmRleH1cIl1gXHJcblx0XHQpO1xyXG5cdFx0Y29uc3QgcHJvZ3Jlc3NCYXIgPSBjdXJyZW50QnRuLnF1ZXJ5U2VsZWN0b3IoXCIuYnJvd3NlLW1haW5fX3Byb2dyZXNzLWJhclwiKTtcclxuXHRcdGNvbnN0IGFsbFByb2dyZXNzQmFycyA9IGNhcm91c2VsbENvbnRyb2xzQm94LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcblx0XHRcdFwiLmJyb3dzZS1tYWluX19wcm9ncmVzcy1iYXJcIlxyXG5cdFx0KTtcclxuXHJcblx0XHRwcm9ncmVzc0JhckludGVydmFscy5mb3JFYWNoKChpbnRlcnZhbCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCkpO1xyXG5cdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuY2xlYXIoKTtcclxuXHJcblx0XHRhbGxQcm9ncmVzc0JhcnMuZm9yRWFjaCgoYmFyKSA9PiAoYmFyLnN0eWxlLndpZHRoID0gXCIwXCIpKTtcclxuXHJcblx0XHRjaGFuZ2VQcm9ncmVzc0Jhcihwcm9ncmVzc0JhciwgaW5kZXgpO1xyXG5cclxuXHRcdGFsbENvbnRyb2xCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIikpO1xyXG5cdFx0Y3VycmVudEJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNoYW5nZVByb2dyZXNzQmFyID0gKHByb2dyZXNzQmFyLCBidG5JbmRleCkgPT4ge1xyXG5cdFx0aWYgKHByb2dyZXNzQmFySW50ZXJ2YWxzLmhhcyhidG5JbmRleCkpIHtcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbChwcm9ncmVzc0JhckludGVydmFscy5nZXQoYnRuSW5kZXgpKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgd2lkdGggPSAwO1xyXG5cdFx0Y29uc3QgcHJvZ3Jlc3NCYXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0d2lkdGggKz0gY2Fyb3VzZWxsU3Ryb2tlUmFuZ2U7XHJcblx0XHRcdHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9JWA7XHJcblx0XHRcdGlmICh3aWR0aCA+PSAxMDApIHtcclxuXHRcdFx0XHRwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IFwiMFwiO1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwocHJvZ3Jlc3NCYXJJbnRlcnZhbCk7XHJcblxyXG5cdFx0XHRcdHByb2dyZXNzQmFySW50ZXJ2YWxzLmRlbGV0ZShidG5JbmRleCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIGludGVydmFsU3BlZWQpO1xyXG5cclxuXHRcdHByb2dyZXNzQmFySW50ZXJ2YWxzLnNldChidG5JbmRleCwgcHJvZ3Jlc3NCYXJJbnRlcnZhbCk7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgY2hhbmdlQ3VycmVudEltZyA9IChtb3ZpZXMsIGNvbnRhaW5lcikgPT4ge1xyXG5cdFx0Y29uc3QgY2Fyb3VzZWxsQ29udHJvbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XCIuYnJvd3NlLW1haW5fX2Nhcm91c2VsbC1jb250cm9sc1wiXHJcblx0XHQpO1xyXG5cclxuXHRcdGNhcm91c2VsbENvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdFx0XHRpZiAoZS50YXJnZXQubWF0Y2hlcyhcIi5icm93c2UtbWFpbl9fYnRuXCIpKSB7XHJcblx0XHRcdFx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRjbGVhckludGVydmFsKGNhcm91c2VsbEludGVydmFsKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgY3VycmVudEJ0biA9IGUudGFyZ2V0O1xyXG5cdFx0XHRcdGNvbnN0IGltZ0RhdGEgPSBwYXJzZUludChjdXJyZW50QnRuLmRhdGFzZXQuaW1nKTtcclxuXHJcblx0XHRcdFx0aW5kZXggPSBpbWdEYXRhO1xyXG5cdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHJcblx0XHRcdFx0Y2Fyb3VzZWxsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblx0XHRcdFx0fSwgY2Fyb3VzZWxsU3BlZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBoYW5kbGVCdG5zVmlzaWJpbGl0eSA9IChjb250YWluZXIpID0+IHtcclxuXHRcdGNvbnN0IGFsbEZpbG1zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnJvd3NlLW1haW5fX2ltZy1ib3hcIik7XHJcblxyXG5cdFx0YWxsRmlsbXMuZm9yRWFjaCgoZmlsbSkgPT4ge1xyXG5cdFx0XHRjb25zdCBpc0FjdGl2ZSA9IGZpbG0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY3VycmVudFZpc2libGVcIik7XHJcblx0XHRcdGNvbnN0IHRhYmluZGV4ID0gaXNBY3RpdmUgPyAwIDogLTE7XHJcblx0XHRcdGNvbnN0IHZpc2liaWxpdHkgPSB0YWJpbmRleCA9PT0gMCA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIjtcclxuXHRcdFx0Z2l2ZUJ0bnNBdHRyaWJ1dGUoZmlsbSwgdGFiaW5kZXgsIHZpc2liaWxpdHkpO1xyXG5cdFx0fSk7XHJcblx0fTtcclxuXHRjb25zdCBnaXZlQnRuc0F0dHJpYnV0ZSA9IChmaWxtLCB0YWJpbmRleCwgdmlzaWJpbGl0eSkgPT4ge1xyXG5cdFx0Y29uc3QgdHJhaWxlckJ0biA9IGZpbG0ucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9fdHJhaWxlci1idG5cIik7XHJcblx0XHRjb25zdCBzZWVNb3JlQnRuID0gZmlsbS5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19zZWUtbW9yZS1idG5cIik7XHJcblxyXG5cdFx0dHJhaWxlckJ0bi5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCB0YWJpbmRleCk7XHJcblx0XHRzZWVNb3JlQnRuLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIHRhYmluZGV4KTtcclxuXHRcdHRyYWlsZXJCdG4uc3R5bGUudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XHJcblx0XHRzZWVNb3JlQnRuLnN0eWxlLnZpc2liaWxpdHkgPSB2aXNpYmlsaXR5O1xyXG5cdH07XHJcblxyXG5cdGxldCBzdGFydFg7XHJcblx0bGV0IGVuZFg7XHJcblx0bGV0IHN0YXJ0WTtcclxuXHRsZXQgZW5kWTtcclxuXHJcblx0Y29uc3QgaGFuZGxlVG91Y2hTdGFydEV2ZW50ID0gKGUpID0+IHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRzdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcclxuXHRcdHN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZVRvdWNoRW5kRXZlbnQgPSAoZSwgY29udGFpbmVyLCBtb3ZpZXMpID0+IHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRlbmRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xyXG5cdFx0ZW5kWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcclxuXHRcdGhhbmRsZVN3aXBlKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBoYW5kbGVTd2lwZSA9IChjb250YWluZXIsIG1vdmllcykgPT4ge1xyXG5cdFx0Y29uc3QgSE9SSVpPTlRBTF9SQU5HRSA9IDUwO1xyXG5cdFx0Y29uc3QgVkVSVElDQUxfUkFOR0UgPSAzMDtcclxuXHJcblx0XHRjb25zdCBob3Jpem9udGFsRGlzdGFuY2UgPSBNYXRoLmFicyhzdGFydFggLSBlbmRYKTtcclxuXHRcdGNvbnN0IHZlcnRpY2FsRGlzdGFuY2UgPSBNYXRoLmFicyhzdGFydFkgLSBlbmRZKTtcclxuXHJcblx0XHRpZiAoXHJcblx0XHRcdGhvcml6b250YWxEaXN0YW5jZSA8IEhPUklaT05UQUxfUkFOR0UgfHxcclxuXHRcdFx0dmVydGljYWxEaXN0YW5jZSA+IFZFUlRJQ0FMX1JBTkdFXHJcblx0XHQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGVuZFggLSBzdGFydFggPiBIT1JJWk9OVEFMX1JBTkdFKSB7XHJcblx0XHRcdGluZGV4ID0gKGluZGV4IC0gMiArIG1vdmllcy5sZW5ndGgpICUgbW92aWVzLmxlbmd0aDtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0fSBlbHNlIGlmIChzdGFydFggLSBlbmRYID4gSE9SSVpPTlRBTF9SQU5HRSkge1xyXG5cdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y2xlYXJJbnRlcnZhbChjYXJvdXNlbGxJbnRlcnZhbCk7XHJcblx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cdFx0fSwgY2Fyb3VzZWxsU3BlZWQpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IHNldFRvdWNoRXZlbnRMaXN0ZW5lciA9IChjb250YWluZXIsIG1vdmllcykgPT4ge1xyXG5cdFx0Y29uc3QgaW1hZ2VTbGlkZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9faW1hZ2VzXCIpO1xyXG5cclxuXHRcdGltYWdlU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChlKSA9PiB7XHJcblx0XHRcdGhhbmRsZVRvdWNoU3RhcnRFdmVudChlKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGltYWdlU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoZSkgPT4ge1xyXG5cdFx0XHRoYW5kbGVUb3VjaEVuZEV2ZW50KGUsIGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGNoYW5nZUNhcm91c2VsbERhdGFJbmRleCA9IChzbGlkZXIsIGluZGV4KSA9PiB7XHJcblx0XHRzbGlkZXIuZGF0YXNldC5pbmRleCA9IGluZGV4O1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGdldENhcm91c2VsQ29uZmlnID0gKCkgPT4ge1xyXG5cdFx0bGV0IG1heEluZGV4O1xyXG5cclxuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDU3NikgbWF4SW5kZXggPSA5O1xyXG5cdFx0aWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDU3NiAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8IDk5MikgbWF4SW5kZXggPSAxNztcclxuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA5OTIgJiYgd2luZG93LmlubmVyV2lkdGggPCAxMjAwKSBtYXhJbmRleCA9IDQ7XHJcblx0XHRpZiAod2luZG93LmlubmVyV2lkdGggPj0gMTIwMCkgbWF4SW5kZXggPSA3O1xyXG5cclxuXHRcdHJldHVybiBtYXhJbmRleDtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBzZXRUaHJlc2hvbGQgPSAoKSA9PiB7XHJcblx0XHRsZXQgdGhyZXNob2xkID0gMjtcclxuXHJcblx0XHRpZiAod2luZG93LmlubmVyV2lkdGggPiA1NzYgJiYgd2luZG93LmlubmVyV2lkdGggPCA5OTIpIHRocmVzaG9sZCA9IDE7XHJcblx0XHRpZiAod2luZG93LmlubmVyV2lkdGggPj0gOTkyICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgMTIwMCkgdGhyZXNob2xkID0gNDtcclxuXHJcblx0XHRyZXR1cm4gdGhyZXNob2xkO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IG1vdmVTbGlkZXIgPSAoc2xpZGVyKSA9PiB7XHJcblx0XHRjb25zdCB0aHJlc2hvbGQgPSBzZXRUaHJlc2hvbGQoKTtcclxuXHRcdGxldCBzbGlkZXJEYXRhc2V0ID0gc2xpZGVyLmRhdGFzZXQuaW5kZXg7XHJcblx0XHRjb25zdCBzbGlkZXJDYXJvdXNlbGwgPSBzbGlkZXIucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XCIuYnJvd3NlLXNlY3Rpb25fX3NsaWRlci1pbWFnZXNcIlxyXG5cdFx0KTtcclxuXHJcblx0XHRjb25zdCBwb3N0ZXIgPSBzbGlkZXIucXVlcnlTZWxlY3RvcihcIi5icm93c2Utc2VjdGlvbl9fc2xpZGVyLWJveFwiKTtcclxuXHRcdGlmICghcG9zdGVyKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgcG9zdGVyV2lkdGggPSBwb3N0ZXIub2Zmc2V0V2lkdGg7XHJcblx0XHRzbGlkZXJDYXJvdXNlbGwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtcclxuXHRcdFx0LXNsaWRlckRhdGFzZXQgKiBwb3N0ZXJXaWR0aCAqIHRocmVzaG9sZFxyXG5cdFx0fXB4KWA7XHJcblx0fTtcclxuXHJcblx0Y29uc3Qgc2hvd05leHRTbGlkZSA9IChzbGlkZXIsIGluZGV4KSA9PiB7XHJcblx0XHRsZXQgaW5pdGlhbEluZGV4ID0gaW5kZXggPT09IDAgPyBwYXJzZUludChzbGlkZXIuZGF0YXNldC5pbmRleCkgOiAwO1xyXG5cdFx0Y29uc3QgbWF4SW5kZXggPSBnZXRDYXJvdXNlbENvbmZpZygpO1xyXG5cclxuXHRcdGlmIChpbml0aWFsSW5kZXggPj0gbWF4SW5kZXgpIHJldHVybjtcclxuXHJcblx0XHRpbml0aWFsSW5kZXgrKztcclxuXHRcdGNoYW5nZUNhcm91c2VsbERhdGFJbmRleChzbGlkZXIsIGluaXRpYWxJbmRleCk7XHJcblx0XHRtb3ZlU2xpZGVyKHNsaWRlcik7XHJcblx0fTtcclxuXHJcblx0Y29uc3Qgc2hvd1ByZXZTbGlkZSA9IChzbGlkZXIsIGluZGV4KSA9PiB7XHJcblx0XHRsZXQgaW5pdGlhbEluZGV4ID0gaW5kZXggPT09IDAgPyBwYXJzZUludChzbGlkZXIuZGF0YXNldC5pbmRleCkgOiAwO1xyXG5cclxuXHRcdGlmIChpbml0aWFsSW5kZXggPD0gMCkgcmV0dXJuO1xyXG5cclxuXHRcdGluaXRpYWxJbmRleC0tO1xyXG5cdFx0Y2hhbmdlQ2Fyb3VzZWxsRGF0YUluZGV4KHNsaWRlciwgaW5pdGlhbEluZGV4KTtcclxuXHRcdG1vdmVTbGlkZXIoc2xpZGVyKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBwcmVwYXJlQ2Fyb3VzZWxJdGVtcyA9IChjb250YWluZXIpID0+IHtcclxuXHRcdGNvbnN0IHNsaWRlcnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2Utc2VjdGlvbl9fc2xpZGVyXCIpO1xyXG5cclxuXHRcdHNsaWRlcnMuZm9yRWFjaCgoc2xpZGVyKSA9PlxyXG5cdFx0XHRzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRcdFx0bGV0IHNtYWxsQ2Fyb3VzZWxsSW5kZXggPSAwO1xyXG5cclxuXHRcdFx0XHRpZiAoZS50YXJnZXQubWF0Y2hlcyhcIi5icm93c2Utc2VjdGlvbl9fc2xpZGVyLW5leHQtYnRuXCIpKSB7XHJcblx0XHRcdFx0XHRzaG93TmV4dFNsaWRlKHNsaWRlciwgc21hbGxDYXJvdXNlbGxJbmRleCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiLmJyb3dzZS1zZWN0aW9uX19zbGlkZXItcHJldi1idG5cIikpIHtcclxuXHRcdFx0XHRcdHNob3dQcmV2U2xpZGUoc2xpZGVyLCBzbWFsbENhcm91c2VsbEluZGV4KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cdH07XHJcblxyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHtcclxuXHRcdGxldCBsYXN0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHRcdFxyXG5cdFx0aWYgKHdpbmRvdy5pbm5lcldpZHRoID09PSBsYXN0V2lkdGgpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBhbGxTbGlkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2Utc2VjdGlvbl9fc2xpZGVyXCIpO1xyXG5cclxuXHRcdGFsbFNsaWRlcnMuZm9yRWFjaCgoc2xpZGVyKSA9PiB7XHJcblx0XHRcdGNvbnN0IHNsaWRlckNhcm91c2VsbCA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcdFwiLmJyb3dzZS1zZWN0aW9uX19zbGlkZXItaW1hZ2VzXCJcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNoYW5nZUNhcm91c2VsbERhdGFJbmRleChzbGlkZXIsIDApO1xyXG5cdFx0XHRzbGlkZXJDYXJvdXNlbGwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKDApXCI7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0Y2hlY2tBdXRob3JpemF0aW9uKCk7XHJcbn0pO1xyXG4iXX0=
