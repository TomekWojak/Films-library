import{getData,createBrowsePage,createMainHeroSection,showErrorPopup,showBigLoader,hideBigLoader}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){const e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}},t=new Map;let r,a=15e3,o=0;const s=async(t,r)=>{const a=`https://api.themoviedb.org/3/movie/popular?language=${t}&page=${r}`;try{const t=await fetch(a,e);return await t.json()}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},n=async(e,t)=>{const r=[];for(let a=1;a<=t;a++)r.push(s(e,a));try{return await Promise.all(r)}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}},i=async(e,t)=>{try{const r=await e(t,5),a=Math.trunc(20*Math.random());return r.map(e=>e.results[a])}catch{showErrorPopup(translations.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}},c=(e,t)=>{const r=e.querySelector(".browse-main__images"),a=r.querySelectorAll(".browse-main__img-box"),s=e.querySelector(".browse-main__carousell-controls");a.forEach(e=>e.classList.remove("currentVisible")),r.style.transform=`translateX(${100*-o}%)`,l(o,s),a[o].classList.add("currentVisible"),o++,o>t.length-1&&(o=0),h(e)},l=(e,r)=>{const a=r.querySelectorAll(".browse-main__btn"),o=r.querySelector(`.browse-main__btn[data-img="${e}"]`),s=o.querySelector(".browse-main__progress-bar"),n=r.querySelectorAll(".browse-main__progress-bar");t.forEach(e=>clearInterval(e)),t.clear(),n.forEach(e=>e.style.width="0"),d(s,e),a.forEach(e=>e.classList.remove("active")),o.classList.add("active")},d=(e,r)=>{t.has(r)&&clearInterval(t.get(r));let a=0;const o=setInterval(()=>{a+=5,e.style.width=`${a}%`,a>=100&&(e.style.width="0",clearInterval(o),t.delete(r))},750);t.set(r,o)},m=(e,t,r)=>{t.querySelector(".browse-main__carousell-controls").addEventListener("click",s=>{if(s.target.matches(".browse-main__btn")){if(s.target.classList.contains("active"))return;clearInterval(r);const n=s.target,i=parseInt(n.dataset.img);o=i,c(t,e),r=setInterval(()=>{c(t,e)},a)}})},h=e=>{e.querySelectorAll(".browse-main__img-box").forEach(e=>{const t=e.classList.contains("currentVisible");u(e,t?0:-1)})},u=(e,t)=>{const r=e.querySelector(".browse-main__trailer-btn"),a=e.querySelector(".browse-main__see-more-btn");r.setAttribute("tabindex",t),a.setAttribute("tabindex",t)};(()=>{const e=getData(),t=e?.translations,o=e?.preferredLanguage,s=e?.loggedIn,l=document.querySelector(".container");e&&s?(l.prepend(createBrowsePage(t)),l.append(showBigLoader()),i(n,o).then(e=>{createMainHeroSection(e,t,l),c(l,e),r=setInterval(()=>{c(l,e)},a),m(e,l,r)})):window.location.href="/"})()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLm1pbi5qcyIsIm5hbWVzIjpbImdldERhdGEiLCJjcmVhdGVCcm93c2VQYWdlIiwiY3JlYXRlTWFpbkhlcm9TZWN0aW9uIiwic2hvd0Vycm9yUG9wdXAiLCJzaG93QmlnTG9hZGVyIiwiaGlkZUJpZ0xvYWRlciIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwiYWNjZXB0IiwiQXV0aG9yaXphdGlvbiIsInByb2dyZXNzQmFySW50ZXJ2YWxzIiwiTWFwIiwiY2Fyb3VzZWxsSW50ZXJ2YWwiLCJjYXJvdXNlbGxTcGVlZCIsImluZGV4IiwiZ2V0UG9wdWxhckZpbG1zIiwiYXN5bmMiLCJsYW5nIiwicGFnZU51bSIsIlVSTCIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwidHJhbnNsYXRpb25zIiwiYnJvd3NlUGFnZSIsImxvYWRpbmdEYXRhRXJyb3IiLCJsb2FkRmlsbXNUb0Nhcm91c2VsbCIsInJlcXVlc3RzIiwiaSIsInB1c2giLCJQcm9taXNlIiwiYWxsIiwiY2hvb3NlRmlsbXNUb0Nhcm91c2VsbCIsImRhdGEiLCJjdXJyZW50TGFuZ3VhZ2UiLCJwYWdlc0RhdGEiLCJyYW5kb21OdW1iZXIiLCJNYXRoIiwidHJ1bmMiLCJyYW5kb20iLCJtYXAiLCJwYWdlIiwicmVzdWx0cyIsImhhbmRsZUZpbG1zQ2Fyb3VzZWxsIiwiY29udGFpbmVyIiwibW92aWVzIiwiaW1hZ2VTbGlkZXIiLCJxdWVyeVNlbGVjdG9yIiwiYWxsSW1hZ2VzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhcm91c2VsbENvbnRyb2xzIiwiZm9yRWFjaCIsImltZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0eWxlIiwidHJhbnNmb3JtIiwiaGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZSIsImFkZCIsImxlbmd0aCIsImhhbmRsZUJ0bnNWaXNpYmlsaXR5IiwiY2Fyb3VzZWxsQ29udHJvbHNCb3giLCJhbGxDb250cm9sQnRucyIsImN1cnJlbnRCdG4iLCJwcm9ncmVzc0JhciIsImFsbFByb2dyZXNzQmFycyIsImludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyIiwiYmFyIiwid2lkdGgiLCJjaGFuZ2VQcm9ncmVzc0JhciIsImJ0biIsImJ0bkluZGV4IiwiaGFzIiwiZ2V0IiwicHJvZ3Jlc3NCYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZGVsZXRlIiwic2V0IiwiY2hhbmdlQ3VycmVudEltZyIsImUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJpbWdEYXRhIiwicGFyc2VJbnQiLCJkYXRhc2V0IiwiZmlsbSIsImlzQWN0aXZlIiwiZ2l2ZUJ0bnNBdHRyaWJ1dGUiLCJ0YWJpbmRleCIsInRyYWlsZXJCdG4iLCJzZWVNb3JlQnRuIiwic2V0QXR0cmlidXRlIiwidXNlckRhdGEiLCJwcmVmZXJyZWRMYW5ndWFnZSIsImlzTG9nZ2VkSW4iLCJsb2dnZWRJbiIsInByZXBlbmQiLCJhcHBlbmQiLCJ0aGVuIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiY2hlY2tBdXRob3JpemF0aW9uIl0sInNvdXJjZXMiOlsibWFpbi1wYWdlLmpzIl0sIm1hcHBpbmdzIjoiT0FDQ0EsUUFDQUMsaUJBQ0FDLHNCQUNBQyxlQUNBQyxjQUNBQyxrQkFDTSxzQkFDUEMsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUU3QyxNQUVNQyxFQUFVLENBQ2ZDLE9BQVEsTUFDUkMsUUFBUyxDQUNSQyxPQUFRLG1CQUNSQyxjQUNDLHlQQUdHQyxFQUF1QixJQUFJQyxJQUNqQyxJQUtJQyxFQUxBQyxFQUFpQixLQUlqQkMsRUFBUSxFQUdaLE1BNkJNQyxFQUFrQkMsTUFBT0MsRUFBTUMsS0FDcEMsTUFBTUMsRUFBTSx1REFBdURGLFVBQWFDLElBRWhGLElBQ0MsTUFBTUUsUUFBaUJDLE1BQU1GLEVBQUtkLEdBR2xDLGFBRm1CZSxFQUFTRSxNQUc3QixDQUFFLE1BQ0R0QixlQUFldUIsYUFBYUMsV0FBV0MsaUJBQWtCLFVBQzFELEdB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QUNoQzhDLEVBQWFMLEVBQUt6QyxjQUFjLDhCQUV0QzZDLEVBQVdFLGFBQWEsV0FBWUgsR0FDcENFLEVBQVdDLGFBQWEsV0FBWUgsSUE1S1YsTUFDMUIsTUFBTUksRUFBV2xHLFVBQ1gwQixFQUFld0UsR0FBVXhFLGFBQ3pCVyxFQUFrQjZELEdBQVVDLGtCQUM1QkMsRUFBYUYsR0FBVUcsU0FFdkJ0RCxFQUFZekMsU0FBUzRDLGNBQWMsY0FFcENnRCxHQUFhRSxHQUdqQnJELEVBQVV1RCxRQUFRckcsaUJBQWlCeUIsSUFDbkNxQixFQUFVd0QsT0FBT25HLGlCQUVqQitCLEVBQXVCTixFQUFzQlEsR0FBaUJtRSxLQUM1RHhELElBQ0E5QyxzQkFBc0I4QyxFQUFRdEIsRUFBY3FCLEdBQzVDRCxFQUFxQkMsRUFBV0MsR0FFaENqQyxFQUFvQmlFLFlBQVksS0FDL0JsQyxFQUFxQkMsRUFBV0MsSUFDOUJoQyxHQUVIbUUsRUFBaUJuQyxFQUFRRCxFQUFXaEMsTUFkdEMwRixPQUFPQyxTQUFTQyxLQUFPLEtBcUt6QkMsRUFDRCIsImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG5cdGdldERhdGEsXHJcblx0Y3JlYXRlQnJvd3NlUGFnZSxcclxuXHRjcmVhdGVNYWluSGVyb1NlY3Rpb24sXHJcblx0c2hvd0Vycm9yUG9wdXAsXHJcblx0c2hvd0JpZ0xvYWRlcixcclxuXHRoaWRlQmlnTG9hZGVyLFxyXG59IGZyb20gXCIuL2NvbXBvbmVudHMubWluLmpzXCI7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuXHQvLyBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL2Rpc2NvdmVyL21vdmllP2xhbmd1YWdlPXBsXHJcblx0Y29uc3QgQ0FST1VTRUxMX0xFTkdUSCA9IDU7XHJcblx0Y29uc3QgRklMTV9BTU9VTlRfUEVSX1BBR0UgPSAyMDtcclxuXHRjb25zdCBvcHRpb25zID0ge1xyXG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHRhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG5cdFx0XHRBdXRob3JpemF0aW9uOlxyXG5cdFx0XHRcdFwiQmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUo5LmV5SmhkV1FpT2lJek5UWXdaak00TWpVM05EUTFaR0UxWkdaa1lUWXhZekUwWVdNNFltTTRNeUlzSW01aVppSTZNVGMxT1RjMk5UQXpPQzQ1TkN3aWMzVmlJam9pTmpobE0yVXlNbVV5TmpZNU56WTRNemhsWXpJM056STVJaXdpYzJOdmNHVnpJanBiSW1Gd2FWOXlaV0ZrSWwwc0luWmxjbk5wYjI0aU9qRjkubnVHZkVqY2xKTGVwbXp6SGkyb21OaHAyOVRIZ3JKZjlOdjZENF9nVGR4QVwiLFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cdGNvbnN0IHByb2dyZXNzQmFySW50ZXJ2YWxzID0gbmV3IE1hcCgpO1xyXG5cdGxldCBjYXJvdXNlbGxTcGVlZCA9IDE1MDAwO1xyXG5cdGxldCBjYXJvdXNlbGxTdHJva2VSYW5nZSA9IDU7XHJcblx0bGV0IGludGVydmFsU3BlZWQgPSAoY2Fyb3VzZWxsU3BlZWQgKiBjYXJvdXNlbGxTdHJva2VSYW5nZSkgLyAxMDA7XHJcblx0bGV0IGNhcm91c2VsbFdpZHRoID0gMTAwO1xyXG5cdGxldCBpbmRleCA9IDA7XHJcblx0bGV0IGNhcm91c2VsbEludGVydmFsO1xyXG5cclxuXHRjb25zdCBjaGVja0F1dGhvcml6YXRpb24gPSAoKSA9PiB7XHJcblx0XHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHRcdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHVzZXJEYXRhPy50cmFuc2xhdGlvbnM7XHJcblx0XHRjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSB1c2VyRGF0YT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblx0XHRjb25zdCBpc0xvZ2dlZEluID0gdXNlckRhdGE/LmxvZ2dlZEluO1xyXG5cclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5cclxuXHRcdGlmICghdXNlckRhdGEgfHwgIWlzTG9nZ2VkSW4pIHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9cIjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnRhaW5lci5wcmVwZW5kKGNyZWF0ZUJyb3dzZVBhZ2UodHJhbnNsYXRpb25zKSk7XHJcblx0XHRcdGNvbnRhaW5lci5hcHBlbmQoc2hvd0JpZ0xvYWRlcigpKTtcclxuXHJcblx0XHRcdGNob29zZUZpbG1zVG9DYXJvdXNlbGwobG9hZEZpbG1zVG9DYXJvdXNlbGwsIGN1cnJlbnRMYW5ndWFnZSkudGhlbihcclxuXHRcdFx0XHQobW92aWVzKSA9PiB7XHJcblx0XHRcdFx0XHRjcmVhdGVNYWluSGVyb1NlY3Rpb24obW92aWVzLCB0cmFuc2xhdGlvbnMsIGNvbnRhaW5lcik7XHJcblx0XHRcdFx0XHRoYW5kbGVGaWxtc0Nhcm91c2VsbChjb250YWluZXIsIG1vdmllcyk7XHJcblxyXG5cdFx0XHRcdFx0Y2Fyb3VzZWxsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdFx0XHRcdH0sIGNhcm91c2VsbFNwZWVkKTtcclxuXHJcblx0XHRcdFx0XHRjaGFuZ2VDdXJyZW50SW1nKG1vdmllcywgY29udGFpbmVyLCBjYXJvdXNlbGxJbnRlcnZhbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGdldFBvcHVsYXJGaWxtcyA9IGFzeW5jIChsYW5nLCBwYWdlTnVtKSA9PiB7XHJcblx0XHRjb25zdCBVUkwgPSBgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9tb3ZpZS9wb3B1bGFyP2xhbmd1YWdlPSR7bGFuZ30mcGFnZT0ke3BhZ2VOdW19YDtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFVSTCwgb3B0aW9ucyk7XHJcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cCh0cmFuc2xhdGlvbnMuYnJvd3NlUGFnZS5sb2FkaW5nRGF0YUVycm9yLCBcIiNkYzRhMzRcIik7XHJcblx0XHR9XHJcblx0fTtcclxuXHRjb25zdCBsb2FkRmlsbXNUb0Nhcm91c2VsbCA9IGFzeW5jIChsYW5nLCBwYWdlTnVtKSA9PiB7XHJcblx0XHRjb25zdCByZXF1ZXN0cyA9IFtdO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IHBhZ2VOdW07IGkrKykge1xyXG5cdFx0XHRyZXF1ZXN0cy5wdXNoKGdldFBvcHVsYXJGaWxtcyhsYW5nLCBpKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwocmVxdWVzdHMpO1xyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VzO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKHRyYW5zbGF0aW9ucy5icm93c2VQYWdlLmxvYWRpbmdEYXRhRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjb25zdCBjaG9vc2VGaWxtc1RvQ2Fyb3VzZWxsID0gYXN5bmMgKGRhdGEsIGN1cnJlbnRMYW5ndWFnZSkgPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcGFnZXNEYXRhID0gYXdhaXQgZGF0YShjdXJyZW50TGFuZ3VhZ2UsIENBUk9VU0VMTF9MRU5HVEgpO1xyXG5cdFx0XHRjb25zdCByYW5kb21OdW1iZXIgPSBNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiBGSUxNX0FNT1VOVF9QRVJfUEFHRSk7XHJcblx0XHRcdGNvbnN0IGNob29zZW5Nb3ZpZXMgPSBwYWdlc0RhdGEubWFwKChwYWdlKSA9PiBwYWdlLnJlc3VsdHNbcmFuZG9tTnVtYmVyXSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gY2hvb3Nlbk1vdmllcztcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cCh0cmFuc2xhdGlvbnMuYnJvd3NlUGFnZS5sb2FkaW5nRGF0YUVycm9yLCBcIiNkYzRhMzRcIik7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRoaWRlQmlnTG9hZGVyKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQ0FST1VTRUxMXHJcblxyXG5cdGNvbnN0IGhhbmRsZUZpbG1zQ2Fyb3VzZWxsID0gKGNvbnRhaW5lciwgbW92aWVzKSA9PiB7XHJcblx0XHRjb25zdCBpbWFnZVNsaWRlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19pbWFnZXNcIik7XHJcblx0XHRjb25zdCBhbGxJbWFnZXMgPSBpbWFnZVNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmJyb3dzZS1tYWluX19pbWctYm94XCIpO1xyXG5cdFx0Y29uc3QgY2Fyb3VzZWxsQ29udHJvbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XCIuYnJvd3NlLW1haW5fX2Nhcm91c2VsbC1jb250cm9sc1wiXHJcblx0XHQpO1xyXG5cdFx0Ly8gT2JzxYJ1Z2Egb3N0YXRuaWVnbyBpIHBpZXJ3c3plZ28gZmlsbXVcclxuXHRcdGFsbEltYWdlcy5mb3JFYWNoKChpbWcpID0+IGltZy5jbGFzc0xpc3QucmVtb3ZlKFwiY3VycmVudFZpc2libGVcIikpO1xyXG5cclxuXHRcdGltYWdlU2xpZGVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7LWluZGV4ICogY2Fyb3VzZWxsV2lkdGh9JSlgO1xyXG5cdFx0aGFuZGxlQ2Fyb3VzZWxsQ29udHJvbHNTdGF0ZShpbmRleCwgY2Fyb3VzZWxsQ29udHJvbHMpO1xyXG5cclxuXHRcdGFsbEltYWdlc1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImN1cnJlbnRWaXNpYmxlXCIpO1xyXG5cclxuXHRcdGluZGV4Kys7XHJcblxyXG5cdFx0aWYgKGluZGV4ID4gbW92aWVzLmxlbmd0aCAtIDEpIGluZGV4ID0gMDtcclxuXHJcblx0XHRoYW5kbGVCdG5zVmlzaWJpbGl0eShjb250YWluZXIpO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZUNhcm91c2VsbENvbnRyb2xzU3RhdGUgPSAoaW5kZXgsIGNhcm91c2VsbENvbnRyb2xzQm94KSA9PiB7XHJcblx0XHRjb25zdCBhbGxDb250cm9sQnRucyA9XHJcblx0XHRcdGNhcm91c2VsbENvbnRyb2xzQm94LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnJvd3NlLW1haW5fX2J0blwiKTtcclxuXHRcdGNvbnN0IGN1cnJlbnRCdG4gPSBjYXJvdXNlbGxDb250cm9sc0JveC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRgLmJyb3dzZS1tYWluX19idG5bZGF0YS1pbWc9XCIke2luZGV4fVwiXWBcclxuXHRcdCk7XHJcblx0XHRjb25zdCBwcm9ncmVzc0JhciA9IGN1cnJlbnRCdG4ucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9fcHJvZ3Jlc3MtYmFyXCIpO1xyXG5cdFx0Y29uc3QgYWxsUHJvZ3Jlc3NCYXJzID0gY2Fyb3VzZWxsQ29udHJvbHNCb3gucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFx0XCIuYnJvd3NlLW1haW5fX3Byb2dyZXNzLWJhclwiXHJcblx0XHQpO1xyXG5cclxuXHRcdHByb2dyZXNzQmFySW50ZXJ2YWxzLmZvckVhY2goKGludGVydmFsKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKSk7XHJcblx0XHRwcm9ncmVzc0JhckludGVydmFscy5jbGVhcigpO1xyXG5cclxuXHRcdGFsbFByb2dyZXNzQmFycy5mb3JFYWNoKChiYXIpID0+IChiYXIuc3R5bGUud2lkdGggPSBcIjBcIikpO1xyXG5cclxuXHRcdGNoYW5nZVByb2dyZXNzQmFyKHByb2dyZXNzQmFyLCBpbmRleCk7XHJcblxyXG5cdFx0YWxsQ29udHJvbEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSk7XHJcblx0XHRjdXJyZW50QnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgY2hhbmdlUHJvZ3Jlc3NCYXIgPSAocHJvZ3Jlc3NCYXIsIGJ0bkluZGV4KSA9PiB7XHJcblx0XHRpZiAocHJvZ3Jlc3NCYXJJbnRlcnZhbHMuaGFzKGJ0bkluZGV4KSkge1xyXG5cdFx0XHRjbGVhckludGVydmFsKHByb2dyZXNzQmFySW50ZXJ2YWxzLmdldChidG5JbmRleCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCB3aWR0aCA9IDA7XHJcblx0XHRjb25zdCBwcm9ncmVzc0JhckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHR3aWR0aCArPSBjYXJvdXNlbGxTdHJva2VSYW5nZTtcclxuXHRcdFx0cHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBgJHt3aWR0aH0lYDtcclxuXHRcdFx0aWYgKHdpZHRoID49IDEwMCkge1xyXG5cdFx0XHRcdHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gXCIwXCI7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbChwcm9ncmVzc0JhckludGVydmFsKTtcclxuXHJcblx0XHRcdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuZGVsZXRlKGJ0bkluZGV4KTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgaW50ZXJ2YWxTcGVlZCk7XHJcblxyXG5cdFx0cHJvZ3Jlc3NCYXJJbnRlcnZhbHMuc2V0KGJ0bkluZGV4LCBwcm9ncmVzc0JhckludGVydmFsKTtcclxuXHR9O1xyXG5cdGNvbnN0IGNoYW5nZUN1cnJlbnRJbWcgPSAobW92aWVzLCBjb250YWluZXIsIGNhcm91c2VsbEludGVydmFsKSA9PiB7XHJcblx0XHRjb25zdCBjYXJvdXNlbGxDb250cm9scyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcIi5icm93c2UtbWFpbl9fY2Fyb3VzZWxsLWNvbnRyb2xzXCJcclxuXHRcdCk7XHJcblxyXG5cdFx0Y2Fyb3VzZWxsQ29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRcdGlmIChlLnRhcmdldC5tYXRjaGVzKFwiLmJyb3dzZS1tYWluX19idG5cIikpIHtcclxuXHRcdFx0XHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSByZXR1cm47XHJcblxyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoY2Fyb3VzZWxsSW50ZXJ2YWwpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBjdXJyZW50QnRuID0gZS50YXJnZXQ7XHJcblx0XHRcdFx0Y29uc3QgaW1nRGF0YSA9IHBhcnNlSW50KGN1cnJlbnRCdG4uZGF0YXNldC5pbWcpO1xyXG5cclxuXHRcdFx0XHRpbmRleCA9IGltZ0RhdGE7XHJcblx0XHRcdFx0aGFuZGxlRmlsbXNDYXJvdXNlbGwoY29udGFpbmVyLCBtb3ZpZXMpO1xyXG5cclxuXHRcdFx0XHRjYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0XHRcdGhhbmRsZUZpbG1zQ2Fyb3VzZWxsKGNvbnRhaW5lciwgbW92aWVzKTtcclxuXHRcdFx0XHR9LCBjYXJvdXNlbGxTcGVlZCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZUJ0bnNWaXNpYmlsaXR5ID0gKGNvbnRhaW5lcikgPT4ge1xyXG5cdFx0Y29uc3QgYWxsRmlsbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5icm93c2UtbWFpbl9faW1nLWJveFwiKTtcclxuXHJcblx0XHRhbGxGaWxtcy5mb3JFYWNoKChmaWxtKSA9PiB7XHJcblx0XHRcdGNvbnN0IGlzQWN0aXZlID0gZmlsbS5jbGFzc0xpc3QuY29udGFpbnMoXCJjdXJyZW50VmlzaWJsZVwiKTtcclxuXHRcdFx0Y29uc3QgdGFiaW5kZXggPSBpc0FjdGl2ZSA/IDAgOiAtMTtcclxuXHRcdFx0Z2l2ZUJ0bnNBdHRyaWJ1dGUoZmlsbSwgdGFiaW5kZXgpO1xyXG5cdFx0fSk7XHJcblx0fTtcclxuXHRjb25zdCBnaXZlQnRuc0F0dHJpYnV0ZSA9IChmaWxtLCB0YWJpbmRleCkgPT4ge1xyXG5cdFx0Y29uc3QgdHJhaWxlckJ0biA9IGZpbG0ucXVlcnlTZWxlY3RvcihcIi5icm93c2UtbWFpbl9fdHJhaWxlci1idG5cIik7XHJcblx0XHRjb25zdCBzZWVNb3JlQnRuID0gZmlsbS5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1tYWluX19zZWUtbW9yZS1idG5cIik7XHJcblxyXG5cdFx0dHJhaWxlckJ0bi5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCB0YWJpbmRleCk7XHJcblx0XHRzZWVNb3JlQnRuLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIHRhYmluZGV4KTtcclxuXHR9O1xyXG5cdGNoZWNrQXV0aG9yaXphdGlvbigpO1xyXG59KTtcclxuIl19
