import{createElement}from"./helpers.min.js";import{setUserPreference}from"./updateStateFunctions.min.js";const USERNAME="handsomeUser404",PASSWORD="5jksH9d.",usedColors=new Set;export const createLoginHeader=({header:{alt:{logo:e},aria:{logoLink:t,changeLanguageButton:a}}},n,r,o,l)=>{const i=createElement("header",["header"]),s=createElement("a",["header__logo","login-header__logo"],{href:"/","aria-label":`${t}`}),c=createElement("img",["header__logo-img","login-header__logo-img"],{src:"./src/icons/logo.svg",alt:`${e}`,width:"24",height:"24"}),d=createElement("span",["header__logo-text","login-header__logo-text"]);d.textContent="Stream",s.append(c,d),i.append(s);const p=createElement("button",["login-header__lang-select"],{"aria-label":`${a}`}),m=createElement("span",["login-header__lang-platform-lang"]),g=createElement("img",["login-header__lang-arrow"],{src:"./src/icons/chevron-down.svg",alt:"",width:"24",height:"24"}),_=createElement("ul",["login-header__lang-list"]);for(let e=0;e<n;e++){const t=createElement("li",["login-header__lang-choice"],{tabindex:0}),a=Object.keys(r)[e],n=Object.values(r)[e];t.dataset.lang=a,t.textContent=n,t.style.animationDelay=100*e+"ms",_.append(t)}return m.textContent=r[o],p.addEventListener("click",e=>{l.call(p,e,m)}),p.append(m,g,_),i.append(p),i};export const createLoginPage=({main:{text:{title:e,subtitle:t,description:a,button:n},placeholder:{username:r,password:o}}})=>{const l=createElement("main",["main"]),i=createElement("div",["wrapper"]),s=createElement("h1"),c=createElement("span",["main__title"]),d=createElement("span",["main__subtitle"]),p=createElement("p",["main__text"]),m=createElement("form",["main__form"]),g=createElement("input",["main__form-input","main__form-input--username"],{type:"text",placeholder:r}),_=createElement("input",["main__form-input","main__form-input--password"],{type:"password",placeholder:o}),f=createElement("button",["main__form-button"],{type:"submit"}),h=createElement("span",["main__form-button-text"]),u=createElement("p",["main__form-error-txt"]);return c.textContent=e,d.textContent=t,p.textContent=a,h.textContent=n,s.append(c,d),f.append(h),m.append(g,_,f,u),i.append(s,p,m),l.append(i),f.addEventListener("click",e=>{const t=JSON.parse?.(localStorage.getItem("userData"));handleLoginValidation(e,g,_,translations.main.text.errorRequired,translations.main.text.errorInvalid,USERNAME,PASSWORD,u)||(u.classList.remove("visible"),e.target.append(showSmallLoader()),e.target.disabled=!0,setTimeout(()=>{e.target.disabled=!1,hideSmallLoader(),setUserPreference("translations",translations,t),setUserPreference("loggedIn",!0,t),window.location.href="profiles.html"},3e3))}),l};const handleLoginValidation=(e,t,a,n,r,o,l,i)=>(e.preventDefault(),""===t.value.trim()||""===a.value.trim()?(i.classList.add("visible"),i.textContent=n,n):t.value.trim()!==o||a.value.trim()!==l?(e.target.disabled=!0,e.target.append(showSmallLoader()),i.classList.remove("visible"),setTimeout(()=>{i.classList.add("visible"),i.textContent=r,e.target.disabled=!1,hideSmallLoader()},3e3),r):null);export const showBigLoader=()=>{const e=createElement("div",["loading-area"]);return e.innerHTML='            <svg class="loader-big" viewBox="0 0 120 120" width="120" height="120">\n                <defs>\n                    <linearGradient id="loader-accent" x1="0%" y1="0%" x2="100%" y2="0%">\n                        <stop offset="0%" stop-color="#4da8da" stop-opacity="0.8" />\n                        <stop offset="70%" stop-color="#4da8da" stop-opacity="0.4" />\n                        <stop offset="100%" stop-color="#4da8da" stop-opacity="0" />\n                    </linearGradient>\n                </defs>\n                <circle class="loading-circle-big" r="35" cx="60" cy="60"></circle>\n            </svg>',e};export const hideBigLoader=()=>{const e=document.querySelector(".loading-area");e?.remove()};export const showSmallLoader=()=>{const e=createElement("div",["loading-area-small"]);return e.innerHTML='<svg class="loader-small" viewBox="0 0 120 120" width="120" height="120">\n                <defs>\n                    <linearGradient id="loader-accent-small" x1="0%" y1="0%" x2="100%" y2="0%">\n                        <stop offset="0%" stop-color="white" stop-opacity="0.8" />\n                        <stop offset="70%" stop-color="white" stop-opacity="0.3" />\n                        <stop offset="100%" stop-color="white" stop-opacity="0" />\n                    </linearGradient>\n                </defs>\n                <circle class="loading-circle-small" r="12" cx="60" cy="60"></circle>\n            </svg>',e};export const hideSmallLoader=()=>{document.querySelector(".loading-area-small").remove()};export const createProfilesPage=({profiles:{text:{title:e,addProfileInfo:t},aria:{addProfileBtn:a,userProfileBtn:n}}},r)=>{JSON.parse?.(localStorage.getItem("userData"));const o=document.querySelector(".container"),l=createElement("main",["main-profiles"]),i=createElement("div",["wrapper"]),s=createElement("h1",["main__title","main-profiles__title"]),c=createElement("div",["main-profiles__box"]);s.textContent=e,c.append(createProfileAddBtn(a,t,n,r,c)),i.append(s,c),l.append(i),o.append(l)};const createProfile=(e,t)=>{const a=JSON.parse?.(localStorage.getItem("userData"));let n,r;const o=["#dc4a34","#062E63","#FAC044"];if(3===usedColors.size)return;do{n=Math.trunc(Math.random()*o.length)}while(usedColors.has(n));usedColors.add(n),r=o[n];const l=createElement("div",["main-profiles__profile"]),i=createElement("div",["main-profiles__avatar"]),s=createElement("button",["main-profiles__btn"]),c=createElement("div",["main-profiles__user-info"]),d=createElement("input",["main-profiles__name"],{type:"text",readonly:!0,value:""}),p=createElement("button",["main-profiles__edit-name"],{"aria-label":e}),m=createElement("img",["main-profiles__edit-icon"],{width:"24",height:"24",loading:"lazy",alt:"",src:"./src/icons/edit.svg"});return s.innerHTML='<svg class="main-profiles__img" width="150" height="150" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">\n\t<circle cx="70" cy="70" r="8" fill="white" />\n\t<circle cx="130" cy="70" r="8" fill="white" />\n\t<path d="M60 110 Q100 150 140 110" stroke="white" stroke-width="6"\n\tfill="transparent" stroke-linecap="round" />\n\t</svg>',s.style.backgroundColor=r,i.append(s),p.append(m),c.append(d,p),l.append(i,c),t.push(l),console.log(t),setUserPreference("userProfiles",t,a),l},createProfileAddBtn=(e,t,a,n,r)=>{const o=createElement("div",["main-profiles__add-profile"]),l=createElement("div",["main-profiles__avatar"]),i=createElement("button",["main-profiles__btn","main-profiles__btn--add-profile"],{"aria-label":e}),s=createElement("img",["main-profiles__add-img"],{src:"./src/icons/add-profile.svg",loading:"lazy",alt:""}),c=createElement("span",["main-profiles__name"]);return c.textContent=t,i.append(s),l.append(i),o.append(l,c),i.addEventListener("click",()=>{const e=createProfile(a,n);e?r.append(e):alert("Osiągnięto maksymalną liczbę profilów!")}),o};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy5taW4uanMiLCJuYW1lcyI6WyJjcmVhdGVFbGVtZW50Iiwic2V0VXNlclByZWZlcmVuY2UiLCJVU0VSTkFNRSIsIlBBU1NXT1JEIiwidXNlZENvbG9ycyIsIlNldCIsImNyZWF0ZUxvZ2luSGVhZGVyIiwiaGVhZGVyIiwiYWx0IiwibG9nbyIsImFyaWEiLCJsb2dvTGluayIsImNoYW5nZUxhbmd1YWdlQnV0dG9uIiwibGFuZ0Ftb3VudCIsImxhbmdOYW1lcyIsImxhbmd1YWdlIiwiaGFuZGxlTGFuZ1NlbGVjdCIsInBhZ2VMb2dvIiwiaHJlZiIsImxvZ29JbWciLCJzcmMiLCJ3aWR0aCIsImhlaWdodCIsImxvZ29UZXh0IiwidGV4dENvbnRlbnQiLCJhcHBlbmQiLCJsYW5nU2VsZWN0IiwibGFuZ1BsYXRmb3JtTGFuZyIsImxhbmdBcnJvdyIsImxhbmdMaXN0IiwiaSIsImxhbmdDaG9pY2UiLCJ0YWJpbmRleCIsImRhdGEiLCJPYmplY3QiLCJrZXlzIiwidGV4dCIsInZhbHVlcyIsImRhdGFzZXQiLCJsYW5nIiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2FsbCIsImNyZWF0ZUxvZ2luUGFnZSIsIm1haW4iLCJ0aXRsZSIsInN1YnRpdGxlIiwiZGVzY3JpcHRpb24iLCJidXR0b24iLCJwbGFjZWhvbGRlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJtYWluQ29udGVudCIsIndyYXBwZXIiLCJsb2dpblRpdGxlIiwibG9naW5UaXRsZVRvcCIsImxvZ2luVGl0bGVCb3R0b20iLCJsb2dpblRleHQiLCJmb3JtIiwidXNlcm5hbWVJbnB1dCIsInR5cGUiLCJwYXNzd29yZElucHV0Iiwic3VibWl0QnRuIiwiYnV0dG9uVGV4dCIsImVycm9yVHh0IiwidXNlckRhdGEiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFuZGxlTG9naW5WYWxpZGF0aW9uIiwidHJhbnNsYXRpb25zIiwiZXJyb3JSZXF1aXJlZCIsImVycm9ySW52YWxpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRhcmdldCIsInNob3dTbWFsbExvYWRlciIsImRpc2FibGVkIiwic2V0VGltZW91dCIsImhpZGVTbWFsbExvYWRlciIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVxdWlyZUVycm9yIiwiaW52YWxpZEVycm9yIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsInRyaW0iLCJhZGQiLCJzaG93QmlnTG9hZGVyIiwibG9hZGluZ0FyZWEiLCJpbm5lckhUTUwiLCJoaWRlQmlnTG9hZGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlUHJvZmlsZXNQYWdlIiwicHJvZmlsZXMiLCJhZGRQcm9maWxlSW5mbyIsImFkZFByb2ZpbGVCdG4iLCJ1c2VyUHJvZmlsZUJ0biIsInVzZXJQcm9maWxlc0FycmF5IiwiY29udGFpbmVyIiwicHJvZmlsZXNQYWdlTWFpbiIsInByb2ZpbGVzVGl0bGUiLCJwcm9maWxlc0JveCIsImNyZWF0ZVByb2ZpbGVBZGRCdG4iLCJjcmVhdGVQcm9maWxlIiwiYXJpYUluZm8iLCJpbmRleCIsImNvbG9yIiwiY29sb3JzIiwic2l6ZSIsIk1hdGgiLCJ0cnVuYyIsInJhbmRvbSIsImxlbmd0aCIsImhhcyIsInVzZXJQcm9maWxlIiwidXNlckF2YXRhckJveCIsInVzZXJQcm9maWxlSW5mb0JveCIsInVzZXJQcm9maWxlSW5mbyIsInJlYWRvbmx5IiwiZWRpdFVzZXJJbmZvQnRuIiwiZWRpdFVzZXJJbmZvSWNvbiIsImxvYWRpbmciLCJiYWNrZ3JvdW5kQ29sb3IiLCJwdXNoIiwiY29uc29sZSIsImxvZyIsImluZm8iLCJ1c2VyQnRuQXJpYSIsImFkZFByb2ZpbGVCb3giLCJhZGRQcm9maWxlQXZhdGFyIiwiYWRkUHJvZmlsZVBsdXNJY29uIiwicHJvZmlsZSIsImFsZXJ0Il0sInNvdXJjZXMiOlsiY29tcG9uZW50cy5qcyJdLCJtYXBwaW5ncyI6Ik9BQVNBLGtCQUFxQiwwQkFD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RyxFQUU3Qi9CLEVBQWMzRSxPQUFPOEcsR0FDckJELEVBQWlCN0csT0FBTzJFLEdBQ3hCaUMsRUFBYzVHLE9BQU82RyxFQUFrQm5DLEdBRXZDQyxFQUFjMUQsaUJBQWlCLFFBQVMsS0FDdkMsTUFBTThGLEVBQVU1QixjQUFjd0IsRUFBYTlCLEdBRXZDa0MsRUFDSDlCLEVBQVlqRixPQUFPK0csR0FFbkJDLE1BQU0sNENBSURKIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwiLi9oZWxwZXJzLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBzZXRVc2VyUHJlZmVyZW5jZSB9IGZyb20gXCIuL3VwZGF0ZVN0YXRlRnVuY3Rpb25zLm1pbi5qc1wiO1xyXG5cclxuY29uc3QgVVNFUk5BTUUgPSBcImhhbmRzb21lVXNlcjQwNFwiO1xyXG5jb25zdCBQQVNTV09SRCA9IFwiNWprc0g5ZC5cIjtcclxuY29uc3QgdXNlZENvbG9ycyA9IG5ldyBTZXQoKTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUxvZ2luSGVhZGVyID0gKFxyXG5cdHtcclxuXHRcdGhlYWRlcjoge1xyXG5cdFx0XHRhbHQ6IHsgbG9nbyB9LFxyXG5cdFx0XHRhcmlhOiB7IGxvZ29MaW5rLCBjaGFuZ2VMYW5ndWFnZUJ1dHRvbiB9LFxyXG5cdFx0fSxcclxuXHR9LFxyXG5cdGxhbmdBbW91bnQsXHJcblx0bGFuZ05hbWVzLFxyXG5cdGxhbmd1YWdlLFxyXG5cdGhhbmRsZUxhbmdTZWxlY3RcclxuKSA9PiB7XHJcblx0Ly8gbG9nb1xyXG5cdGNvbnN0IGhlYWRlciA9IGNyZWF0ZUVsZW1lbnQoXCJoZWFkZXJcIiwgW1wiaGVhZGVyXCJdKTtcclxuXHRjb25zdCBwYWdlTG9nbyA9IGNyZWF0ZUVsZW1lbnQoXCJhXCIsIFtcImhlYWRlcl9fbG9nb1wiLCBcImxvZ2luLWhlYWRlcl9fbG9nb1wiXSwge1xyXG5cdFx0aHJlZjogXCIvXCIsXHJcblx0XHRcImFyaWEtbGFiZWxcIjogYCR7bG9nb0xpbmt9YCxcclxuXHR9KTtcclxuXHRjb25zdCBsb2dvSW1nID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiaW1nXCIsXHJcblx0XHRbXCJoZWFkZXJfX2xvZ28taW1nXCIsIFwibG9naW4taGVhZGVyX19sb2dvLWltZ1wiXSxcclxuXHRcdHtcclxuXHRcdFx0c3JjOiBcIi4vc3JjL2ljb25zL2xvZ28uc3ZnXCIsXHJcblx0XHRcdGFsdDogYCR7bG9nb31gLFxyXG5cdFx0XHR3aWR0aDogXCIyNFwiLFxyXG5cdFx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdH1cclxuXHQpO1xyXG5cdGNvbnN0IGxvZ29UZXh0ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XCJoZWFkZXJfX2xvZ28tdGV4dFwiLFxyXG5cdFx0XCJsb2dpbi1oZWFkZXJfX2xvZ28tdGV4dFwiLFxyXG5cdF0pO1xyXG5cdGxvZ29UZXh0LnRleHRDb250ZW50ID0gXCJTdHJlYW1cIjtcclxuXHRwYWdlTG9nby5hcHBlbmQobG9nb0ltZywgbG9nb1RleHQpO1xyXG5cdGhlYWRlci5hcHBlbmQocGFnZUxvZ28pO1xyXG5cdC8vIGVuZCBvZiBsb2dvXHJcblxyXG5cdC8vIGxhbmd1YWdlIHNlbGVjdG9yXHJcblx0Y29uc3QgbGFuZ1NlbGVjdCA9IGNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgW1wibG9naW4taGVhZGVyX19sYW5nLXNlbGVjdFwiXSwge1xyXG5cdFx0XCJhcmlhLWxhYmVsXCI6IGAke2NoYW5nZUxhbmd1YWdlQnV0dG9ufWAsXHJcblx0fSk7XHJcblx0Y29uc3QgbGFuZ1BsYXRmb3JtTGFuZyA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcclxuXHRcdFwibG9naW4taGVhZGVyX19sYW5nLXBsYXRmb3JtLWxhbmdcIixcclxuXHRdKTtcclxuXHRjb25zdCBsYW5nQXJyb3cgPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1hcnJvd1wiXSwge1xyXG5cdFx0c3JjOiBcIi4vc3JjL2ljb25zL2NoZXZyb24tZG93bi5zdmdcIixcclxuXHRcdGFsdDogXCJcIixcclxuXHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHR9KTtcclxuXHRjb25zdCBsYW5nTGlzdCA9IGNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctbGlzdFwiXSk7XHJcblxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGFuZ0Ftb3VudDsgaSsrKSB7XHJcblx0XHRjb25zdCBsYW5nQ2hvaWNlID0gY3JlYXRlRWxlbWVudChcImxpXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1jaG9pY2VcIl0sIHtcclxuXHRcdFx0dGFiaW5kZXg6IDAsXHJcblx0XHR9KTtcclxuXHRcdGNvbnN0IGRhdGEgPSBPYmplY3Qua2V5cyhsYW5nTmFtZXMpW2ldO1xyXG5cdFx0Y29uc3QgdGV4dCA9IE9iamVjdC52YWx1ZXMobGFuZ05hbWVzKVtpXTtcclxuXHJcblx0XHRsYW5nQ2hvaWNlLmRhdGFzZXQubGFuZyA9IGRhdGE7XHJcblx0XHRsYW5nQ2hvaWNlLnRleHRDb250ZW50ID0gdGV4dDtcclxuXHRcdGxhbmdDaG9pY2Uuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBpICogMTAwICsgXCJtc1wiO1xyXG5cdFx0bGFuZ0xpc3QuYXBwZW5kKGxhbmdDaG9pY2UpO1xyXG5cdH1cclxuXHJcblx0bGFuZ1BsYXRmb3JtTGFuZy50ZXh0Q29udGVudCA9IGxhbmdOYW1lc1tsYW5ndWFnZV07XHJcblxyXG5cdGxhbmdTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRoYW5kbGVMYW5nU2VsZWN0LmNhbGwobGFuZ1NlbGVjdCwgZSwgbGFuZ1BsYXRmb3JtTGFuZyk7XHJcblx0fSk7XHJcblxyXG5cdGxhbmdTZWxlY3QuYXBwZW5kKGxhbmdQbGF0Zm9ybUxhbmcsIGxhbmdBcnJvdywgbGFuZ0xpc3QpO1xyXG5cdGhlYWRlci5hcHBlbmQobGFuZ1NlbGVjdCk7XHJcblxyXG5cdHJldHVybiBoZWFkZXI7XHJcblx0Ly8gZW5kIG9mIGxhbmd1YWdlIHNlbGVjdG9yXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlTG9naW5QYWdlID0gKHtcclxuXHRtYWluOiB7XHJcblx0XHR0ZXh0OiB7IHRpdGxlLCBzdWJ0aXRsZSwgZGVzY3JpcHRpb24sIGJ1dHRvbiB9LFxyXG5cdFx0cGxhY2Vob2xkZXI6IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0sXHJcblx0fSxcclxufSkgPT4ge1xyXG5cdGNvbnN0IG1haW5Db250ZW50ID0gY3JlYXRlRWxlbWVudChcIm1haW5cIiwgW1wibWFpblwiXSk7XHJcblx0Y29uc3Qgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wid3JhcHBlclwiXSk7XHJcblx0Y29uc3QgbG9naW5UaXRsZSA9IGNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcclxuXHRjb25zdCBsb2dpblRpdGxlVG9wID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1wibWFpbl9fdGl0bGVcIl0pO1xyXG5cdGNvbnN0IGxvZ2luVGl0bGVCb3R0b20gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXCJtYWluX19zdWJ0aXRsZVwiXSk7XHJcblx0Y29uc3QgbG9naW5UZXh0ID0gY3JlYXRlRWxlbWVudChcInBcIiwgW1wibWFpbl9fdGV4dFwiXSk7XHJcblx0Y29uc3QgZm9ybSA9IGNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIFtcIm1haW5fX2Zvcm1cIl0pO1xyXG5cdGNvbnN0IHVzZXJuYW1lSW5wdXQgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJpbnB1dFwiLFxyXG5cdFx0W1wibWFpbl9fZm9ybS1pbnB1dFwiLCBcIm1haW5fX2Zvcm0taW5wdXQtLXVzZXJuYW1lXCJdLFxyXG5cdFx0eyB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IHVzZXJuYW1lIH1cclxuXHQpO1xyXG5cdGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJpbnB1dFwiLFxyXG5cdFx0W1wibWFpbl9fZm9ybS1pbnB1dFwiLCBcIm1haW5fX2Zvcm0taW5wdXQtLXBhc3N3b3JkXCJdLFxyXG5cdFx0eyB0eXBlOiBcInBhc3N3b3JkXCIsIHBsYWNlaG9sZGVyOiBwYXNzd29yZCB9XHJcblx0KTtcclxuXHRjb25zdCBzdWJtaXRCdG4gPSBjcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFtcIm1haW5fX2Zvcm0tYnV0dG9uXCJdLCB7XHJcblx0XHR0eXBlOiBcInN1Ym1pdFwiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGJ1dHRvblRleHQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXCJtYWluX19mb3JtLWJ1dHRvbi10ZXh0XCJdKTtcclxuXHJcblx0Y29uc3QgZXJyb3JUeHQgPSBjcmVhdGVFbGVtZW50KFwicFwiLCBbXCJtYWluX19mb3JtLWVycm9yLXR4dFwiXSk7XHJcblx0bG9naW5UaXRsZVRvcC50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG5cdGxvZ2luVGl0bGVCb3R0b20udGV4dENvbnRlbnQgPSBzdWJ0aXRsZTtcclxuXHRsb2dpblRleHQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuXHRidXR0b25UZXh0LnRleHRDb250ZW50ID0gYnV0dG9uO1xyXG5cclxuXHRsb2dpblRpdGxlLmFwcGVuZChsb2dpblRpdGxlVG9wLCBsb2dpblRpdGxlQm90dG9tKTtcclxuXHRzdWJtaXRCdG4uYXBwZW5kKGJ1dHRvblRleHQpO1xyXG5cdGZvcm0uYXBwZW5kKHVzZXJuYW1lSW5wdXQsIHBhc3N3b3JkSW5wdXQsIHN1Ym1pdEJ0biwgZXJyb3JUeHQpO1xyXG5cclxuXHR3cmFwcGVyLmFwcGVuZChsb2dpblRpdGxlLCBsb2dpblRleHQsIGZvcm0pO1xyXG5cdG1haW5Db250ZW50LmFwcGVuZCh3cmFwcGVyKTtcclxuXHJcblx0c3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdFx0Y29uc3QgdXNlckRhdGEgPSBKU09OLnBhcnNlPy4obG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyRGF0YVwiKSk7XHJcblxyXG5cdFx0Y29uc3QgcmVzdWx0cyA9IGhhbmRsZUxvZ2luVmFsaWRhdGlvbihcclxuXHRcdFx0ZSxcclxuXHRcdFx0dXNlcm5hbWVJbnB1dCxcclxuXHRcdFx0cGFzc3dvcmRJbnB1dCxcclxuXHRcdFx0dHJhbnNsYXRpb25zLm1haW4udGV4dC5lcnJvclJlcXVpcmVkLFxyXG5cdFx0XHR0cmFuc2xhdGlvbnMubWFpbi50ZXh0LmVycm9ySW52YWxpZCxcclxuXHRcdFx0VVNFUk5BTUUsXHJcblx0XHRcdFBBU1NXT1JELFxyXG5cdFx0XHRlcnJvclR4dFxyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAoIXJlc3VsdHMpIHtcclxuXHRcdFx0ZXJyb3JUeHQuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XHJcblx0XHRcdGUudGFyZ2V0LmFwcGVuZChzaG93U21hbGxMb2FkZXIoKSk7XHJcblx0XHRcdGUudGFyZ2V0LmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdGUudGFyZ2V0LmRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0aGlkZVNtYWxsTG9hZGVyKCk7XHJcblxyXG5cdFx0XHRcdHNldFVzZXJQcmVmZXJlbmNlKFwidHJhbnNsYXRpb25zXCIsIHRyYW5zbGF0aW9ucywgdXNlckRhdGEpO1xyXG5cdFx0XHRcdHNldFVzZXJQcmVmZXJlbmNlKFwibG9nZ2VkSW5cIiwgdHJ1ZSwgdXNlckRhdGEpO1xyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJwcm9maWxlcy5odG1sXCI7IC8vIHByemVqxZtjaWUgbmEgc3Ryb27EmSB6IHByb2ZpbGFtaVxyXG5cdFx0XHR9LCAzMDAwKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIG1haW5Db250ZW50O1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTG9naW5WYWxpZGF0aW9uID0gKFxyXG5cdGUsXHJcblx0dXNlcm5hbWVJbnB1dCxcclxuXHRwYXNzd29yZElucHV0LFxyXG5cdHJlcXVpcmVFcnJvcixcclxuXHRpbnZhbGlkRXJyb3IsXHJcblx0dXNlcm5hbWUsXHJcblx0cGFzc3dvcmQsXHJcblx0ZXJyb3JUeHRcclxuKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRpZiAodXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCkgPT09IFwiXCIgfHwgcGFzc3dvcmRJbnB1dC52YWx1ZS50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdGVycm9yVHh0LmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpO1xyXG5cdFx0ZXJyb3JUeHQudGV4dENvbnRlbnQgPSByZXF1aXJlRXJyb3I7XHJcblx0XHRyZXR1cm4gcmVxdWlyZUVycm9yO1xyXG5cdH0gZWxzZSBpZiAoXHJcblx0XHR1c2VybmFtZUlucHV0LnZhbHVlLnRyaW0oKSAhPT0gdXNlcm5hbWUgfHxcclxuXHRcdHBhc3N3b3JkSW5wdXQudmFsdWUudHJpbSgpICE9PSBwYXNzd29yZFxyXG5cdCkge1xyXG5cdFx0ZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0ZS50YXJnZXQuYXBwZW5kKHNob3dTbWFsbExvYWRlcigpKTtcclxuXHRcdGVycm9yVHh0LmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRlcnJvclR4dC5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTtcclxuXHRcdFx0ZXJyb3JUeHQudGV4dENvbnRlbnQgPSBpbnZhbGlkRXJyb3I7XHJcblxyXG5cdFx0XHRlLnRhcmdldC5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0aGlkZVNtYWxsTG9hZGVyKCk7XHJcblx0XHR9LCAzMDAwKTtcclxuXHRcdHJldHVybiBpbnZhbGlkRXJyb3I7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzaG93QmlnTG9hZGVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IGxvYWRpbmdBcmVhID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJsb2FkaW5nLWFyZWFcIl0pO1xyXG5cdGxvYWRpbmdBcmVhLmlubmVySFRNTCA9IGAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwibG9hZGVyLWJpZ1wiIHZpZXdCb3g9XCIwIDAgMTIwIDEyMFwiIHdpZHRoPVwiMTIwXCIgaGVpZ2h0PVwiMTIwXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGVmcz5cclxuICAgICAgICAgICAgICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJsb2FkZXItYWNjZW50XCIgeDE9XCIwJVwiIHkxPVwiMCVcIiB4Mj1cIjEwMCVcIiB5Mj1cIjAlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjAlXCIgc3RvcC1jb2xvcj1cIiM0ZGE4ZGFcIiBzdG9wLW9wYWNpdHk9XCIwLjhcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCI3MCVcIiBzdG9wLWNvbG9yPVwiIzRkYThkYVwiIHN0b3Atb3BhY2l0eT1cIjAuNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjEwMCVcIiBzdG9wLWNvbG9yPVwiIzRkYThkYVwiIHN0b3Atb3BhY2l0eT1cIjBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGluZWFyR3JhZGllbnQ+XHJcbiAgICAgICAgICAgICAgICA8L2RlZnM+XHJcbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzPVwibG9hZGluZy1jaXJjbGUtYmlnXCIgcj1cIjM1XCIgY3g9XCI2MFwiIGN5PVwiNjBcIj48L2NpcmNsZT5cclxuICAgICAgICAgICAgPC9zdmc+YDtcclxuXHRyZXR1cm4gbG9hZGluZ0FyZWE7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBoaWRlQmlnTG9hZGVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IGxvYWRpbmdBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2FkaW5nLWFyZWFcIik7XHJcblx0bG9hZGluZ0FyZWE/LnJlbW92ZSgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNob3dTbWFsbExvYWRlciA9ICgpID0+IHtcclxuXHRjb25zdCBsb2FkaW5nQXJlYSA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wibG9hZGluZy1hcmVhLXNtYWxsXCJdKTtcclxuXHRsb2FkaW5nQXJlYS5pbm5lckhUTUwgPSBgPHN2ZyBjbGFzcz1cImxvYWRlci1zbWFsbFwiIHZpZXdCb3g9XCIwIDAgMTIwIDEyMFwiIHdpZHRoPVwiMTIwXCIgaGVpZ2h0PVwiMTIwXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGVmcz5cclxuICAgICAgICAgICAgICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJsb2FkZXItYWNjZW50LXNtYWxsXCIgeDE9XCIwJVwiIHkxPVwiMCVcIiB4Mj1cIjEwMCVcIiB5Mj1cIjAlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjAlXCIgc3RvcC1jb2xvcj1cIndoaXRlXCIgc3RvcC1vcGFjaXR5PVwiMC44XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiNzAlXCIgc3RvcC1jb2xvcj1cIndoaXRlXCIgc3RvcC1vcGFjaXR5PVwiMC4zXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMTAwJVwiIHN0b3AtY29sb3I9XCJ3aGl0ZVwiIHN0b3Atb3BhY2l0eT1cIjBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGluZWFyR3JhZGllbnQ+XHJcbiAgICAgICAgICAgICAgICA8L2RlZnM+XHJcbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzPVwibG9hZGluZy1jaXJjbGUtc21hbGxcIiByPVwiMTJcIiBjeD1cIjYwXCIgY3k9XCI2MFwiPjwvY2lyY2xlPlxyXG4gICAgICAgICAgICA8L3N2Zz5gO1xyXG5cclxuXHRyZXR1cm4gbG9hZGluZ0FyZWE7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBoaWRlU21hbGxMb2FkZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgbG9hZGluZ0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvYWRpbmctYXJlYS1zbWFsbFwiKTtcclxuXHRsb2FkaW5nQXJlYS5yZW1vdmUoKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQcm9maWxlc1BhZ2UgPSAoXHJcblx0e1xyXG5cdFx0cHJvZmlsZXM6IHtcclxuXHRcdFx0dGV4dDogeyB0aXRsZSwgYWRkUHJvZmlsZUluZm8gfSxcclxuXHRcdFx0YXJpYTogeyBhZGRQcm9maWxlQnRuLCB1c2VyUHJvZmlsZUJ0biB9LFxyXG5cdFx0fSxcclxuXHR9LFxyXG5cdHVzZXJQcm9maWxlc0FycmF5XHJcbikgPT4ge1xyXG5cdGNvbnN0IHVzZXJEYXRhID0gSlNPTi5wYXJzZT8uKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckRhdGFcIikpO1xyXG5cdGNvbnN0IHVzZXJQcm9maWxlc0FyciA9IHVzZXJEYXRhPy51c2VyUHJvZmlsZXM7XHJcblxyXG5cdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5cdGNvbnN0IHByb2ZpbGVzUGFnZU1haW4gPSBjcmVhdGVFbGVtZW50KFwibWFpblwiLCBbXCJtYWluLXByb2ZpbGVzXCJdKTtcclxuXHRjb25zdCB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJ3cmFwcGVyXCJdKTtcclxuXHRjb25zdCBwcm9maWxlc1RpdGxlID0gY3JlYXRlRWxlbWVudChcImgxXCIsIFtcclxuXHRcdFwibWFpbl9fdGl0bGVcIixcclxuXHRcdFwibWFpbi1wcm9maWxlc19fdGl0bGVcIixcclxuXHRdKTtcclxuXHRjb25zdCBwcm9maWxlc0JveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wibWFpbi1wcm9maWxlc19fYm94XCJdKTtcclxuXHJcblx0cHJvZmlsZXNUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG5cclxuXHQvLyBpZiAoIXVzZXJEYXRhIHx8ICF1c2VyUHJvZmlsZXNBcnIgfHwgdXNlclByb2ZpbGVzQXJyLmxlbmd0aCA9PT0gMCkge1xyXG5cclxuXHQvLyB9XHJcblxyXG5cdHByb2ZpbGVzQm94LmFwcGVuZChcclxuXHRcdGNyZWF0ZVByb2ZpbGVBZGRCdG4oXHJcblx0XHRcdGFkZFByb2ZpbGVCdG4sXHJcblx0XHRcdGFkZFByb2ZpbGVJbmZvLFxyXG5cdFx0XHR1c2VyUHJvZmlsZUJ0bixcclxuXHRcdFx0dXNlclByb2ZpbGVzQXJyYXksXHJcblx0XHRcdHByb2ZpbGVzQm94XHJcblx0XHQpXHJcblx0KTtcclxuXHR3cmFwcGVyLmFwcGVuZChwcm9maWxlc1RpdGxlLCBwcm9maWxlc0JveCk7XHJcblx0cHJvZmlsZXNQYWdlTWFpbi5hcHBlbmQod3JhcHBlcik7XHJcblxyXG5cdGNvbnRhaW5lci5hcHBlbmQocHJvZmlsZXNQYWdlTWFpbik7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVQcm9maWxlID0gKGFyaWFJbmZvLCB1c2VyUHJvZmlsZXNBcnJheSkgPT4ge1xyXG5cdGNvbnN0IHVzZXJEYXRhID0gSlNPTi5wYXJzZT8uKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckRhdGFcIikpO1xyXG5cdGxldCBpbmRleDtcclxuXHRsZXQgY29sb3I7XHJcblx0Y29uc3QgY29sb3JzID0gW1wiI2RjNGEzNFwiLCBcIiMwNjJFNjNcIiwgXCIjRkFDMDQ0XCJdO1xyXG5cclxuXHRpZiAodXNlZENvbG9ycy5zaXplID09PSAzKSByZXR1cm47XHJcblxyXG5cdGRvIHtcclxuXHRcdGluZGV4ID0gTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpICogY29sb3JzLmxlbmd0aCk7XHJcblx0fSB3aGlsZSAodXNlZENvbG9ycy5oYXMoaW5kZXgpKTtcclxuXHJcblx0dXNlZENvbG9ycy5hZGQoaW5kZXgpO1xyXG5cdGNvbG9yID0gY29sb3JzW2luZGV4XTtcclxuXHJcblx0Y29uc3QgdXNlclByb2ZpbGUgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX3Byb2ZpbGVcIl0pO1xyXG5cdGNvbnN0IHVzZXJBdmF0YXJCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX2F2YXRhclwiXSk7XHJcblx0Y29uc3QgdXNlclByb2ZpbGVCdG4gPSBjcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFtcIm1haW4tcHJvZmlsZXNfX2J0blwiXSk7XHJcblxyXG5cdGNvbnN0IHVzZXJQcm9maWxlSW5mb0JveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wibWFpbi1wcm9maWxlc19fdXNlci1pbmZvXCJdKTtcclxuXHRjb25zdCB1c2VyUHJvZmlsZUluZm8gPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgW1wibWFpbi1wcm9maWxlc19fbmFtZVwiXSwge1xyXG5cdFx0dHlwZTogXCJ0ZXh0XCIsXHJcblx0XHRyZWFkb25seTogdHJ1ZSxcclxuXHRcdHZhbHVlOiBcIlwiLCAvLyBkbyB1enVwZcWCbmllbmlhXHJcblx0fSk7XHJcblx0Y29uc3QgZWRpdFVzZXJJbmZvQnRuID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiYnV0dG9uXCIsXHJcblx0XHRbXCJtYWluLXByb2ZpbGVzX19lZGl0LW5hbWVcIl0sXHJcblx0XHR7IFwiYXJpYS1sYWJlbFwiOiBhcmlhSW5mbyB9XHJcblx0KTtcclxuXHRjb25zdCBlZGl0VXNlckluZm9JY29uID0gY3JlYXRlRWxlbWVudChcImltZ1wiLCBbXCJtYWluLXByb2ZpbGVzX19lZGl0LWljb25cIl0sIHtcclxuXHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdFx0c3JjOiBcIi4vc3JjL2ljb25zL2VkaXQuc3ZnXCIsXHJcblx0fSk7XHJcblxyXG5cdHVzZXJQcm9maWxlQnRuLmlubmVySFRNTCA9IGA8c3ZnIGNsYXNzPVwibWFpbi1wcm9maWxlc19faW1nXCIgd2lkdGg9XCIxNTBcIiBoZWlnaHQ9XCIxNTBcIiB2aWV3Qm94PVwiMCAwIDIwMCAyMDBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XHJcblx0PGNpcmNsZSBjeD1cIjcwXCIgY3k9XCI3MFwiIHI9XCI4XCIgZmlsbD1cIndoaXRlXCIgLz5cclxuXHQ8Y2lyY2xlIGN4PVwiMTMwXCIgY3k9XCI3MFwiIHI9XCI4XCIgZmlsbD1cIndoaXRlXCIgLz5cclxuXHQ8cGF0aCBkPVwiTTYwIDExMCBRMTAwIDE1MCAxNDAgMTEwXCIgc3Ryb2tlPVwid2hpdGVcIiBzdHJva2Utd2lkdGg9XCI2XCJcclxuXHRmaWxsPVwidHJhbnNwYXJlbnRcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgLz5cclxuXHQ8L3N2Zz5gO1xyXG5cdHVzZXJQcm9maWxlQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yO1xyXG5cclxuXHR1c2VyQXZhdGFyQm94LmFwcGVuZCh1c2VyUHJvZmlsZUJ0bik7XHJcblx0ZWRpdFVzZXJJbmZvQnRuLmFwcGVuZChlZGl0VXNlckluZm9JY29uKTtcclxuXHR1c2VyUHJvZmlsZUluZm9Cb3guYXBwZW5kKHVzZXJQcm9maWxlSW5mbywgZWRpdFVzZXJJbmZvQnRuKTtcclxuXHR1c2VyUHJvZmlsZS5hcHBlbmQodXNlckF2YXRhckJveCwgdXNlclByb2ZpbGVJbmZvQm94KTtcclxuXHJcblx0dXNlclByb2ZpbGVzQXJyYXkucHVzaCh1c2VyUHJvZmlsZSk7IC8vIGRvZGF3YW5pZSBkbyB0YWJsaWN5IHogcHJvZmlsYW1pXHJcblx0Y29uc29sZS5sb2codXNlclByb2ZpbGVzQXJyYXkpO1xyXG5cclxuXHRzZXRVc2VyUHJlZmVyZW5jZShcInVzZXJQcm9maWxlc1wiLCB1c2VyUHJvZmlsZXNBcnJheSwgdXNlckRhdGEpO1xyXG5cclxuXHRyZXR1cm4gdXNlclByb2ZpbGU7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVQcm9maWxlQWRkQnRuID0gKFxyXG5cdGFyaWFJbmZvLFxyXG5cdGluZm8sXHJcblx0dXNlckJ0bkFyaWEsXHJcblx0dXNlclByb2ZpbGVzQXJyYXksXHJcblx0cHJvZmlsZXNCb3hcclxuKSA9PiB7XHJcblx0Y29uc3QgYWRkUHJvZmlsZUJveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wibWFpbi1wcm9maWxlc19fYWRkLXByb2ZpbGVcIl0pO1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVBdmF0YXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX2F2YXRhclwiXSk7XHJcblx0Y29uc3QgYWRkUHJvZmlsZUJ0biA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImJ1dHRvblwiLFxyXG5cdFx0W1wibWFpbi1wcm9maWxlc19fYnRuXCIsIFwibWFpbi1wcm9maWxlc19fYnRuLS1hZGQtcHJvZmlsZVwiXSxcclxuXHRcdHsgXCJhcmlhLWxhYmVsXCI6IGFyaWFJbmZvIH1cclxuXHQpO1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVQbHVzSWNvbiA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wibWFpbi1wcm9maWxlc19fYWRkLWltZ1wiXSwge1xyXG5cdFx0c3JjOiBcIi4vc3JjL2ljb25zL2FkZC1wcm9maWxlLnN2Z1wiLFxyXG5cdFx0bG9hZGluZzogXCJsYXp5XCIsXHJcblx0XHRhbHQ6IFwiXCIsXHJcblx0fSk7XHJcblx0Y29uc3QgYWRkUHJvZmlsZUluZm8gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXCJtYWluLXByb2ZpbGVzX19uYW1lXCJdKTtcclxuXHJcblx0YWRkUHJvZmlsZUluZm8udGV4dENvbnRlbnQgPSBpbmZvO1xyXG5cclxuXHRhZGRQcm9maWxlQnRuLmFwcGVuZChhZGRQcm9maWxlUGx1c0ljb24pO1xyXG5cdGFkZFByb2ZpbGVBdmF0YXIuYXBwZW5kKGFkZFByb2ZpbGVCdG4pO1xyXG5cdGFkZFByb2ZpbGVCb3guYXBwZW5kKGFkZFByb2ZpbGVBdmF0YXIsIGFkZFByb2ZpbGVJbmZvKTtcclxuXHJcblx0YWRkUHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0Y29uc3QgcHJvZmlsZSA9IGNyZWF0ZVByb2ZpbGUodXNlckJ0bkFyaWEsIHVzZXJQcm9maWxlc0FycmF5KTtcclxuXHJcblx0XHRpZiAocHJvZmlsZSkge1xyXG5cdFx0XHRwcm9maWxlc0JveC5hcHBlbmQocHJvZmlsZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRhbGVydChcIk9zacSFZ25pxJl0byBtYWtzeW1hbG7EhSBsaWN6YsSZIHByb2ZpbMOzdyFcIik7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdHJldHVybiBhZGRQcm9maWxlQm94O1xyXG59O1xyXG4iXX0=
