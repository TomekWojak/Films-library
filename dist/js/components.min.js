import{verifyCredentials}from"./firebase-auth.min.js";import{createElement,getImageUrl}from"./helpers.min.js";import{setUserPreference}from"./updateStateFunctions.min.js";const HIDE_POPUP_TIME=2500,options={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}};export const getData=()=>{try{const e=localStorage.getItem("userData");if(!e)return null;const t=JSON.parse(e);if("object"!=typeof t||null===t)throw showErrorPopup("Invalid user data. Resetting storage.","#dc4a34"),new Error("Invalid data structure");return t}catch{return localStorage.removeItem("userData"),showErrorPopup("Error accessing user data. Please try again.","#dc4a34"),{}}};const getCurrentDate=()=>(new Date).getFullYear();export const createFooter=({header:{alt:{logo:e}}})=>{const t=getCurrentDate(),r=createElement("footer",["browse-footer"]),a=createElement("span",["browse-footer__logo"]),n=createElement("img",["browse-footer__img"],{src:"./src/icons/logo.svg",alt:`${e}`,width:"24",height:"24"}),o=createElement("p",["browse-footer__info"]);return a.textContent="Stream",a.prepend(n),o.textContent=`Â©${t} Stream corporation | All rights reserved.`,r.append(a,o),r};export const createLoginHeader=({header:{alt:{logo:e},aria:{logoLink:t,changeLanguageButton:r}}},a,n,o,i)=>{const s=createElement("header",["header"]),l=createElement("a",["header__logo","login-header__logo"],{href:"/","aria-label":`${t}`}),c=createElement("img",["header__logo-img","login-header__logo-img"],{src:"./src/icons/logo.svg",alt:`${e}`,width:"24",height:"24"}),d=createElement("span",["header__logo-text","login-header__logo-text"]);d.textContent="Stream",l.append(c,d),s.append(l);const m=createElement("button",["login-header__lang-select"],{"aria-label":`${r}`}),p=createElement("span",["login-header__lang-platform-lang"]),g=createElement("img",["login-header__lang-arrow"],{src:"./src/icons/chevron-down.svg",alt:"",width:"24",height:"24"}),_=createElement("ul",["login-header__lang-list"]);for(let e=0;e<a;e++){const t=createElement("li",["login-header__lang-choice"],{tabindex:0}),r=Object.keys(n)[e],a=Object.values(n)[e];t.dataset.lang=r,t.textContent=a,t.style.animationDelay=100*e+"ms",_.append(t)}return p.textContent=n[o],m.addEventListener("click",e=>{i.call(m,e,p)}),m.append(p,g,_),s.append(m),s};export const createLoginPage=({main:{text:{title:e,subtitle:t,description:r,button:a},placeholder:{username:n,password:o}}})=>{const i=createElement("main",["main"]),s=createElement("div",["wrapper"]),l=createElement("h1"),c=createElement("span",["main__title"]),d=createElement("span",["main__subtitle"]),m=createElement("p",["main__text"]),p=createElement("form",["main__form"]),g=createElement("input",["main__form-input","main__form-input--username"],{type:"text",placeholder:n,value:"handsomeUser404@test.com"}),_=createElement("input",["main__form-input","main__form-input--password"],{type:"password",placeholder:o,value:"123456789"}),h=createElement("button",["main__form-button"],{type:"submit"}),u=createElement("span",["main__form-button-text"]),f=createElement("p",["main__form-error-txt"]);return c.textContent=e,d.textContent=t,m.textContent=r,u.textContent=a,l.append(c,d),h.append(u),p.append(g,_,h,f),s.append(l,m,p),i.append(s),h.addEventListener("click",e=>{const t=getData(),r=t?.preferredLanguage;r||setUserPreference("preferredLanguage","pl",t),handleLoginValidation(e,g,_,translations.main.text.errorRequired,translations.main.text.errorInvalid,f).then(e=>{e||(setUserPreference("translations",translations,t),setUserPreference("loggedIn",!0,t),window.location.href="profiles.html")})}),i};const handleLoginValidation=async(e,t,r,a,n,o)=>{if(e.preventDefault(),""===t.value.trim()||""===r.value.trim())return o.classList.add("visible"),o.textContent=a,a;const i=t.value.trim(),s=r.value.trim();e.target.disabled=!0,e.target.append(showSmallLoader()),o.classList.remove("visible");const l=await verifyCredentials(i,s);return hideSmallLoader(),e.target.disabled=!1,l.success?null:(o.classList.add("visible"),o.textContent=n,n)};export const showBigLoader=()=>{const e=createElement("div",["loading-area"]);return e.innerHTML='            <svg class="loader-big" viewBox="0 0 120 120" width="120" height="120">\n                <defs>\n                    <linearGradient id="loader-accent" x1="0%" y1="0%" x2="100%" y2="0%">\n                        <stop offset="0%" stop-color="#4da8da" stop-opacity="0.8" />\n                        <stop offset="70%" stop-color="#4da8da" stop-opacity="0.4" />\n                        <stop offset="100%" stop-color="#4da8da" stop-opacity="0" />\n                    </linearGradient>\n                </defs>\n                <circle class="loading-circle-big" r="35" cx="60" cy="60"></circle>\n            </svg>',e};export const hideBigLoader=()=>{const e=document.querySelector(".loading-area");e?.remove()};export const showSmallLoader=()=>{const e=createElement("div",["loading-area-small"]);return e.innerHTML='<svg class="loader-small" viewBox="0 0 120 120" width="120" height="120">\n                <defs>\n                    <linearGradient id="loader-accent-small" x1="0%" y1="0%" x2="100%" y2="0%">\n                        <stop offset="0%" stop-color="white" stop-opacity="0.8" />\n                        <stop offset="70%" stop-color="white" stop-opacity="0.3" />\n                        <stop offset="100%" stop-color="white" stop-opacity="0" />\n                    </linearGradient>\n                </defs>\n                <circle class="loading-circle-small" r="12" cx="60" cy="60"></circle>\n            </svg>',e};export const hideSmallLoader=()=>{document.querySelector(".loading-area-small").remove()};export const createProfilesPage=({profiles:{text:{title:e,addProfileInfo:t},aria:{addProfileBtn:r,userProfileBtn:a,userBtnCustomize:n,removeUserInfo:o}},errorPopup:{text:{maxProfiles:i,emptyField:s}}})=>{const l=getData(),c=l?.userProfiles,d=document.querySelector(".container");d.append(showBigLoader()),setTimeout(()=>{const l=createElement("main",["main-profiles"]),m=createElement("div",["wrapper"]),p=createElement("h1",["main__title","main-profiles__title"]),g=createElement("div",["main-profiles__box"]);if(p.textContent=e,c&&0!==Object.keys(c).length)for(const e in c)g.append(createProfile(a,n,n,s,o,e,c[e]));g.append(createProfileAddBtn(r,t,a,g,n,n,i,s,o)),m.append(p,g),l.append(m),d.append(l),hideBigLoader()},500)};const createProfile=(e,t,r,a,n,o=null,i=null)=>{const s=getData(),l=s?.userProfiles||{};if(null===s)return showErrorPopup("An unexpected error occurred","#dc4a34"),void setTimeout(()=>{window.location.reload()},2500);let c,d,m;const p=["#dc4a34","#062E63","#FAC044"];if(o){d=o,m=i.name;c=p[parseInt(d.split("-").pop())-1]}else{if(Object.keys(l).length>=3)return;let e=1;for(;l[`user-profile-${e}`];)e++;d=`user-profile-${e}`,m=`Handsome User ${e}`,c=p[e-1]}const g=createElement("div",["main-profiles__profile"]),_=createElement("div",["main-profiles__avatar"]),h=createElement("button",["main-profiles__btn"],{"aria-label":e,"data-id":d}),u=createElement("div",["main-profiles__user-info"]),f=createElement("input",["main-profiles__name"],{type:"text",readonly:!0,value:m}),b=createElement("span",["name-border"]),w=createElement("button",["main-profiles__edit-name"],{"aria-label":t}),E=createElement("button",["main-profiles__remove-user"],{"aria-label":n}),v=createElement("img",["main-profiles__remove-icon"],{width:"24",height:"24",loading:"lazy",alt:"",src:"./src/icons/remove-profile-icon.svg"}),x=createElement("img",["main-profiles__edit-icon"],{width:"24",height:"24",loading:"lazy",alt:"",src:"./src/icons/edit.svg"});if(h.innerHTML='<svg class="main-profiles__img" width="150" height="150" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">\n    <circle cx="70" cy="70" r="8" fill="white" />\n    <circle cx="130" cy="70" r="8" fill="white" />\n    <path d="M60 110 Q100 150 140 110" stroke="white" stroke-width="6"\n    fill="transparent" stroke-linecap="round" />\n    </svg>',h.style.backgroundColor=c,_.append(h),w.append(x),E.append(v),u.append(f,b,w,E),g.append(_,u),!o){const e={...l,[d]:{name:m}};setUserPreference("userProfiles",e,s)}return w.addEventListener("click",e=>{editUsername(e,u,r,a)}),E.addEventListener("click",e=>{removeUser(e)}),f.addEventListener("keydown",e=>{"Enter"===e.key&&saveUsername(e,a)}),h.addEventListener("click",e=>setCurrentProfile(e)),g.classList.add("visible"),g},setCurrentProfile=e=>{const t=getData(),r=e.target.dataset.id;setUserPreference("currentProfile",r,t),window.location.href="browse.html"},createProfileAddBtn=(e,t,r,a,n,o,i,s,l)=>{const c=createElement("div",["main-profiles__add-profile"]),d=createElement("div",["main-profiles__avatar"]),m=createElement("button",["main-profiles__btn","main-profiles__btn--add-profile"],{"aria-label":e}),p=createElement("img",["main-profiles__add-img"],{src:"./src/icons/add-profile.svg",loading:"lazy",alt:""}),g=createElement("span",["main-profiles__name"]);return g.textContent=t,m.append(p),d.append(m),c.append(d,g),m.addEventListener("click",()=>{const e=getData(),t=e?.userProfiles||{};if(Object.keys(t).length>=3)return void showErrorPopup(i,"#dc4a34");const d=createProfile(r,n,o,s,l);d&&a.insertBefore(d,c)}),c},editUsername=(e,t,r,a)=>{resetStateOfEditing(e);const n=e.target,o=n.closest(".main-profiles__profile").querySelector(".main-profiles__name"),i=createSaveBtn(r);n.classList.add("hidden"),i.classList.remove("hidden"),t.append(i),o.focus(),o.select(),o.removeAttribute("readonly"),o.classList.add("focused"),i.addEventListener("click",e=>{saveUsername(e,a)})},saveUsername=(e,t)=>{const r=getData(),a=r?.userProfiles||[],n=e.target.closest(".main-profiles__profile"),o=n.querySelector(".main-profiles__btn").dataset.id,i=n.querySelector(".main-profiles__name"),s=document.querySelectorAll(".main-profiles__edit-name");if(s.forEach(e=>e.removeAttribute("disabled")),""===i.value.trim())return s.forEach(e=>e.setAttribute("disabled",!0)),showErrorPopup(t,"#FAC044");const l={...a,[o]:{...a[o],name:i.value}};setUserPreference("userProfiles",l,r),resetStateOfEditing(e)},createSaveBtn=e=>{const t=createElement("button",["main-profiles__save-name","hidden"],{"aria-label":e}),r=createElement("img",["main-profiles__save-icon"],{width:"24",height:"24",loading:"lazy",alt:"",src:"./src/icons/save.svg"});return t.append(r),t},resetStateOfEditing=e=>{const t=document.querySelectorAll(".focused"),r=document.querySelectorAll(".main-profiles__save-name"),a=document.querySelectorAll(".main-profiles__edit-name");t.forEach(e=>{e.setAttribute("readonly",!0),e.classList.remove("focused"),e.blur()}),r.forEach(e=>e.classList.add("hidden")),a.forEach(e=>e.classList.remove("hidden"))};let popupVisible=!1;export const showErrorPopup=(e,t)=>{if(popupVisible)return;popupVisible=!0;const r=document.documentElement,a=document.querySelector(".container"),n=createElement("div",["error-popup"]),o=createElement("p",["error-popup__text"]);o.textContent=e,r.style.setProperty("--errorTxtColor",t),n.append(o),a.append(n),setTimeout(()=>{n.classList.add("hidden")},2e3),setTimeout(()=>{n.remove(),popupVisible=!1},2500)};export const createUserPanel=()=>{const e=getData();e||showErrorPopup("An unexpected error occurred","#dc4a34");const t=e?.currentProfile,r=e?.userProfiles[t]?.name,a=createElement("div",["browse-header__user-panel"]),n=createElement("p",["browse-header__user-info"]),o=createElement("span",["browse-header__username"]),i=createElement("hr",["browse-header__hr"]),s=createElement("ul",["browse-header__user-panel-list"]),l=createElement("img",["browse-header__icon","browse-header__icon-settings"],{width:"24",height:"24",alt:"",src:"./src/icons/settings-icon.svg",loading:"lazy"}),c=createElement("img",["browse-header__icon","browse-header__icon-settings"],{width:"24",height:"24",alt:"",src:"./src/icons/swap-icon.svg",loading:"lazy"}),d=createElement("img",["browse-header__icon","browse-header__icon-settings"],{width:"24",height:"24",alt:"",src:"./src/icons/logout-icon.svg",loading:"lazy"}),m=createElement("li",["browse-header__user-panel-option"]),p=createElement("a",["browse-header__user-panel-link","browse-header__user-panel-link--settings"],{href:""}),g=createElement("li",["browse-header__user-panel-option"]),_=createElement("a",["browse-header__user-panel-link","browse-header__user-panel-link--logout"],{href:""}),h=createElement("li",["browse-header__user-panel-option"]),u=createElement("a",["browse-header__user-panel-link","browse-header__user-panel-link--swap-profile"],{href:"profiles.html"});return o.textContent=r,n.textContent=e?.translations?.browsePage?.userPanel?.greeting,n.append(o),u.textContent=e?.translations?.browsePage?.userPanel?.profiles,p.textContent=e?.translations?.browsePage?.userPanel?.settings,_.textContent=e?.translations?.browsePage?.userPanel?.login,u.append(c),p.append(l),_.append(d),h.append(u),m.append(p),g.append(_),s.append(h,m,g),a.append(n,i,s),a.addEventListener("click",e=>{e.target.matches(".browse-header__user-panel-link--logout")&&handleLogOut(e)}),a};const handleLogOut=e=>{e.preventDefault();const t=getData(),r=document.querySelector(".container"),a=document.querySelector(".loader-big");t&&(a||(r.append(showBigLoader()),r.append(createOverlay()),document.body.style.overflowY="hidden",setTimeout(()=>{hideBigLoader(),setUserPreference("loggedIn",!1),setUserPreference("currentProfile",null),window.location.href="index.html"},2500)))},removeUser=e=>{const t=getData(),r=t?.userProfiles,a=document.querySelectorAll(".main-profiles__edit-name"),n=e.target.closest(".main-profiles__profile"),o=n.querySelector(".main-profiles__btn");a.forEach(e=>e.removeAttribute("disabled")),delete r[o.dataset.id],setUserPreference("userProfiles",r,t),n.classList.add("hidden"),setTimeout(()=>{n.remove()},400)};export const createBrowsePage=({header:{alt:{logo:e},aria:{logoLink:t}},browsePage:{names:{filmLink:r,seriesLink:a,myListLink:n,searchLink:o},aria:{userButton:i}}})=>{const s=createElement("header",["browse-header"]),l=createElement("a",["browse-header__logo"],{"aria-label":t,href:"browse.html"}),c=createElement("img",["browse-header__logo-img"],{alt:e,src:"./src/icons/logo.svg"}),d=createElement("span",["browse-header__logo-text"]);return d.textContent="Stream",l.append(c,d),s.append(l,createBrowserNav(r,a,n,o),createUserBtn(i),createUserPanel()),s};const createBrowserNav=(e,t,r,a)=>{const n=createElement("nav",["browse-header__nav"]),o=createElement("ul",["browse-header__links"]);return[{name:e,src:"./src/icons/film-icon.svg"},{name:t,src:"./src/icons/series-icon.svg"},{name:r,src:"./src/icons/list-icon.svg"},{name:a,src:"./src/icons/search-icon.svg"}].forEach((e,t)=>{const r=createElement("li",["browse-header__item"]),a=createElement("a",["browse-header__link"],{href:["movies.html","series.html","my-list.html","search.html"][t]}),n=createElement("img",["browse-header__link-icon"],{width:"24",height:"24",loading:"lazy",src:e.src,alt:""}),i=createElement("span",["browse-header__link-text"]);i.textContent=e.name,a.append(n,i),r.append(a),o.append(r)}),n.append(o),n},createUserBtn=e=>{const t=createElement("div",["browse-header__user-box"]),r=createElement("button",["browse-header__user"],{"aria-label":e}),a=createElement("img",["browse-header__user-icon"],{width:"24",height:"24",loading:"lazy",src:"./src/icons/user-icon.svg",alt:""});return r.append(a),t.append(r),r.addEventListener("click",()=>{showUserPanel(t)}),t};export const createMainHeroSection=(e,t,r)=>{const a=createElement("main",["browse-main"]),n=createElement("section",["browse-main__hero-section"]),o=createElement("div",["browse-main__image-carousell"]),i=createElement("div",["browse-main__images"]);e.forEach(({id:e,title:r,name:s,overview:l="",backdrop_path:c})=>{const d=c,m=createElement("div",["browse-main__img-box"]),p=createElement("img",["browse-main__img"],{alt:`${t?.browsePage?.carousellImages?.aria.carousellImageAlt} ${r||s}`,src:d?getImageUrl(d,"original"):"./dist/img/img-placeholder.svg"}),g=createElement("div",["browse-main__text-box"]),_=createElement("h2",["browse-main__carousell-title"]),h=createElement("p",["browse-main__carousell-overview"],{tabindex:-1});_.textContent=r,h.textContent=l,g.append(_,h,createActionButtons(e,t)),m.append(p,g),i.append(m),o.append(i),n.append(o),a.append(n)}),r.append(a),o.append(createCarousellControls(e,t))};const createActionButtons=(e,{browsePage:{actionBtns:{trailerBtnText:t,moreInfoBtnText:r}}})=>{const a=createElement("div",["browse-main__action-btns"]),n=createElement("button",["browse-main__trailer-btn"],{"data-trailer":e,"data-type":"movie"}),o=createElement("span",["browse-main__see-trailer"]),i=createElement("a",["browse-main__see-more-btn"],{"data-movie":e,href:`explore.html?id=${e}&type=movie`});return o.textContent=t,i.textContent=r,n.innerHTML='<svg class="browse-main__trailer-play-icon"\n\txmlns="http://www.w3.org/2000/svg" width="24" height="24"\n\tviewBox="0 0 24 24" fill="#000" stroke="#000" stroke-width="2"\n\tstroke-linecap="round" stroke-linejoin="round"\n\tclass="feather feather-play">\n\t<polygon points="5 3 19 12 5 21 5 3"></polygon>\n\t</svg>',n.append(o),a.append(n,i),a},createCarousellControls=(e,{browsePage:{carousellBtns:{aria:t}}})=>{const r=createElement("div",["browse-main__carousell-controls"]);return e.forEach((e,a)=>{const n=createElement("button",["browse-main__btn"],{"data-img":a,"aria-label":`${t} ${a}`}),o=createElement("span",["browse-main__progress-bar"]);n.append(o),r.append(n)}),r};export const createFilmSlider=(e,t,r,a,n)=>{const o=e[r]?.results||[];if(!o.length)return console.error(`No films found for index ${r}`),void showErrorPopup(`No films found for index ${r}`,"#dc4a34");const i=createElement("section",["browse-section"]),s=createElement("h3",["browse-section__title"]),l=createElement("div",["browse-section__slider"],{"data-index":0}),c=createElement("div",["browse-section__slider-images"]),d=createElement("button",["browse-section__slider-btn","browse-section__slider-prev-btn"],{"aria-label":t?.browseSection?.aria?.showPrevSlideBtn}),m=createElement("button",["browse-section__slider-btn","browse-section__slider-next-btn"],{"aria-label":t?.browseSection?.aria?.showNextSlideBtn}),p=createElement("img",["browse-section__slider-btn-icon"],{src:"./src/icons/chevron-left.svg",width:"24",height:"24",loading:"lazy",alt:""}),g=createElement("img",["browse-section__slider-btn-icon"],{src:"./src/icons/chevron-right.svg",width:"24",height:"24",loading:"lazy",alt:""});return s.textContent=a,m.append(g),d.append(p),createFilmPosters(o,t,c,n),l.append(c,d,m),i.append(s,l),i};const createFilmPosters=(e,t,r,a)=>{e.forEach(({id:e,title:n,name:o,poster_path:i,media_type:s})=>{const l=i,c=createElement("div",["browse-section__slider-box"]),d=createElement("a",["browse-section__slider-img-link"],{href:`explore.html?id=${e}&type=${s||a}`,"aria-label":t?.browseSection?.aria?.showMoreInfoAboutFilm}),m=createElement("img",["browse-section__slider-img"],{alt:`${t?.browsePage?.carousellImages?.aria?.carousellImageAlt} ${n||o}`,loading:"lazy",width:"",height:"",src:l?getImageUrl(l,"original"):"./dist/img/img-placeholder.svg"}),p=createElement("button",["browse-section__add-to-list-btn"],{"aria-label":t?.browseSection?.aria?.addToListBtn,"data-movie":e}),g=createElement("img",["browse-section__add-to-list-icon"],{src:"./src/icons/add-profile.svg",width:"24",height:"24",loading:"lazy",alt:""}),_=createElement("span",["browse-section__tooltip"]);_.textContent=t?.browseSection?.info,p.append(g),d.append(m),c.append(d,p,_),r.append(c)})},createOverlay=()=>createElement("div",["overlay"]),showUserPanel=e=>{e.nextElementSibling.classList.toggle("visible")};export const closeAllNotClicked=e=>{const t=document.querySelector(".browse-header__user-panel"),r=document.querySelector(".browse-header__user");t.classList.contains("visible")&&e.target!==t&&e.target!==r&&!t.contains(e.target)&&t.classList.remove("visible")};export const createFourCategories=({browsePage:{categories:{animations:e,horror:t,comedy:r,fantasy:a}}})=>{const n=createElement("section",["categories"]),o=createElement("div",["categories__box"]),i=createElement("div",["categories__box-card","categories__box-card--animations"]),s=createElement("div",["categories__box-card","categories__box-card--fantasy"]),l=createElement("div",["categories__box-card","categories__box-card--horrors"]),c=createElement("div",["categories__box-card","categories__box-card--comedy"]),d=createElement("a",["categories__box-link","categories__box-link--animations"],{href:"categories.html?category=animated"}),m=createElement("a",["categories__box-link","categories__box-link--fantasy"],{href:"categories.html?category=fantasy"}),p=createElement("a",["categories__box-link","categories__box-link--horrors"],{href:"categories.html?category=horror"}),g=createElement("a",["categories__box-link","categories__box-link--comedy"],{href:"categories.html?category=comedy"});return d.textContent=e,m.textContent=a,p.textContent=t,g.textContent=r,i.append(d),s.append(m),l.append(p),c.append(g),o.append(i,s,l,c),n.append(o),n};export const createSpecifiedSectionPoster=(e,t)=>{const r=createElement("main",["specified-category__main"]),a=createElement("section",["specified-category"]),n=createElement("div",["specified-category__container"]);return e.forEach((e,r)=>{e&&e.forEach(({id:e,title:a,name:o,poster_path:i})=>{const s=0===r?"movie":"tv",l=i,c=createElement("div",["specified-category__item"]),d=createElement("a",["specified-category__link"],{href:`explore.html?id=${e}&type=${s}`,"aria-label":t?.browseSection?.aria?.showMoreInfoAboutFilm}),m=createElement("img",["browse-section__slider-img"],{alt:`${t?.browsePage?.carousellImages?.aria?.carousellImageAlt} ${a||o}`,loading:"lazy",src:l?getImageUrl(l,"original"):"./dist/img/img-placeholder.svg"}),p=createElement("button",["browse-section__add-to-list-btn"],{"aria-label":t?.browseSection?.aria?.addToListBtn,"data-movie":e}),g=createElement("img",["browse-section__add-to-list-icon"],{width:"24",height:"24",loading:"lazy",alt:"",src:"./src/icons/add-profile.svg"}),_=createElement("span",["browse-section__tooltip"]);_.textContent=t?.browseSection?.info,p.append(g),d.append(m),c.append(d,p,_),n.append(c)})}),a.append(n),r.append(a),r};export const createExploreHeroSection=({title:e,name:t,id:r,backdrop_path:a,overview:n},o)=>{const i=new URLSearchParams(window.location.search).get("type"),s=createElement("div",["explore__film-poster"]),l=createElement("div",["explore__film-content"]),c=createElement("h1",["explore__film-title","animated"]),d=createElement("p",["explore__film-info","animated"]),m=createElement("button",["explore__film-show-trailer-btn","animated"],{"data-trailer":r,"data-type":i}),p=a,g=createElement("button",["explore__film-add-to-list-btn","animated"],{"aria-label":o?.browseSection?.aria?.addToListBtn,"data-movie":r}),_=createElement("button",["explore__back-btn","animated"],{"aria-label":o.explore.backButton});c.textContent=e||t,d.textContent=n,m.innerHTML='<svg class="explore__trailer-play-icon"\n\txmlns="http://www.w3.org/2000/svg" width="24" height="24"\n\tviewBox="0 0 24 24" fill="#000" stroke="#000" stroke-width="2"\n\tstroke-linecap="round" stroke-linejoin="round"\n\tclass="feather feather-play">\n\t<polygon points="5 3 19 12 5 21 5 3"></polygon>\n\t</svg>';const h=createElement("span",["explore__see-trailer"]);return h.textContent=o?.browsePage?.actionBtns?.trailerBtnText,m.append(h),g.innerHTML='<img class="explore__film-add-icon" src="./src/icons/add-profile.svg" width="24" height="24" alt="" loading="lazy">',_.innerHTML='<img class="explore__back-btn-icon" src="./src/icons/chevron-left.svg" width="24" height="24" alt="" loading="lazy">',s.style.backgroundImage=`url('${p?getImageUrl(p,"original"):"./dist/img/img-placeholder.svg"}')`,_.addEventListener("click",()=>{history.back()}),l.append(c,d,m,g,_),s.append(l),s};export const createSearchEngine=e=>{const t=createElement("div",["search-engine__box"]),r=createElement("input",["search-engine__input"],{type:"text",placeholder:e?.searchEngine?.placeholder}),a=createElement("img",["search-engine__icon"],{src:"./src/icons/search-icon.svg",width:"24",height:"24",loading:"lazy",alt:""});return t.append(r,a),t};export const createFilteredFilmsSection=(e,t)=>{const r=document.querySelector(".specified-category__container");if(r.innerHTML="",0===e.length){const e=createElement("p",["lack-of-content__text"]);return e.textContent=t?.searchEngine?.lackOfContent,void r.append(e)}const a=document.querySelector(".lack-of-content__text");a?.remove(),e.forEach(({media_type:e,id:a,title:n,name:o,poster_path:i})=>{const s=i,l=createElement("div",["specified-category__item"]),c=createElement("a",["specified-category__link"],{href:`explore.html?id=${a}&type=${e||"movie"}`,"aria-label":t?.browseSection?.aria?.showMoreInfoAboutFilm}),d=createElement("img",["browse-section__slider-img"],{alt:`${t?.browsePage?.carousellImages?.aria?.carousellImageAlt} ${n||o}`,loading:"lazy",src:getImageUrl(s,"original")}),m=createElement("button",["browse-section__add-to-list-btn"],{"aria-label":t?.browseSection?.aria?.addToListBtn,"data-movie":a}),p=createElement("img",["browse-section__add-to-list-icon"],{width:"24",height:"24",loading:"lazy",alt:"",src:"./src/icons/add-profile.svg"}),g=createElement("span",["browse-section__tooltip"]);g.textContent=t?.browseSection?.info,c.append(d),m.append(p),l.append(c,m,g),r.append(l)})};export const createTrailerWindow=async e=>{if(document.querySelector(".trailer-window"))return;const t=document.querySelector(".root"),r=e.target.dataset.trailer,a=e.target.dataset.type,n=await getVideoTrailerId(r,a);if(!n)return;const o=createElement("div",["trailer-window"]),i=createElement("iframe",["trailer-frame"],{src:`https://www.youtube.com/embed/${n}`,allowfullscreen:!0}),s=createElement("button",["close-trailer-window"]),l=createElement("img",["close-trailer-window-icon"],{alt:"",src:"./src/icons/close-icon.svg",width:"24",height:"24"});s.append(l),o.append(i,s),t.append(o,createOverlay())};const getVideoTrailerId=async(e,t)=>{const r=`https://api.themoviedb.org/3/${t}/${e}/videos\n`,a=await fetch(r,options),n=(await a.json()).results.find(e=>"Official Trailer"===e.name||"Official Trailer #1"===e.name||"Official Trailer #2"===e.name||e.name.includes("Official Trailer")||e.name.includes("Trailer"));if(!n)return void showErrorPopup("There was a problem loading the trailer for this video.","#dc4a34");return n.key};export const hideTrailerWindow=()=>{const e=document.querySelector(".trailer-window"),t=document.querySelector(".overlay");e.remove(),t.remove()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy5taW4uanMiLCJuYW1lcyI6WyJ2ZXJpZnlDcmVkZW50aWFscyIsImNyZWF0ZUVsZW1lbnQiLCJnZXRJbWFnZVVybCIsInNldFVzZXJQcmVmZXJlbmNlIiwiSElERV9QT1BVUF9USU1FIiwib3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJhY2NlcHQiLCJBdXRob3JpemF0aW9uIiwiZ2V0RGF0YSIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkRGF0YSIsIkpTT04iLCJwYXJzZSIsInNob3dFcnJvclBvcHVwIiwiRXJyb3IiLCJyZW1vdmVJdGVtIiwiZ2V0Q3VycmVudERhdGUiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJjcmVhdGVGb290ZXIiLCJoZWFkZXIiLCJhbHQiLCJsb2dvIiwiY3VyckRhdGUiLCJmb290ZXIiLCJmb290ZXJMb2dvIiwibG9nb0ltZyIsInNyYyIsIndpZHRoIiwiaGVpZ2h0IiwiaW5mbyIsInRleHRDb250ZW50IiwicHJlcGVuZCIsImFwcGVuZCIsImNyZWF0ZUxvZ2luSGVhZGVyIiwiYXJpYSIsImxvZ29MaW5rIiwiY2hhbmdlTGFuZ3VhZ2VCdXR0b24iLCJsYW5nQW1vdW50IiwibGFuZ05hbWVzIiwibGFuZ3VhZ2UiLCJoYW5kbGVMYW5nU2VsZWN0IiwicGFnZUxvZ28iLCJocmVmIiwibG9nb1RleHQiLCJsYW5nU2VsZWN0IiwibGFuZ1BsYXRmb3JtTGFuZyIsImxhbmdBcnJvdyIsImxhbmdMaXN0IiwiaSIsImxhbmdDaG9pY2UiLCJ0YWJpbmRleCIsIk9iamVjdCIsImtleXMiLCJ0ZXh0IiwidmFsdWVzIiwiZGF0YXNldCIsImxhbmciLCJzdHlsZSIsImFuaW1hdGlvbkRlbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjYWxsIiwiY3JlYXRlTG9naW5QYWdlIiwibWFpbiIsInRpdGxlIiwic3VidGl0bGUiLCJkZXNjcmlwdGlvbiIsImJ1dHRvbiIsInBsYWNlaG9sZGVyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIm1haW5Db250ZW50Iiwid3JhcHBlciIsImxvZ2luVGl0bGUiLCJsb2dpblRpdGxlVG9wIiwibG9naW5UaXRsZUJvdHRvbSIsImxvZ2luVGV4dCIsImZvcm0iLCJ1c2VybmFtZUlucHV0IiwidHlwZSIsInZhbHVlIiwicGFzc3dvcmRJbnB1dCIsInN1Ym1pdEJ0biIsImJ1dHRvblRleHQiLCJlcnJvclR4dCIsInVzZXJEYXRhIiwiY2hvb3NlbkxhbmciLCJwcmVmZXJyZWRMYW5ndWFnZSIsImhhbmRsZUxvZ2luVmFsaWRhdGlvbiIsInRyYW5zbGF0aW9ucyIsImVycm9yUmVxdWlyZWQiLCJlcnJvckludmFsaWQiLCJ0aGVuIiwicmVzIiwid2luZG93IiwibG9jYXRpb24iLCJhc3luYyIsInJlcXVpcmVFcnJvciIsImludmFsaWRFcnJvciIsInByZXZlbnREZWZhdWx0IiwidHJpbSIsImNsYXNzTGlzdCIsImFkZCIsImVtYWlsVmFsdWUiLCJwYXNzd29yZFZhbHVlIiwidGFyZ2V0IiwiZGlzYWJsZWQiLCJzaG93U21hbGxMb2FkZXIiLCJyZW1vdmUiLCJyZXN1bHQiLCJoaWRlU21hbGxMb2FkZXIiLCJzdWNjZXNzIiwic2hvd0JpZ0xvYWRlciIsImxvYWRpbmdBcmVhIiwiaW5uZXJIVE1MIiwiaGlkZUJpZ0xvYWRlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZVByb2ZpbGVzUGFnZSIsInByb2ZpbGVzIiwiYWRkUHJvZmlsZUluZm8iLCJhZGRQcm9maWxlQnRuIiwidXNlclByb2ZpbGVCdG4iLCJ1c2VyQnRuQ3VzdG9taXplIiwicmVtb3ZlVXNlckluZm8iLCJlcnJvclBvcHVwIiwibWF4UHJvZmlsZXMiLCJlbXB0eUZpZWxkIiwidXNlclByb2ZpbGVzTGlzdCIsInVzZXJQcm9maWxlcyIsImNvbnRhaW5lciIsInNldFRpbWVvdXQiLCJwcm9maWxlc1BhZ2VNYWluIiwicHJvZmlsZXNUaXRsZSIsInByb2ZpbGVzQm94IiwibGVuZ3RoIiwia2V5IiwiY3JlYXRlUHJvZmlsZSIsImNyZWF0ZVByb2ZpbGVBZGRCdG4iLCJhcmlhSW5mbyIsInVzZXJCdG5JbmZvIiwic2F2ZUJ0bkFyaWEiLCJlbXB0eUZpZWxkRXJyb3IiLCJyZW1vdmVBcmlhIiwiZXhpc3RpbmdQcm9maWxlSWQiLCJleGlzdGluZ1Byb2ZpbGVOYW1lIiwiZXhpc3RpbmdQcm9maWxlcyIsInJlbG9hZCIsImNvbG9yIiwicHJvZmlsZUlkIiwicHJvZmlsZU5hbWUiLCJjb2xvcnMiLCJuYW1lIiwicGFyc2VJbnQiLCJzcGxpdCIsInBvcCIsIm5leHROdW1iZXIiLCJ1c2VyUHJvZmlsZSIsInVzZXJBdmF0YXJCb3giLCJ1c2VyUHJvZmlsZUluZm9Cb3giLCJ1c2VyUHJvZmlsZUluZm8iLCJyZWFkb25seSIsIm5hbWVCb3JkZXIiLCJlZGl0VXNlckluZm9CdG4iLCJyZW1vdmVVc2VyQnRuIiwicmVtb3ZlVXNlckljb24iLCJsb2FkaW5nIiwiZWRpdFVzZXJJbmZvSWNvbiIsImJhY2tncm91bmRDb2xvciIsInVwZGF0ZWRQcm9maWxlcyIsImVkaXRVc2VybmFtZSIsInJlbW92ZVVzZXIiLCJzYXZlVXNlcm5hbWUiLCJzZXRDdXJyZW50UHJvZmlsZSIsInByb2ZpbGVEYXRhIiwiaWQiLCJ1c2VyQnRuQXJpYSIsIm1heFByb2ZpbGVzRXJyb3IiLCJhZGRQcm9maWxlQm94IiwiYWRkUHJvZmlsZUF2YXRhciIsImFkZFByb2ZpbGVQbHVzSWNvbiIsInByb2ZpbGUiLCJpbnNlcnRCZWZvcmUiLCJwYXJlbnQiLCJyZXNldFN0YXRlT2ZFZGl0aW5nIiwiZWRpdEJ0biIsIm5hbWVUb0VkaXQiLCJjbG9zZXN0Iiwic2F2ZUJ0biIsImNyZWF0ZVNhdmVCdG4iLCJmb2N1cyIsInNlbGVjdCIsInJlbW92ZUF0dHJpYnV0ZSIsImNsb3Nlc3RQcm9maWxlIiwiY2xvc2VzdFByb2ZpbGVJZCIsImNsb3Nlc3RQcm9maWxlTmFtZSIsImFsbEVkaXRCdG5zIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidG4iLCJzZXRBdHRyaWJ1dGUiLCJzYXZlVXNlckluZm9CdG4iLCJzYXZlVXNlckluZm9JY29uIiwiZm9jdXNlZE5hbWVzIiwiYWxsU2F2ZUJ0bnMiLCJlbCIsImJsdXIiLCJwb3B1cFZpc2libGUiLCJyb290IiwiZG9jdW1lbnRFbGVtZW50IiwicG9wdXAiLCJwb3B1cEVycm9yIiwic2V0UHJvcGVydHkiLCJjcmVhdGVVc2VyUGFuZWwiLCJjdXJyZW50UHJvZmlsZSIsImN1cnJlbnRQcm9maWxlTmFtZSIsInVzZXJQYW5lbCIsInVzZXJJbmZvIiwiZGl2aWRlciIsInVzZXJQYW5lbExpc3QiLCJzZXR0aW5nc0ljb24iLCJzd2FwUHJvZmlsZUljb24iLCJsb2dvdXRJY29uIiwidXNlclBhbmVsU2V0dGluZ3MiLCJ1c2VyUGFuZWxTZXR0aW5nc0xpbmsiLCJ1c2VyUGFuZWxMb2dvdXQiLCJ1c2VyUGFuZWxMb2dvdXRMaW5rIiwidXNlclBhbmVsU3dhcFByb2ZpbGUiLCJ1c2VyUGFuZWxTd2FwUHJvZmlsZUxpbmsiLCJicm93c2VQYWdlIiwiZ3JlZXRpbmciLCJzZXR0aW5ncyIsImxvZ2luIiwibWF0Y2hlcyIsImhhbmRsZUxvZ091dCIsImxvYWRlciIsImNyZWF0ZU92ZXJsYXkiLCJib2R5Iiwib3ZlcmZsb3dZIiwiY2xvc2VzdFByb2ZpbGVCdG4iLCJjcmVhdGVCcm93c2VQYWdlIiwibmFtZXMiLCJmaWxtTGluayIsInNlcmllc0xpbmsiLCJteUxpc3RMaW5rIiwic2VhcmNoTGluayIsInVzZXJCdXR0b24iLCJsb2dvTWFpbkxpbmsiLCJsb2dvTWFpbkltZyIsIm1haW5UaXRsZSIsImNyZWF0ZUJyb3dzZXJOYXYiLCJjcmVhdGVVc2VyQnRuIiwibmF2IiwibmF2TGlua3MiLCJsaW5rIiwiaW5kZXgiLCJsaXN0SXRlbSIsImxpbmtFbCIsImljb24iLCJ1c2VyQm94IiwidXNlckJ0biIsInVzZXJJY29uIiwic2hvd1VzZXJQYW5lbCIsImNyZWF0ZU1haW5IZXJvU2VjdGlvbiIsIm1vdmllcyIsImJyb3dzZU1haW4iLCJicm93c2VNYWluU2VjdGlvbiIsImltYWdlc0Nhcm91c2VsbCIsImltYWdlc0luc2lkZVNsaWRlciIsIm92ZXJ2aWV3IiwiYmFja2Ryb3BfcGF0aCIsImltZ1NyYyIsImltYWdlQm94IiwiaW1hZ2UiLCJjYXJvdXNlbGxJbWFnZXMiLCJjYXJvdXNlbGxJbWFnZUFsdCIsInRleHRCb3giLCJmaWxtVGl0bGUiLCJmaWxtSW5mbyIsImNyZWF0ZUFjdGlvbkJ1dHRvbnMiLCJjcmVhdGVDYXJvdXNlbGxDb250cm9scyIsImFjdGlvbkJ0bnMiLCJ0cmFpbGVyQnRuVGV4dCIsIm1vcmVJbmZvQnRuVGV4dCIsImFjdGlvbkJ0bnNQYW5lbCIsInNob3dUcmFpbGVyQnRuIiwic2hvd1RyYWlsZXJUZXh0Iiwic2VlTW9yZUJ0biIsImNhcm91c2VsbEJ0bnMiLCJjYXJvdXNlbGxDb250cm9scyIsIm1vdmllIiwiY2Fyb3VzZWxsQnRuIiwiY2Fyb3VzZWxsQnRuUHJvZ3Jlc3NCYXIiLCJjcmVhdGVGaWxtU2xpZGVyIiwiZmlsbXMiLCJwcm9wZXJGaWxtcyIsInJlc3VsdHMiLCJjb25zb2xlIiwiZXJyb3IiLCJicm93c2VTZWN0aW9uIiwic2VjdGlvblRpdGxlIiwic2VjdGlvblNsaWRlciIsInNlY3Rpb25JbWFnZXMiLCJzaG93UHJldlNsaWRlQnRuIiwic2hvd05leHRTbGlkZUJ0biIsInNob3dQcmV2U2xpZGVJY29uIiwic2hvd05leHRTbGlkZUljb24iLCJjcmVhdGVGaWxtUG9zdGVycyIsInBvc3Rlcl9wYXRoIiwibWVkaWFfdHlwZSIsInNlY3Rpb25Cb3giLCJzZWN0aW9uTGluayIsInNob3dNb3JlSW5mb0Fib3V0RmlsbSIsInNlY3Rpb25GaWxtUG9zdGVyIiwic2VjdGlvbkFkZFRvTGlzdEJ0biIsImFkZFRvTGlzdEJ0biIsInNlY3Rpb25BZGRUb0xpc3RJY29uIiwic2VjdGlvblRvb2x0aXAiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0b2dnbGUiLCJjbG9zZUFsbE5vdENsaWNrZWQiLCJjb250YWlucyIsImNyZWF0ZUZvdXJDYXRlZ29yaWVzIiwiY2F0ZWdvcmllcyIsImFuaW1hdGlvbnMiLCJob3Jyb3IiLCJjb21lZHkiLCJmYW50YXN5IiwiY2F0ZWdvcmllc1NlY3Rpb24iLCJjYXRlZ29yaWVzQm94IiwiY2F0ZWdvcnlBbmltYXRlZENhcmQiLCJjYXRlZ29yeUZhbnRhc3lDYXJkIiwiY2F0ZWdvcnlIb3Jyb3JDYXJkIiwiY2F0ZWdvcnlDb21lZHlDYXJkIiwiY2F0ZWdvcnlBbmltYXRlZExpbmsiLCJjYXRlZ29yeUZhbnRhc3lMaW5rIiwiY2F0ZWdvcnlIb3Jyb3JMaW5rIiwiY2F0ZWdvcnlDb21lZHlMaW5rIiwiY3JlYXRlU3BlY2lmaWVkU2VjdGlvblBvc3RlciIsImZpbG1zQXJyIiwic2VjdGlvbiIsInNlY3Rpb25Db250YWluZXIiLCJhcnIiLCJzZWN0aW9uSXRlbSIsInNlY3Rpb25Qb3N0ZXIiLCJjcmVhdGVFeHBsb3JlSGVyb1NlY3Rpb24iLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJnZXQiLCJtYWluQm94IiwiY29udGVudEJveCIsInRyYWlsZXJCdG4iLCJiYWNrQnRuIiwiZXhwbG9yZSIsImJhY2tCdXR0b24iLCJ0cmFpbGVyVGV4dCIsImJhY2tncm91bmRJbWFnZSIsImhpc3RvcnkiLCJiYWNrIiwiY3JlYXRlU2VhcmNoRW5naW5lIiwic2VhcmNoRW5naW5lQm94Iiwic2VhcmNoRW5naW5lIiwic2VhcmNoRW5naW5lSWNvbiIsImNyZWF0ZUZpbHRlcmVkRmlsbXNTZWN0aW9uIiwiZmlsdGVyZWRGaWxtcyIsImxhY2tPZkNvbnRlbnQiLCJsYWNrT2ZDb250ZW50VHh0IiwicG9zdGVyIiwicG9zdGVyTGluayIsInNlY3Rpb25JbWciLCJhZGRUb0xpc3RJY29uIiwidG9vbHRpcCIsImNyZWF0ZVRyYWlsZXJXaW5kb3ciLCJ0cmFpbGVyIiwidHJhaWxlcklEIiwiZ2V0VmlkZW9UcmFpbGVySWQiLCJtYWluV2luZG93IiwidmlkZW9GcmFtZSIsImFsbG93ZnVsbHNjcmVlbiIsImNsb3NlV2luZG93QnRuIiwiY2xvc2VXaW5kb3dJY29uIiwiVVJMIiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJmaW5kIiwiaW5jbHVkZXMiLCJoaWRlVHJhaWxlcldpbmRvdyIsInRyYWlsZXJXaW5kb3ciLCJvdmVybGF5Il0sInNvdXJjZXMiOlsiY29tcG9uZW50cy5qcyJdLCJtYXBwaW5ncyI6Ik9BQVNBLHNCQUF5QixnQ0FDekJDLGNBQWVDLGdCQUFtQiwwQkFDbENDLHNCQUF5QixnQ0FDbEMsTUFBTUMsZ0JBQWtCLEtBRWxCQyxRQUFVLENBQ2ZDLE9BQVEsTUFDUkMsUUFBUyxDQUNSQyxPQUFRLG1CQUNSQyxjQUNDLGdRQUlJLE1BQU1DLFFBQVUsS0FDdEIsSUFDQyxNQUFNQyxFQUFPQyxhQUFhQyxRQUFRLFlBQ2xDLElBQUtGLEVBQU0sT0FBTyxLQUNsQixNQUFNRyxFQUFhQyxLQUFLQyxNQUFNTCxHQUM5QixHQUEwQixpQkFBZkcsR0FBMEMsT0FBZkEsRUFFckMsTUFEQUcsZUFBZSx3Q0FBeUMsV0FDbEQsSUFBSUMsTUFBTSwwQkFFakIsT0FBT0osQ0FDUixDQUFFLE1BR0QsT0FGQUYsYUFBYU8sV0FBVyxZQUN4QkYsZUFBZSwrQ0FBZ0QsV0FDeEQsQ0FBQyxDQUNULEdBRUQsTUFBTUcsZUFBaUIsS0FDRixJQUFJQyxNQUFPQyxxQkFJekIsTUFBTUMsYUFBZSxFQUMzQkMsUUFDQ0MsS0FBT0MsYUFHUixNQUFNQyxFQUFXUCxpQkFFWFEsRUFBUzNCLGNBQWMsU0FBVSxDQUFDLGtCQUNsQzRCLEVBQWE1QixjQUFjLE9BQVEsQ0FBQyx3QkFDcEM2QixFQUFVN0IsY0FBYyxNQUFPLENBQUMsc0JBQXVCLENBQzVEOEIsSUFBSyx1QkFDTE4sSUFBSyxHQUFHQyxJQUNSTSxNQUFPLEtBQ1BDLE9BQVEsT0FFSEMsRUFBT2pDLGNBQWMsSUFBSyxDQUFDLHdCQVFqQyxPQU5BNEIsRUFBV00sWUFBYyxTQUN6Qk4sRUFBV08sUUFBUU4sR0FDbkJJLEVBQUtDLFlBQWMsSUFBSVIsOENBRXZCQyxFQUFPUyxPQUFP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RUFBR3JELE1BQ0hxRCxFQUFHckQsS0FBSzBPLFNBQVMscUJBQ2pCckwsRUFBR3JELEtBQUswTyxTQUFTLFlBR25CLElBQUtiLEVBS0osWUFKQXpXLGVBQ0MsMERBQ0EsV0FNRixPQUZtQnlXLEVBQVE3TyxZQUlyQixNQUFNMlAsa0JBQW9CLEtBQ2hDLE1BQU1DLEVBQWdCaFIsU0FBU0MsY0FBYyxtQkFDdkNnUixFQUFValIsU0FBU0MsY0FBYyxZQUV2QytRLEVBQWN4UixTQUNkeVIsRUFBUXpSIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcmlmeUNyZWRlbnRpYWxzIH0gZnJvbSBcIi4vZmlyZWJhc2UtYXV0aC5taW4uanNcIjtcclxuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgZ2V0SW1hZ2VVcmwgfSBmcm9tIFwiLi9oZWxwZXJzLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBzZXRVc2VyUHJlZmVyZW5jZSB9IGZyb20gXCIuL3VwZGF0ZVN0YXRlRnVuY3Rpb25zLm1pbi5qc1wiO1xyXG5jb25zdCBISURFX1BPUFVQX1RJTUUgPSAyNTAwO1xyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuXHRtZXRob2Q6IFwiR0VUXCIsXHJcblx0aGVhZGVyczoge1xyXG5cdFx0YWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuXHRcdEF1dGhvcml6YXRpb246XHJcblx0XHRcdFwiQmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUo5LmV5SmhkV1FpT2lJek5UWXdaak00TWpVM05EUTFaR0UxWkdaa1lUWXhZekUwWVdNNFltTTRNeUlzSW01aVppSTZNVGMxT1RjMk5UQXpPQzQ1TkN3aWMzVmlJam9pTmpobE0yVXlNbVV5TmpZNU56WTRNemhsWXpJM056STVJaXdpYzJOdmNHVnpJanBiSW1Gd2FWOXlaV0ZrSWwwc0luWmxjbk5wYjI0aU9qRjkubnVHZkVqY2xKTGVwbXp6SGkyb21OaHAyOVRIZ3JKZjlOdjZENF9nVGR4QVwiLFxyXG5cdH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0RGF0YSA9ICgpID0+IHtcclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckRhdGFcIik7XHJcblx0XHRpZiAoIWRhdGEpIHJldHVybiBudWxsO1xyXG5cdFx0Y29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcblx0XHRpZiAodHlwZW9mIHBhcnNlZERhdGEgIT09IFwib2JqZWN0XCIgfHwgcGFyc2VkRGF0YSA9PT0gbnVsbCkge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cChcIkludmFsaWQgdXNlciBkYXRhLiBSZXNldHRpbmcgc3RvcmFnZS5cIiwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGEgc3RydWN0dXJlXCIpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHBhcnNlZERhdGE7XHJcblx0fSBjYXRjaCB7XHJcblx0XHRsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInVzZXJEYXRhXCIpO1xyXG5cdFx0c2hvd0Vycm9yUG9wdXAoXCJFcnJvciBhY2Nlc3NpbmcgdXNlciBkYXRhLiBQbGVhc2UgdHJ5IGFnYWluLlwiLCBcIiNkYzRhMzRcIik7XHJcblx0XHRyZXR1cm4ge307XHJcblx0fVxyXG59O1xyXG5jb25zdCBnZXRDdXJyZW50RGF0ZSA9ICgpID0+IHtcclxuXHRjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuXHJcblx0cmV0dXJuIGN1cnJlbnREYXRlO1xyXG59O1xyXG5leHBvcnQgY29uc3QgY3JlYXRlRm9vdGVyID0gKHtcclxuXHRoZWFkZXI6IHtcclxuXHRcdGFsdDogeyBsb2dvIH0sXHJcblx0fSxcclxufSkgPT4ge1xyXG5cdGNvbnN0IGN1cnJEYXRlID0gZ2V0Q3VycmVudERhdGUoKTtcclxuXHJcblx0Y29uc3QgZm9vdGVyID0gY3JlYXRlRWxlbWVudChcImZvb3RlclwiLCBbXCJicm93c2UtZm9vdGVyXCJdKTtcclxuXHRjb25zdCBmb290ZXJMb2dvID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1wiYnJvd3NlLWZvb3Rlcl9fbG9nb1wiXSk7XHJcblx0Y29uc3QgbG9nb0ltZyA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wiYnJvd3NlLWZvb3Rlcl9faW1nXCJdLCB7XHJcblx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvbG9nby5zdmdcIixcclxuXHRcdGFsdDogYCR7bG9nb31gLFxyXG5cdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGluZm8gPSBjcmVhdGVFbGVtZW50KFwicFwiLCBbXCJicm93c2UtZm9vdGVyX19pbmZvXCJdKTtcclxuXHJcblx0Zm9vdGVyTG9nby50ZXh0Q29udGVudCA9IFwiU3RyZWFtXCI7XHJcblx0Zm9vdGVyTG9nby5wcmVwZW5kKGxvZ29JbWcpO1xyXG5cdGluZm8udGV4dENvbnRlbnQgPSBgwqkke2N1cnJEYXRlfSBTdHJlYW0gY29ycG9yYXRpb24gfCBBbGwgcmlnaHRzIHJlc2VydmVkLmA7XHJcblxyXG5cdGZvb3Rlci5hcHBlbmQoZm9vdGVyTG9nbywgaW5mbyk7XHJcblxyXG5cdHJldHVybiBmb290ZXI7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlTG9naW5IZWFkZXIgPSAoXHJcblx0e1xyXG5cdFx0aGVhZGVyOiB7XHJcblx0XHRcdGFsdDogeyBsb2dvIH0sXHJcblx0XHRcdGFyaWE6IHsgbG9nb0xpbmssIGNoYW5nZUxhbmd1YWdlQnV0dG9uIH0sXHJcblx0XHR9LFxyXG5cdH0sXHJcblx0bGFuZ0Ftb3VudCxcclxuXHRsYW5nTmFtZXMsXHJcblx0bGFuZ3VhZ2UsXHJcblx0aGFuZGxlTGFuZ1NlbGVjdFxyXG4pID0+IHtcclxuXHQvLyBsb2dvXHJcblx0Y29uc3QgaGVhZGVyID0gY3JlYXRlRWxlbWVudChcImhlYWRlclwiLCBbXCJoZWFkZXJcIl0pO1xyXG5cdGNvbnN0IHBhZ2VMb2dvID0gY3JlYXRlRWxlbWVudChcImFcIiwgW1wiaGVhZGVyX19sb2dvXCIsIFwibG9naW4taGVhZGVyX19sb2dvXCJdLCB7XHJcblx0XHRocmVmOiBcIi9cIixcclxuXHRcdFwiYXJpYS1sYWJlbFwiOiBgJHtsb2dvTGlua31gLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGxvZ29JbWcgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJpbWdcIixcclxuXHRcdFtcImhlYWRlcl9fbG9nby1pbWdcIiwgXCJsb2dpbi1oZWFkZXJfX2xvZ28taW1nXCJdLFxyXG5cdFx0e1xyXG5cdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvbG9nby5zdmdcIixcclxuXHRcdFx0YWx0OiBgJHtsb2dvfWAsXHJcblx0XHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdFx0fVxyXG5cdCk7XHJcblx0Y29uc3QgbG9nb1RleHQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXHJcblx0XHRcImhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XHRcImxvZ2luLWhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XSk7XHJcblx0bG9nb1RleHQudGV4dENvbnRlbnQgPSBcIlN0cmVhbVwiO1xyXG5cdHBhZ2VMb2dvLmFwcGVuZChsb2dvSW1nLCBsb2dvVGV4dCk7XHJcblx0aGVhZGVyLmFwcGVuZChwYWdlTG9nbyk7XHJcblx0Ly8gZW5kIG9mIGxvZ29cclxuXHJcblx0Ly8gbGFuZ3VhZ2Ugc2VsZWN0b3JcclxuXHRjb25zdCBsYW5nU2VsZWN0ID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctc2VsZWN0XCJdLCB7XHJcblx0XHRcImFyaWEtbGFiZWxcIjogYCR7Y2hhbmdlTGFuZ3VhZ2VCdXR0b259YCxcclxuXHR9KTtcclxuXHRjb25zdCBsYW5nUGxhdGZvcm1MYW5nID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XCJsb2dpbi1oZWFkZXJfX2xhbmctcGxhdGZvcm0tbGFuZ1wiLFxyXG5cdF0pO1xyXG5cdGNvbnN0IGxhbmdBcnJvdyA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wibG9naW4taGVhZGVyX19sYW5nLWFycm93XCJdLCB7XHJcblx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvY2hldnJvbi1kb3duLnN2Z1wiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGxhbmdMaXN0ID0gY3JlYXRlRWxlbWVudChcInVsXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1saXN0XCJdKTtcclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsYW5nQW1vdW50OyBpKyspIHtcclxuXHRcdGNvbnN0IGxhbmdDaG9pY2UgPSBjcmVhdGVFbGVtZW50KFwibGlcIiwgW1wibG9naW4taGVhZGVyX19sYW5nLWNob2ljZVwiXSwge1xyXG5cdFx0XHR0YWJpbmRleDogMCxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgZGF0YSA9IE9iamVjdC5rZXlzKGxhbmdOYW1lcylbaV07XHJcblx0XHRjb25zdCB0ZXh0ID0gT2JqZWN0LnZhbHVlcyhsYW5nTmFtZXMpW2ldO1xyXG5cclxuXHRcdGxhbmdDaG9pY2UuZGF0YXNldC5sYW5nID0gZGF0YTtcclxuXHRcdGxhbmdDaG9pY2UudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0bGFuZ0Nob2ljZS5zdHlsZS5hbmltYXRpb25EZWxheSA9IGkgKiAxMDAgKyBcIm1zXCI7XHJcblx0XHRsYW5nTGlzdC5hcHBlbmQobGFuZ0Nob2ljZSk7XHJcblx0fVxyXG5cclxuXHRsYW5nUGxhdGZvcm1MYW5nLnRleHRDb250ZW50ID0gbGFuZ05hbWVzW2xhbmd1YWdlXTtcclxuXHJcblx0bGFuZ1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdGhhbmRsZUxhbmdTZWxlY3QuY2FsbChsYW5nU2VsZWN0LCBlLCBsYW5nUGxhdGZvcm1MYW5nKTtcclxuXHR9KTtcclxuXHJcblx0bGFuZ1NlbGVjdC5hcHBlbmQobGFuZ1BsYXRmb3JtTGFuZywgbGFuZ0Fycm93LCBsYW5nTGlzdCk7XHJcblx0aGVhZGVyLmFwcGVuZChsYW5nU2VsZWN0KTtcclxuXHJcblx0cmV0dXJuIGhlYWRlcjtcclxuXHQvLyBlbmQgb2YgbGFuZ3VhZ2Ugc2VsZWN0b3JcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVMb2dpblBhZ2UgPSAoe1xyXG5cdG1haW46IHtcclxuXHRcdHRleHQ6IHsgdGl0bGUsIHN1YnRpdGxlLCBkZXNjcmlwdGlvbiwgYnV0dG9uIH0sXHJcblx0XHRwbGFjZWhvbGRlcjogeyB1c2VybmFtZSwgcGFzc3dvcmQgfSxcclxuXHR9LFxyXG59KSA9PiB7XHJcblx0Y29uc3QgbWFpbkNvbnRlbnQgPSBjcmVhdGVFbGVtZW50KFwibWFpblwiLCBbXCJtYWluXCJdKTtcclxuXHRjb25zdCB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJ3cmFwcGVyXCJdKTtcclxuXHRjb25zdCBsb2dpblRpdGxlID0gY3JlYXRlRWxlbWVudChcImgxXCIpO1xyXG5cdGNvbnN0IGxvZ2luVGl0bGVUb3AgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXCJtYWluX190aXRsZVwiXSk7XHJcblx0Y29uc3QgbG9naW5UaXRsZUJvdHRvbSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcIm1haW5fX3N1YnRpdGxlXCJdKTtcclxuXHRjb25zdCBsb2dpblRleHQgPSBjcmVhdGVFbGVtZW50KFwicFwiLCBbXCJtYWluX190ZXh0XCJdKTtcclxuXHRjb25zdCBmb3JtID0gY3JlYXRlRWxlbWVudChcImZvcm1cIiwgW1wibWFpbl9fZm9ybVwiXSk7XHJcblx0Y29uc3QgdXNlcm5hbWVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImlucHV0XCIsXHJcblx0XHRbXCJtYWluX19mb3JtLWlucHV0XCIsIFwibWFpbl9fZm9ybS1pbnB1dC0tdXNlcm5hbWVcIl0sXHJcblx0XHR7IHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogdXNlcm5hbWUsIHZhbHVlOiBcImhhbmRzb21lVXNlcjQwNEB0ZXN0LmNvbVwiIH1cclxuXHQpO1xyXG5cdGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJpbnB1dFwiLFxyXG5cdFx0W1wibWFpbl9fZm9ybS1pbnB1dFwiLCBcIm1haW5fX2Zvcm0taW5wdXQtLXBhc3N3b3JkXCJdLFxyXG5cdFx0eyB0eXBlOiBcInBhc3N3b3JkXCIsIHBsYWNlaG9sZGVyOiBwYXNzd29yZCwgdmFsdWU6IFwiMTIzNDU2Nzg5XCIgfVxyXG5cdCk7XHJcblx0Y29uc3Qgc3VibWl0QnRuID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJtYWluX19mb3JtLWJ1dHRvblwiXSwge1xyXG5cdFx0dHlwZTogXCJzdWJtaXRcIixcclxuXHR9KTtcclxuXHRjb25zdCBidXR0b25UZXh0ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1wibWFpbl9fZm9ybS1idXR0b24tdGV4dFwiXSk7XHJcblxyXG5cdGNvbnN0IGVycm9yVHh0ID0gY3JlYXRlRWxlbWVudChcInBcIiwgW1wibWFpbl9fZm9ybS1lcnJvci10eHRcIl0pO1xyXG5cdGxvZ2luVGl0bGVUb3AudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuXHRsb2dpblRpdGxlQm90dG9tLnRleHRDb250ZW50ID0gc3VidGl0bGU7XHJcblx0bG9naW5UZXh0LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcblx0YnV0dG9uVGV4dC50ZXh0Q29udGVudCA9IGJ1dHRvbjtcclxuXHJcblx0bG9naW5UaXRsZS5hcHBlbmQobG9naW5UaXRsZVRvcCwgbG9naW5UaXRsZUJvdHRvbSk7XHJcblx0c3VibWl0QnRuLmFwcGVuZChidXR0b25UZXh0KTtcclxuXHRmb3JtLmFwcGVuZCh1c2VybmFtZUlucHV0LCBwYXNzd29yZElucHV0LCBzdWJtaXRCdG4sIGVycm9yVHh0KTtcclxuXHJcblx0d3JhcHBlci5hcHBlbmQobG9naW5UaXRsZSwgbG9naW5UZXh0LCBmb3JtKTtcclxuXHRtYWluQ29udGVudC5hcHBlbmQod3JhcHBlcik7XHJcblxyXG5cdHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdGNvbnN0IHVzZXJEYXRhID0gZ2V0RGF0YSgpO1xyXG5cdFx0Y29uc3QgY2hvb3NlbkxhbmcgPSB1c2VyRGF0YT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblxyXG5cdFx0aWYgKCFjaG9vc2VuTGFuZykge1xyXG5cdFx0XHRzZXRVc2VyUHJlZmVyZW5jZShcInByZWZlcnJlZExhbmd1YWdlXCIsIFwicGxcIiwgdXNlckRhdGEpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGhhbmRsZUxvZ2luVmFsaWRhdGlvbihcclxuXHRcdFx0ZSxcclxuXHRcdFx0dXNlcm5hbWVJbnB1dCxcclxuXHRcdFx0cGFzc3dvcmRJbnB1dCxcclxuXHRcdFx0dHJhbnNsYXRpb25zLm1haW4udGV4dC5lcnJvclJlcXVpcmVkLFxyXG5cdFx0XHR0cmFuc2xhdGlvbnMubWFpbi50ZXh0LmVycm9ySW52YWxpZCxcclxuXHRcdFx0ZXJyb3JUeHRcclxuXHRcdCkudGhlbigocmVzKSA9PiB7XHJcblx0XHRcdGlmICghcmVzKSB7XHJcblx0XHRcdFx0c2V0VXNlclByZWZlcmVuY2UoXCJ0cmFuc2xhdGlvbnNcIiwgdHJhbnNsYXRpb25zLCB1c2VyRGF0YSk7XHJcblx0XHRcdFx0c2V0VXNlclByZWZlcmVuY2UoXCJsb2dnZWRJblwiLCB0cnVlLCB1c2VyRGF0YSk7XHJcblxyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJwcm9maWxlcy5odG1sXCI7IC8vIHByemVqxZtjaWUgbmEgc3Ryb27EmSB6IHByb2ZpbGFtaVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIG1haW5Db250ZW50O1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTG9naW5WYWxpZGF0aW9uID0gYXN5bmMgKFxyXG5cdGUsXHJcblx0dXNlcm5hbWVJbnB1dCxcclxuXHRwYXNzd29yZElucHV0LFxyXG5cdHJlcXVpcmVFcnJvcixcclxuXHRpbnZhbGlkRXJyb3IsXHJcblx0ZXJyb3JUeHRcclxuKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRpZiAodXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCkgPT09IFwiXCIgfHwgcGFzc3dvcmRJbnB1dC52YWx1ZS50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdGVycm9yVHh0LmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpO1xyXG5cdFx0ZXJyb3JUeHQudGV4dENvbnRlbnQgPSByZXF1aXJlRXJyb3I7XHJcblx0XHRyZXR1cm4gcmVxdWlyZUVycm9yO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZW1haWxWYWx1ZSA9IHVzZXJuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xyXG5cdGNvbnN0IHBhc3N3b3JkVmFsdWUgPSBwYXNzd29yZElucHV0LnZhbHVlLnRyaW0oKTtcclxuXHJcblx0ZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdGUudGFyZ2V0LmFwcGVuZChzaG93U21hbGxMb2FkZXIoKSk7XHJcblx0ZXJyb3JUeHQuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XHJcblxyXG5cdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZlcmlmeUNyZWRlbnRpYWxzKGVtYWlsVmFsdWUsIHBhc3N3b3JkVmFsdWUpO1xyXG5cclxuXHRoaWRlU21hbGxMb2FkZXIoKTtcclxuXHRlLnRhcmdldC5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuXHRpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XHJcblx0XHRlcnJvclR4dC5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTtcclxuXHRcdGVycm9yVHh0LnRleHRDb250ZW50ID0gaW52YWxpZEVycm9yO1xyXG5cdFx0cmV0dXJuIGludmFsaWRFcnJvcjtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNob3dCaWdMb2FkZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgbG9hZGluZ0FyZWEgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImxvYWRpbmctYXJlYVwiXSk7XHJcblx0bG9hZGluZ0FyZWEuaW5uZXJIVE1MID0gYCAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJsb2FkZXItYmlnXCIgdmlld0JveD1cIjAgMCAxMjAgMTIwXCIgd2lkdGg9XCIxMjBcIiBoZWlnaHQ9XCIxMjBcIj5cclxuICAgICAgICAgICAgICAgIDxkZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD1cImxvYWRlci1hY2NlbnRcIiB4MT1cIjAlXCIgeTE9XCIwJVwiIHgyPVwiMTAwJVwiIHkyPVwiMCVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdG9wLWNvbG9yPVwiIzRkYThkYVwiIHN0b3Atb3BhY2l0eT1cIjAuOFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjcwJVwiIHN0b3AtY29sb3I9XCIjNGRhOGRhXCIgc3RvcC1vcGFjaXR5PVwiMC40XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMTAwJVwiIHN0b3AtY29sb3I9XCIjNGRhOGRhXCIgc3RvcC1vcGFjaXR5PVwiMFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cclxuICAgICAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3M9XCJsb2FkaW5nLWNpcmNsZS1iaWdcIiByPVwiMzVcIiBjeD1cIjYwXCIgY3k9XCI2MFwiPjwvY2lyY2xlPlxyXG4gICAgICAgICAgICA8L3N2Zz5gO1xyXG5cdHJldHVybiBsb2FkaW5nQXJlYTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGhpZGVCaWdMb2FkZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgbG9hZGluZ0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvYWRpbmctYXJlYVwiKTtcclxuXHRsb2FkaW5nQXJlYT8ucmVtb3ZlKCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2hvd1NtYWxsTG9hZGVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IGxvYWRpbmdBcmVhID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJsb2FkaW5nLWFyZWEtc21hbGxcIl0pO1xyXG5cdGxvYWRpbmdBcmVhLmlubmVySFRNTCA9IGA8c3ZnIGNsYXNzPVwibG9hZGVyLXNtYWxsXCIgdmlld0JveD1cIjAgMCAxMjAgMTIwXCIgd2lkdGg9XCIxMjBcIiBoZWlnaHQ9XCIxMjBcIj5cclxuICAgICAgICAgICAgICAgIDxkZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD1cImxvYWRlci1hY2NlbnQtc21hbGxcIiB4MT1cIjAlXCIgeTE9XCIwJVwiIHgyPVwiMTAwJVwiIHkyPVwiMCVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdG9wLWNvbG9yPVwid2hpdGVcIiBzdG9wLW9wYWNpdHk9XCIwLjhcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCI3MCVcIiBzdG9wLWNvbG9yPVwid2hpdGVcIiBzdG9wLW9wYWNpdHk9XCIwLjNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3RvcC1jb2xvcj1cIndoaXRlXCIgc3RvcC1vcGFjaXR5PVwiMFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cclxuICAgICAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3M9XCJsb2FkaW5nLWNpcmNsZS1zbWFsbFwiIHI9XCIxMlwiIGN4PVwiNjBcIiBjeT1cIjYwXCI+PC9jaXJjbGU+XHJcbiAgICAgICAgICAgIDwvc3ZnPmA7XHJcblxyXG5cdHJldHVybiBsb2FkaW5nQXJlYTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGhpZGVTbWFsbExvYWRlciA9ICgpID0+IHtcclxuXHRjb25zdCBsb2FkaW5nQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9hZGluZy1hcmVhLXNtYWxsXCIpO1xyXG5cdGxvYWRpbmdBcmVhLnJlbW92ZSgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVByb2ZpbGVzUGFnZSA9ICh7XHJcblx0cHJvZmlsZXM6IHtcclxuXHRcdHRleHQ6IHsgdGl0bGUsIGFkZFByb2ZpbGVJbmZvIH0sXHJcblx0XHRhcmlhOiB7IGFkZFByb2ZpbGVCdG4sIHVzZXJQcm9maWxlQnRuLCB1c2VyQnRuQ3VzdG9taXplLCByZW1vdmVVc2VySW5mbyB9LFxyXG5cdH0sXHJcblx0ZXJyb3JQb3B1cDoge1xyXG5cdFx0dGV4dDogeyBtYXhQcm9maWxlcywgZW1wdHlGaWVsZCB9LFxyXG5cdH0sXHJcbn0pID0+IHtcclxuXHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHRjb25zdCB1c2VyUHJvZmlsZXNMaXN0ID0gdXNlckRhdGE/LnVzZXJQcm9maWxlcztcclxuXHJcblx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcblxyXG5cdGNvbnRhaW5lci5hcHBlbmQoc2hvd0JpZ0xvYWRlcigpKTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRjb25zdCBwcm9maWxlc1BhZ2VNYWluID0gY3JlYXRlRWxlbWVudChcIm1haW5cIiwgW1wibWFpbi1wcm9maWxlc1wiXSk7XHJcblx0XHRjb25zdCB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJ3cmFwcGVyXCJdKTtcclxuXHRcdGNvbnN0IHByb2ZpbGVzVGl0bGUgPSBjcmVhdGVFbGVtZW50KFwiaDFcIiwgW1xyXG5cdFx0XHRcIm1haW5fX3RpdGxlXCIsXHJcblx0XHRcdFwibWFpbi1wcm9maWxlc19fdGl0bGVcIixcclxuXHRcdF0pO1xyXG5cdFx0Y29uc3QgcHJvZmlsZXNCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX2JveFwiXSk7XHJcblxyXG5cdFx0cHJvZmlsZXNUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG5cclxuXHRcdGlmICh1c2VyUHJvZmlsZXNMaXN0ICYmIE9iamVjdC5rZXlzKHVzZXJQcm9maWxlc0xpc3QpLmxlbmd0aCAhPT0gMCkge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGtleSBpbiB1c2VyUHJvZmlsZXNMaXN0KSB7XHJcblx0XHRcdFx0cHJvZmlsZXNCb3guYXBwZW5kKFxyXG5cdFx0XHRcdFx0Y3JlYXRlUHJvZmlsZShcclxuXHRcdFx0XHRcdFx0dXNlclByb2ZpbGVCdG4sXHJcblx0XHRcdFx0XHRcdHVzZXJCdG5DdXN0b21pemUsXHJcblx0XHRcdFx0XHRcdHVzZXJCdG5DdXN0b21pemUsXHJcblx0XHRcdFx0XHRcdGVtcHR5RmllbGQsXHJcblx0XHRcdFx0XHRcdHJlbW92ZVVzZXJJbmZvLFxyXG5cdFx0XHRcdFx0XHRrZXksXHJcblx0XHRcdFx0XHRcdHVzZXJQcm9maWxlc0xpc3Rba2V5XVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHByb2ZpbGVzQm94LmFwcGVuZChcclxuXHRcdFx0Y3JlYXRlUHJvZmlsZUFkZEJ0bihcclxuXHRcdFx0XHRhZGRQcm9maWxlQnRuLFxyXG5cdFx0XHRcdGFkZFByb2ZpbGVJbmZvLFxyXG5cdFx0XHRcdHVzZXJQcm9maWxlQnRuLFxyXG5cdFx0XHRcdHByb2ZpbGVzQm94LFxyXG5cdFx0XHRcdHVzZXJCdG5DdXN0b21pemUsXHJcblx0XHRcdFx0dXNlckJ0bkN1c3RvbWl6ZSxcclxuXHRcdFx0XHRtYXhQcm9maWxlcyxcclxuXHRcdFx0XHRlbXB0eUZpZWxkLFxyXG5cdFx0XHRcdHJlbW92ZVVzZXJJbmZvXHJcblx0XHRcdClcclxuXHRcdCk7XHJcblx0XHR3cmFwcGVyLmFwcGVuZChwcm9maWxlc1RpdGxlLCBwcm9maWxlc0JveCk7XHJcblx0XHRwcm9maWxlc1BhZ2VNYWluLmFwcGVuZCh3cmFwcGVyKTtcclxuXHJcblx0XHRjb250YWluZXIuYXBwZW5kKHByb2ZpbGVzUGFnZU1haW4pO1xyXG5cdFx0aGlkZUJpZ0xvYWRlcigpO1xyXG5cdH0sIDUwMCk7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVQcm9maWxlID0gKFxyXG5cdGFyaWFJbmZvLFxyXG5cdHVzZXJCdG5JbmZvLFxyXG5cdHNhdmVCdG5BcmlhLFxyXG5cdGVtcHR5RmllbGRFcnJvcixcclxuXHRyZW1vdmVBcmlhLFxyXG5cdGV4aXN0aW5nUHJvZmlsZUlkID0gbnVsbCxcclxuXHRleGlzdGluZ1Byb2ZpbGVOYW1lID0gbnVsbFxyXG4pID0+IHtcclxuXHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHRjb25zdCBleGlzdGluZ1Byb2ZpbGVzID0gdXNlckRhdGE/LnVzZXJQcm9maWxlcyB8fCB7fTtcclxuXHJcblx0aWYgKHVzZXJEYXRhID09PSBudWxsKSB7XHJcblx0XHRzaG93RXJyb3JQb3B1cChcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWRcIiwgXCIjZGM0YTM0XCIpO1xyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuXHRcdH0sIEhJREVfUE9QVVBfVElNRSk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRsZXQgY29sb3I7XHJcblx0bGV0IHByb2ZpbGVJZDtcclxuXHRsZXQgcHJvZmlsZU5hbWU7XHJcblxyXG5cdGNvbnN0IGNvbG9ycyA9IFtcIiNkYzRhMzRcIiwgXCIjMDYyRTYzXCIsIFwiI0ZBQzA0NFwiXTtcclxuXHJcblx0aWYgKGV4aXN0aW5nUHJvZmlsZUlkKSB7XHJcblx0XHRwcm9maWxlSWQgPSBleGlzdGluZ1Byb2ZpbGVJZDtcclxuXHRcdHByb2ZpbGVOYW1lID0gZXhpc3RpbmdQcm9maWxlTmFtZS5uYW1lO1xyXG5cdFx0Y29uc3QgcHJvZmlsZU51bWJlciA9IHBhcnNlSW50KHByb2ZpbGVJZC5zcGxpdChcIi1cIikucG9wKCkpO1xyXG5cdFx0Y29sb3IgPSBjb2xvcnNbcHJvZmlsZU51bWJlciAtIDFdO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRpZiAoT2JqZWN0LmtleXMoZXhpc3RpbmdQcm9maWxlcykubGVuZ3RoID49IDMpIHJldHVybjtcclxuXHJcblx0XHRsZXQgbmV4dE51bWJlciA9IDE7XHJcblx0XHR3aGlsZSAoZXhpc3RpbmdQcm9maWxlc1tgdXNlci1wcm9maWxlLSR7bmV4dE51bWJlcn1gXSkge1xyXG5cdFx0XHRuZXh0TnVtYmVyKys7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJvZmlsZUlkID0gYHVzZXItcHJvZmlsZS0ke25leHROdW1iZXJ9YDtcclxuXHRcdHByb2ZpbGVOYW1lID0gYEhhbmRzb21lIFVzZXIgJHtuZXh0TnVtYmVyfWA7XHJcblx0XHRjb2xvciA9IGNvbG9yc1tuZXh0TnVtYmVyIC0gMV07XHJcblx0fVxyXG5cclxuXHRjb25zdCB1c2VyUHJvZmlsZSA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wibWFpbi1wcm9maWxlc19fcHJvZmlsZVwiXSk7XHJcblx0Y29uc3QgdXNlckF2YXRhckJveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wibWFpbi1wcm9maWxlc19fYXZhdGFyXCJdKTtcclxuXHRjb25zdCB1c2VyUHJvZmlsZUJ0biA9IGNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgW1wibWFpbi1wcm9maWxlc19fYnRuXCJdLCB7XHJcblx0XHRcImFyaWEtbGFiZWxcIjogYXJpYUluZm8sXHJcblx0XHRcImRhdGEtaWRcIjogcHJvZmlsZUlkLFxyXG5cdH0pO1xyXG5cclxuXHRjb25zdCB1c2VyUHJvZmlsZUluZm9Cb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX3VzZXItaW5mb1wiXSk7XHJcblx0Y29uc3QgdXNlclByb2ZpbGVJbmZvID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFtcIm1haW4tcHJvZmlsZXNfX25hbWVcIl0sIHtcclxuXHRcdHR5cGU6IFwidGV4dFwiLFxyXG5cdFx0cmVhZG9ubHk6IHRydWUsXHJcblx0XHR2YWx1ZTogcHJvZmlsZU5hbWUsXHJcblx0fSk7XHJcblx0Y29uc3QgbmFtZUJvcmRlciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcIm5hbWUtYm9yZGVyXCJdKTtcclxuXHRjb25zdCBlZGl0VXNlckluZm9CdG4gPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJidXR0b25cIixcclxuXHRcdFtcIm1haW4tcHJvZmlsZXNfX2VkaXQtbmFtZVwiXSxcclxuXHRcdHsgXCJhcmlhLWxhYmVsXCI6IHVzZXJCdG5JbmZvIH1cclxuXHQpO1xyXG5cdGNvbnN0IHJlbW92ZVVzZXJCdG4gPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJidXR0b25cIixcclxuXHRcdFtcIm1haW4tcHJvZmlsZXNfX3JlbW92ZS11c2VyXCJdLFxyXG5cdFx0eyBcImFyaWEtbGFiZWxcIjogcmVtb3ZlQXJpYSB9XHJcblx0KTtcclxuXHRjb25zdCByZW1vdmVVc2VySWNvbiA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wibWFpbi1wcm9maWxlc19fcmVtb3ZlLWljb25cIl0sIHtcclxuXHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdFx0c3JjOiBcIi4vc3JjL2ljb25zL3JlbW92ZS1wcm9maWxlLWljb24uc3ZnXCIsXHJcblx0fSk7XHJcblx0Y29uc3QgZWRpdFVzZXJJbmZvSWNvbiA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wibWFpbi1wcm9maWxlc19fZWRpdC1pY29uXCJdLCB7XHJcblx0XHR3aWR0aDogXCIyNFwiLFxyXG5cdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRsb2FkaW5nOiBcImxhenlcIixcclxuXHRcdGFsdDogXCJcIixcclxuXHRcdHNyYzogXCIuL3NyYy9pY29ucy9lZGl0LnN2Z1wiLFxyXG5cdH0pO1xyXG5cclxuXHR1c2VyUHJvZmlsZUJ0bi5pbm5lckhUTUwgPSBgPHN2ZyBjbGFzcz1cIm1haW4tcHJvZmlsZXNfX2ltZ1wiIHdpZHRoPVwiMTUwXCIgaGVpZ2h0PVwiMTUwXCIgdmlld0JveD1cIjAgMCAyMDAgMjAwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxyXG4gICAgPGNpcmNsZSBjeD1cIjcwXCIgY3k9XCI3MFwiIHI9XCI4XCIgZmlsbD1cIndoaXRlXCIgLz5cclxuICAgIDxjaXJjbGUgY3g9XCIxMzBcIiBjeT1cIjcwXCIgcj1cIjhcIiBmaWxsPVwid2hpdGVcIiAvPlxyXG4gICAgPHBhdGggZD1cIk02MCAxMTAgUTEwMCAxNTAgMTQwIDExMFwiIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlLXdpZHRoPVwiNlwiXHJcbiAgICBmaWxsPVwidHJhbnNwYXJlbnRcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgLz5cclxuICAgIDwvc3ZnPmA7XHJcblx0dXNlclByb2ZpbGVCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XHJcblxyXG5cdHVzZXJBdmF0YXJCb3guYXBwZW5kKHVzZXJQcm9maWxlQnRuKTtcclxuXHRlZGl0VXNlckluZm9CdG4uYXBwZW5kKGVkaXRVc2VySW5mb0ljb24pO1xyXG5cdHJlbW92ZVVzZXJCdG4uYXBwZW5kKHJlbW92ZVVzZXJJY29uKTtcclxuXHR1c2VyUHJvZmlsZUluZm9Cb3guYXBwZW5kKFxyXG5cdFx0dXNlclByb2ZpbGVJbmZvLFxyXG5cdFx0bmFtZUJvcmRlcixcclxuXHRcdGVkaXRVc2VySW5mb0J0bixcclxuXHRcdHJlbW92ZVVzZXJCdG5cclxuXHQpO1xyXG5cdHVzZXJQcm9maWxlLmFwcGVuZCh1c2VyQXZhdGFyQm94LCB1c2VyUHJvZmlsZUluZm9Cb3gpO1xyXG5cclxuXHRpZiAoIWV4aXN0aW5nUHJvZmlsZUlkKSB7XHJcblx0XHRjb25zdCB1cGRhdGVkUHJvZmlsZXMgPSB7XHJcblx0XHRcdC4uLmV4aXN0aW5nUHJvZmlsZXMsXHJcblx0XHRcdFtwcm9maWxlSWRdOiB7XHJcblx0XHRcdFx0bmFtZTogcHJvZmlsZU5hbWUsXHJcblx0XHRcdH0sXHJcblx0XHR9O1xyXG5cdFx0c2V0VXNlclByZWZlcmVuY2UoXCJ1c2VyUHJvZmlsZXNcIiwgdXBkYXRlZFByb2ZpbGVzLCB1c2VyRGF0YSk7XHJcblx0fVxyXG5cclxuXHRlZGl0VXNlckluZm9CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRlZGl0VXNlcm5hbWUoZSwgdXNlclByb2ZpbGVJbmZvQm94LCBzYXZlQnRuQXJpYSwgZW1wdHlGaWVsZEVycm9yKTtcclxuXHR9KTtcclxuXHRyZW1vdmVVc2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdFx0cmVtb3ZlVXNlcihlKTtcclxuXHR9KTtcclxuXHJcblx0dXNlclByb2ZpbGVJbmZvLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcblx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xyXG5cdFx0XHRzYXZlVXNlcm5hbWUoZSwgZW1wdHlGaWVsZEVycm9yKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHR1c2VyUHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHNldEN1cnJlbnRQcm9maWxlKGUpKTtcclxuXHJcblx0dXNlclByb2ZpbGUuY2xhc3NMaXN0LmFkZChcInZpc2libGVcIik7XHJcblx0cmV0dXJuIHVzZXJQcm9maWxlO1xyXG59O1xyXG4vLyB3eWLDs3IgcHJvZmlsdVxyXG5jb25zdCBzZXRDdXJyZW50UHJvZmlsZSA9IChlKSA9PiB7XHJcblx0Y29uc3QgdXNlckRhdGEgPSBnZXREYXRhKCk7XHJcblx0Y29uc3QgcHJvZmlsZURhdGEgPSBlLnRhcmdldC5kYXRhc2V0LmlkO1xyXG5cclxuXHRzZXRVc2VyUHJlZmVyZW5jZShcImN1cnJlbnRQcm9maWxlXCIsIHByb2ZpbGVEYXRhLCB1c2VyRGF0YSk7XHJcblxyXG5cdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJicm93c2UuaHRtbFwiO1xyXG59O1xyXG4vLyBrb25pZWMgd3lib3J1IHByb2ZpbHVcclxuXHJcbmNvbnN0IGNyZWF0ZVByb2ZpbGVBZGRCdG4gPSAoXHJcblx0YXJpYUluZm8sXHJcblx0aW5mbyxcclxuXHR1c2VyQnRuQXJpYSxcclxuXHRwcm9maWxlc0JveCxcclxuXHR1c2VyQnRuSW5mbyxcclxuXHRzYXZlQnRuQXJpYSxcclxuXHRtYXhQcm9maWxlc0Vycm9yLFxyXG5cdGVtcHR5RmllbGRFcnJvcixcclxuXHRyZW1vdmVBcmlhXHJcbikgPT4ge1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX2FkZC1wcm9maWxlXCJdKTtcclxuXHRjb25zdCBhZGRQcm9maWxlQXZhdGFyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJtYWluLXByb2ZpbGVzX19hdmF0YXJcIl0pO1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVCdG4gPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJidXR0b25cIixcclxuXHRcdFtcIm1haW4tcHJvZmlsZXNfX2J0blwiLCBcIm1haW4tcHJvZmlsZXNfX2J0bi0tYWRkLXByb2ZpbGVcIl0sXHJcblx0XHR7IFwiYXJpYS1sYWJlbFwiOiBhcmlhSW5mbyB9XHJcblx0KTtcclxuXHRjb25zdCBhZGRQcm9maWxlUGx1c0ljb24gPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcIm1haW4tcHJvZmlsZXNfX2FkZC1pbWdcIl0sIHtcclxuXHRcdHNyYzogXCIuL3NyYy9pY29ucy9hZGQtcHJvZmlsZS5zdmdcIixcclxuXHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVJbmZvID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1wibWFpbi1wcm9maWxlc19fbmFtZVwiXSk7XHJcblxyXG5cdGFkZFByb2ZpbGVJbmZvLnRleHRDb250ZW50ID0gaW5mbztcclxuXHJcblx0YWRkUHJvZmlsZUJ0bi5hcHBlbmQoYWRkUHJvZmlsZVBsdXNJY29uKTtcclxuXHRhZGRQcm9maWxlQXZhdGFyLmFwcGVuZChhZGRQcm9maWxlQnRuKTtcclxuXHRhZGRQcm9maWxlQm94LmFwcGVuZChhZGRQcm9maWxlQXZhdGFyLCBhZGRQcm9maWxlSW5mbyk7XHJcblxyXG5cdGFkZFByb2ZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdGNvbnN0IHVzZXJEYXRhID0gZ2V0RGF0YSgpO1xyXG5cdFx0Y29uc3QgZXhpc3RpbmdQcm9maWxlcyA9IHVzZXJEYXRhPy51c2VyUHJvZmlsZXMgfHwge307XHJcblxyXG5cdFx0aWYgKE9iamVjdC5rZXlzKGV4aXN0aW5nUHJvZmlsZXMpLmxlbmd0aCA+PSAzKSB7XHJcblx0XHRcdHNob3dFcnJvclBvcHVwKG1heFByb2ZpbGVzRXJyb3IsIFwiI2RjNGEzNFwiKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHByb2ZpbGUgPSBjcmVhdGVQcm9maWxlKFxyXG5cdFx0XHR1c2VyQnRuQXJpYSxcclxuXHRcdFx0dXNlckJ0bkluZm8sXHJcblx0XHRcdHNhdmVCdG5BcmlhLFxyXG5cdFx0XHRlbXB0eUZpZWxkRXJyb3IsXHJcblx0XHRcdHJlbW92ZUFyaWFcclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKHByb2ZpbGUpIHtcclxuXHRcdFx0cHJvZmlsZXNCb3guaW5zZXJ0QmVmb3JlKHByb2ZpbGUsIGFkZFByb2ZpbGVCb3gpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRyZXR1cm4gYWRkUHJvZmlsZUJveDtcclxufTtcclxuXHJcbmNvbnN0IGVkaXRVc2VybmFtZSA9IChlLCBwYXJlbnQsIHNhdmVCdG5BcmlhLCBlbXB0eUZpZWxkRXJyb3IpID0+IHtcclxuXHRyZXNldFN0YXRlT2ZFZGl0aW5nKGUpO1xyXG5cclxuXHRjb25zdCBlZGl0QnRuID0gZS50YXJnZXQ7XHJcblx0Y29uc3QgbmFtZVRvRWRpdCA9IGVkaXRCdG5cclxuXHRcdC5jbG9zZXN0KFwiLm1haW4tcHJvZmlsZXNfX3Byb2ZpbGVcIilcclxuXHRcdC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tcHJvZmlsZXNfX25hbWVcIik7XHJcblxyXG5cdGNvbnN0IHNhdmVCdG4gPSBjcmVhdGVTYXZlQnRuKHNhdmVCdG5BcmlhKTtcclxuXHJcblx0ZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdHNhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHJcblx0cGFyZW50LmFwcGVuZChzYXZlQnRuKTtcclxuXHJcblx0bmFtZVRvRWRpdC5mb2N1cygpO1xyXG5cdG5hbWVUb0VkaXQuc2VsZWN0KCk7XHJcblx0bmFtZVRvRWRpdC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcclxuXHRuYW1lVG9FZGl0LmNsYXNzTGlzdC5hZGQoXCJmb2N1c2VkXCIpO1xyXG5cclxuXHRzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdFx0c2F2ZVVzZXJuYW1lKGUsIGVtcHR5RmllbGRFcnJvcik7XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBzYXZlVXNlcm5hbWUgPSAoZSwgZW1wdHlGaWVsZEVycm9yKSA9PiB7XHJcblx0Y29uc3QgdXNlckRhdGEgPSBnZXREYXRhKCk7XHJcblx0Y29uc3QgZXhpc3RpbmdQcm9maWxlcyA9IHVzZXJEYXRhPy51c2VyUHJvZmlsZXMgfHwgW107XHJcblxyXG5cdGNvbnN0IHNhdmVCdG4gPSBlLnRhcmdldDtcclxuXHRjb25zdCBjbG9zZXN0UHJvZmlsZSA9IHNhdmVCdG4uY2xvc2VzdChcIi5tYWluLXByb2ZpbGVzX19wcm9maWxlXCIpO1xyXG5cdGNvbnN0IGNsb3Nlc3RQcm9maWxlSWQgPSBjbG9zZXN0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLm1haW4tcHJvZmlsZXNfX2J0blwiKVxyXG5cdFx0LmRhdGFzZXQuaWQ7XHJcblx0Y29uc3QgY2xvc2VzdFByb2ZpbGVOYW1lID0gY2xvc2VzdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcclxuXHRcdFwiLm1haW4tcHJvZmlsZXNfX25hbWVcIlxyXG5cdCk7XHJcblxyXG5cdGNvbnN0IGFsbEVkaXRCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tYWluLXByb2ZpbGVzX19lZGl0LW5hbWVcIik7XHJcblxyXG5cdGFsbEVkaXRCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpKTtcclxuXHJcblx0aWYgKGNsb3Nlc3RQcm9maWxlTmFtZS52YWx1ZS50cmltKCkgPT09IFwiXCIpIHtcclxuXHRcdGFsbEVkaXRCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpKTtcclxuXHRcdHJldHVybiBzaG93RXJyb3JQb3B1cChlbXB0eUZpZWxkRXJyb3IsIFwiI0ZBQzA0NFwiKTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IHVwZGF0ZWRQcm9maWxlcyA9IHtcclxuXHRcdC4uLmV4aXN0aW5nUHJvZmlsZXMsXHJcblx0XHRbY2xvc2VzdFByb2ZpbGVJZF06IHtcclxuXHRcdFx0Li4uZXhpc3RpbmdQcm9maWxlc1tjbG9zZXN0UHJvZmlsZUlkXSxcclxuXHRcdFx0bmFtZTogY2xvc2VzdFByb2ZpbGVOYW1lLnZhbHVlLFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cclxuXHRzZXRVc2VyUHJlZmVyZW5jZShcInVzZXJQcm9maWxlc1wiLCB1cGRhdGVkUHJvZmlsZXMsIHVzZXJEYXRhKTtcclxuXHJcblx0cmVzZXRTdGF0ZU9mRWRpdGluZyhlKTtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZVNhdmVCdG4gPSAoc2F2ZUJ0bkFyaWEpID0+IHtcclxuXHRjb25zdCBzYXZlVXNlckluZm9CdG4gPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJidXR0b25cIixcclxuXHRcdFtcIm1haW4tcHJvZmlsZXNfX3NhdmUtbmFtZVwiLCBcImhpZGRlblwiXSxcclxuXHRcdHsgXCJhcmlhLWxhYmVsXCI6IHNhdmVCdG5BcmlhIH1cclxuXHQpO1xyXG5cdGNvbnN0IHNhdmVVc2VySW5mb0ljb24gPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcIm1haW4tcHJvZmlsZXNfX3NhdmUtaWNvblwiXSwge1xyXG5cdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdFx0bG9hZGluZzogXCJsYXp5XCIsXHJcblx0XHRhbHQ6IFwiXCIsXHJcblx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvc2F2ZS5zdmdcIixcclxuXHR9KTtcclxuXHJcblx0c2F2ZVVzZXJJbmZvQnRuLmFwcGVuZChzYXZlVXNlckluZm9JY29uKTtcclxuXHJcblx0cmV0dXJuIHNhdmVVc2VySW5mb0J0bjtcclxufTtcclxuXHJcbmNvbnN0IHJlc2V0U3RhdGVPZkVkaXRpbmcgPSAoZSkgPT4ge1xyXG5cdGNvbnN0IGZvY3VzZWROYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9jdXNlZFwiKTtcclxuXHRjb25zdCBhbGxTYXZlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWFpbi1wcm9maWxlc19fc2F2ZS1uYW1lXCIpO1xyXG5cdGNvbnN0IGFsbEVkaXRCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tYWluLXByb2ZpbGVzX19lZGl0LW5hbWVcIik7XHJcblxyXG5cdGZvY3VzZWROYW1lcy5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0ZWwuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgdHJ1ZSk7XHJcblx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9jdXNlZFwiKTtcclxuXHRcdGVsLmJsdXIoKTtcclxuXHR9KTtcclxuXHRhbGxTYXZlQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpKTtcclxuXHRhbGxFZGl0QnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpKTtcclxufTtcclxuXHJcbmxldCBwb3B1cFZpc2libGUgPSBmYWxzZTtcclxuZXhwb3J0IGNvbnN0IHNob3dFcnJvclBvcHVwID0gKHRleHQsIGNvbG9yKSA9PiB7XHJcblx0aWYgKHBvcHVwVmlzaWJsZSkgcmV0dXJuO1xyXG5cdHBvcHVwVmlzaWJsZSA9IHRydWU7XHJcblxyXG5cdGNvbnN0IHJvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcblxyXG5cdGNvbnN0IHBvcHVwID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJlcnJvci1wb3B1cFwiXSk7XHJcblx0Y29uc3QgcG9wdXBFcnJvciA9IGNyZWF0ZUVsZW1lbnQoXCJwXCIsIFtcImVycm9yLXBvcHVwX190ZXh0XCJdKTtcclxuXHJcblx0cG9wdXBFcnJvci50ZXh0Q29udGVudCA9IHRleHQ7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZXJyb3JUeHRDb2xvclwiLCBjb2xvcik7XHJcblxyXG5cdHBvcHVwLmFwcGVuZChwb3B1cEVycm9yKTtcclxuXHRjb250YWluZXIuYXBwZW5kKHBvcHVwKTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdH0sIDIwMDApO1xyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0cG9wdXAucmVtb3ZlKCk7XHJcblx0XHRwb3B1cFZpc2libGUgPSBmYWxzZTtcclxuXHR9LCBISURFX1BPUFVQX1RJTUUpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVzZXJQYW5lbCA9ICgpID0+IHtcclxuXHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHJcblx0aWYgKCF1c2VyRGF0YSkgc2hvd0Vycm9yUG9wdXAoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkXCIsIFwiI2RjNGEzNFwiKTtcclxuXHJcblx0Y29uc3QgY3VycmVudFByb2ZpbGUgPSB1c2VyRGF0YT8uY3VycmVudFByb2ZpbGU7XHJcblx0Y29uc3QgY3VycmVudFByb2ZpbGVOYW1lID0gdXNlckRhdGE/LnVzZXJQcm9maWxlc1tjdXJyZW50UHJvZmlsZV0/Lm5hbWU7XHJcblxyXG5cdGNvbnN0IHVzZXJQYW5lbCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wiYnJvd3NlLWhlYWRlcl9fdXNlci1wYW5lbFwiXSk7XHJcblx0Y29uc3QgdXNlckluZm8gPSBjcmVhdGVFbGVtZW50KFwicFwiLCBbXCJicm93c2UtaGVhZGVyX191c2VyLWluZm9cIl0pO1xyXG5cdGNvbnN0IHVzZXJuYW1lID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1wiYnJvd3NlLWhlYWRlcl9fdXNlcm5hbWVcIl0pO1xyXG5cdGNvbnN0IGRpdmlkZXIgPSBjcmVhdGVFbGVtZW50KFwiaHJcIiwgW1wiYnJvd3NlLWhlYWRlcl9faHJcIl0pO1xyXG5cdGNvbnN0IHVzZXJQYW5lbExpc3QgPSBjcmVhdGVFbGVtZW50KFwidWxcIiwgW1wiYnJvd3NlLWhlYWRlcl9fdXNlci1wYW5lbC1saXN0XCJdKTtcclxuXHJcblx0Y29uc3Qgc2V0dGluZ3NJY29uID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiaW1nXCIsXHJcblx0XHRbXCJicm93c2UtaGVhZGVyX19pY29uXCIsIFwiYnJvd3NlLWhlYWRlcl9faWNvbi1zZXR0aW5nc1wiXSxcclxuXHRcdHtcclxuXHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdGFsdDogXCJcIixcclxuXHRcdFx0c3JjOiBcIi4vc3JjL2ljb25zL3NldHRpbmdzLWljb24uc3ZnXCIsXHJcblx0XHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0fVxyXG5cdCk7XHJcblx0Y29uc3Qgc3dhcFByb2ZpbGVJY29uID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiaW1nXCIsXHJcblx0XHRbXCJicm93c2UtaGVhZGVyX19pY29uXCIsIFwiYnJvd3NlLWhlYWRlcl9faWNvbi1zZXR0aW5nc1wiXSxcclxuXHRcdHtcclxuXHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdGFsdDogXCJcIixcclxuXHRcdFx0c3JjOiBcIi4vc3JjL2ljb25zL3N3YXAtaWNvbi5zdmdcIixcclxuXHRcdFx0bG9hZGluZzogXCJsYXp5XCIsXHJcblx0XHR9XHJcblx0KTtcclxuXHRjb25zdCBsb2dvdXRJY29uID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiaW1nXCIsXHJcblx0XHRbXCJicm93c2UtaGVhZGVyX19pY29uXCIsIFwiYnJvd3NlLWhlYWRlcl9faWNvbi1zZXR0aW5nc1wiXSxcclxuXHRcdHtcclxuXHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdGFsdDogXCJcIixcclxuXHRcdFx0c3JjOiBcIi4vc3JjL2ljb25zL2xvZ291dC1pY29uLnN2Z1wiLFxyXG5cdFx0XHRsb2FkaW5nOiBcImxhenlcIixcclxuXHRcdH1cclxuXHQpO1xyXG5cclxuXHRjb25zdCB1c2VyUGFuZWxTZXR0aW5ncyA9IGNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBbXHJcblx0XHRcImJyb3dzZS1oZWFkZXJfX3VzZXItcGFuZWwtb3B0aW9uXCIsXHJcblx0XSk7XHJcblx0Y29uc3QgdXNlclBhbmVsU2V0dGluZ3NMaW5rID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiYVwiLFxyXG5cdFx0W1xyXG5cdFx0XHRcImJyb3dzZS1oZWFkZXJfX3VzZXItcGFuZWwtbGlua1wiLFxyXG5cdFx0XHRcImJyb3dzZS1oZWFkZXJfX3VzZXItcGFuZWwtbGluay0tc2V0dGluZ3NcIixcclxuXHRcdF0sXHJcblx0XHR7IGhyZWY6IFwiXCIgfVxyXG5cdCk7XHJcblxyXG5cdGNvbnN0IHVzZXJQYW5lbExvZ291dCA9IGNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBbXHJcblx0XHRcImJyb3dzZS1oZWFkZXJfX3VzZXItcGFuZWwtb3B0aW9uXCIsXHJcblx0XSk7XHJcblx0Y29uc3QgdXNlclBhbmVsTG9nb3V0TGluayA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImFcIixcclxuXHRcdFtcclxuXHRcdFx0XCJicm93c2UtaGVhZGVyX191c2VyLXBhbmVsLWxpbmtcIixcclxuXHRcdFx0XCJicm93c2UtaGVhZGVyX191c2VyLXBhbmVsLWxpbmstLWxvZ291dFwiLFxyXG5cdFx0XSxcclxuXHRcdHsgaHJlZjogXCJcIiB9XHJcblx0KTtcclxuXHRjb25zdCB1c2VyUGFuZWxTd2FwUHJvZmlsZSA9IGNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBbXHJcblx0XHRcImJyb3dzZS1oZWFkZXJfX3VzZXItcGFuZWwtb3B0aW9uXCIsXHJcblx0XSk7XHJcblx0Y29uc3QgdXNlclBhbmVsU3dhcFByb2ZpbGVMaW5rID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiYVwiLFxyXG5cdFx0W1xyXG5cdFx0XHRcImJyb3dzZS1oZWFkZXJfX3VzZXItcGFuZWwtbGlua1wiLFxyXG5cdFx0XHRcImJyb3dzZS1oZWFkZXJfX3VzZXItcGFuZWwtbGluay0tc3dhcC1wcm9maWxlXCIsXHJcblx0XHRdLFxyXG5cdFx0eyBocmVmOiBcInByb2ZpbGVzLmh0bWxcIiB9XHJcblx0KTtcclxuXHJcblx0dXNlcm5hbWUudGV4dENvbnRlbnQgPSBjdXJyZW50UHJvZmlsZU5hbWU7XHJcblx0dXNlckluZm8udGV4dENvbnRlbnQgPVxyXG5cdFx0dXNlckRhdGE/LnRyYW5zbGF0aW9ucz8uYnJvd3NlUGFnZT8udXNlclBhbmVsPy5ncmVldGluZztcclxuXHR1c2VySW5mby5hcHBlbmQodXNlcm5hbWUpO1xyXG5cclxuXHR1c2VyUGFuZWxTd2FwUHJvZmlsZUxpbmsudGV4dENvbnRlbnQgPVxyXG5cdFx0dXNlckRhdGE/LnRyYW5zbGF0aW9ucz8uYnJvd3NlUGFnZT8udXNlclBhbmVsPy5wcm9maWxlcztcclxuXHJcblx0dXNlclBhbmVsU2V0dGluZ3NMaW5rLnRleHRDb250ZW50ID1cclxuXHRcdHVzZXJEYXRhPy50cmFuc2xhdGlvbnM/LmJyb3dzZVBhZ2U/LnVzZXJQYW5lbD8uc2V0dGluZ3M7XHJcblx0dXNlclBhbmVsTG9nb3V0TGluay50ZXh0Q29udGVudCA9XHJcblx0XHR1c2VyRGF0YT8udHJhbnNsYXRpb25zPy5icm93c2VQYWdlPy51c2VyUGFuZWw/LmxvZ2luO1xyXG5cclxuXHR1c2VyUGFuZWxTd2FwUHJvZmlsZUxpbmsuYXBwZW5kKHN3YXBQcm9maWxlSWNvbik7XHJcblx0dXNlclBhbmVsU2V0dGluZ3NMaW5rLmFwcGVuZChzZXR0aW5nc0ljb24pO1xyXG5cdHVzZXJQYW5lbExvZ291dExpbmsuYXBwZW5kKGxvZ291dEljb24pO1xyXG5cclxuXHR1c2VyUGFuZWxTd2FwUHJvZmlsZS5hcHBlbmQodXNlclBhbmVsU3dhcFByb2ZpbGVMaW5rKTtcclxuXHR1c2VyUGFuZWxTZXR0aW5ncy5hcHBlbmQodXNlclBhbmVsU2V0dGluZ3NMaW5rKTtcclxuXHR1c2VyUGFuZWxMb2dvdXQuYXBwZW5kKHVzZXJQYW5lbExvZ291dExpbmspO1xyXG5cclxuXHR1c2VyUGFuZWxMaXN0LmFwcGVuZChcclxuXHRcdHVzZXJQYW5lbFN3YXBQcm9maWxlLFxyXG5cdFx0dXNlclBhbmVsU2V0dGluZ3MsXHJcblx0XHR1c2VyUGFuZWxMb2dvdXRcclxuXHQpO1xyXG5cclxuXHR1c2VyUGFuZWwuYXBwZW5kKHVzZXJJbmZvLCBkaXZpZGVyLCB1c2VyUGFuZWxMaXN0KTtcclxuXHJcblx0dXNlclBhbmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdFx0aWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCIuYnJvd3NlLWhlYWRlcl9fdXNlci1wYW5lbC1saW5rLS1sb2dvdXRcIikpIHtcclxuXHRcdFx0aGFuZGxlTG9nT3V0KGUpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRyZXR1cm4gdXNlclBhbmVsO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTG9nT3V0ID0gKGUpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdGNvbnN0IHVzZXJEYXRhID0gZ2V0RGF0YSgpO1xyXG5cdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5cdGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9hZGVyLWJpZ1wiKTtcclxuXHJcblx0aWYgKCF1c2VyRGF0YSkgcmV0dXJuO1xyXG5cdGlmIChsb2FkZXIpIHJldHVybjtcclxuXHJcblx0Y29udGFpbmVyLmFwcGVuZChzaG93QmlnTG9hZGVyKCkpO1xyXG5cdGNvbnRhaW5lci5hcHBlbmQoY3JlYXRlT3ZlcmxheSgpKTtcclxuXHRkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93WSA9IFwiaGlkZGVuXCI7XHJcblxyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0aGlkZUJpZ0xvYWRlcigpO1xyXG5cdFx0c2V0VXNlclByZWZlcmVuY2UoXCJsb2dnZWRJblwiLCBmYWxzZSk7XHJcblx0XHRzZXRVc2VyUHJlZmVyZW5jZShcImN1cnJlbnRQcm9maWxlXCIsIG51bGwpO1xyXG5cdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcImluZGV4Lmh0bWxcIjtcclxuXHR9LCBISURFX1BPUFVQX1RJTUUpO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlVXNlciA9IChlKSA9PiB7XHJcblx0Y29uc3QgdXNlckRhdGEgPSBnZXREYXRhKCk7XHJcblx0Y29uc3QgdXNlclByb2ZpbGVzID0gdXNlckRhdGE/LnVzZXJQcm9maWxlcztcclxuXHRjb25zdCBhbGxFZGl0QnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWFpbi1wcm9maWxlc19fZWRpdC1uYW1lXCIpO1xyXG5cclxuXHRjb25zdCBkZWxldGVCdG4gPSBlLnRhcmdldDtcclxuXHRjb25zdCBjbG9zZXN0UHJvZmlsZSA9IGRlbGV0ZUJ0bi5jbG9zZXN0KFwiLm1haW4tcHJvZmlsZXNfX3Byb2ZpbGVcIik7XHJcblx0Y29uc3QgY2xvc2VzdFByb2ZpbGVCdG4gPSBjbG9zZXN0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLm1haW4tcHJvZmlsZXNfX2J0blwiKTtcclxuXHRhbGxFZGl0QnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSk7XHJcblxyXG5cdGRlbGV0ZSB1c2VyUHJvZmlsZXNbY2xvc2VzdFByb2ZpbGVCdG4uZGF0YXNldC5pZF07XHJcblxyXG5cdHNldFVzZXJQcmVmZXJlbmNlKFwidXNlclByb2ZpbGVzXCIsIHVzZXJQcm9maWxlcywgdXNlckRhdGEpO1xyXG5cclxuXHRjbG9zZXN0UHJvZmlsZS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdGNsb3Nlc3RQcm9maWxlLnJlbW92ZSgpO1xyXG5cdH0sIDQwMCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlQnJvd3NlUGFnZSA9ICh7XHJcblx0aGVhZGVyOiB7XHJcblx0XHRhbHQ6IHsgbG9nbyB9LFxyXG5cdFx0YXJpYTogeyBsb2dvTGluayB9LFxyXG5cdH0sXHJcblx0YnJvd3NlUGFnZToge1xyXG5cdFx0bmFtZXM6IHsgZmlsbUxpbmssIHNlcmllc0xpbmssIG15TGlzdExpbmssIHNlYXJjaExpbmsgfSxcclxuXHRcdGFyaWE6IHsgdXNlckJ1dHRvbiB9LFxyXG5cdH0sXHJcbn0pID0+IHtcclxuXHRjb25zdCBoZWFkZXIgPSBjcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIsIFtcImJyb3dzZS1oZWFkZXJcIl0pO1xyXG5cdGNvbnN0IGxvZ29NYWluTGluayA9IGNyZWF0ZUVsZW1lbnQoXCJhXCIsIFtcImJyb3dzZS1oZWFkZXJfX2xvZ29cIl0sIHtcclxuXHRcdFwiYXJpYS1sYWJlbFwiOiBsb2dvTGluayxcclxuXHRcdGhyZWY6IFwiYnJvd3NlLmh0bWxcIixcclxuXHR9KTtcclxuXHRjb25zdCBsb2dvTWFpbkltZyA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wiYnJvd3NlLWhlYWRlcl9fbG9nby1pbWdcIl0sIHtcclxuXHRcdGFsdDogbG9nbyxcclxuXHRcdHNyYzogXCIuL3NyYy9pY29ucy9sb2dvLnN2Z1wiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IG1haW5UaXRsZSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcImJyb3dzZS1oZWFkZXJfX2xvZ28tdGV4dFwiXSk7XHJcblxyXG5cdG1haW5UaXRsZS50ZXh0Q29udGVudCA9IFwiU3RyZWFtXCI7XHJcblxyXG5cdGxvZ29NYWluTGluay5hcHBlbmQobG9nb01haW5JbWcsIG1haW5UaXRsZSk7XHJcblx0aGVhZGVyLmFwcGVuZChcclxuXHRcdGxvZ29NYWluTGluayxcclxuXHRcdGNyZWF0ZUJyb3dzZXJOYXYoZmlsbUxpbmssIHNlcmllc0xpbmssIG15TGlzdExpbmssIHNlYXJjaExpbmspLFxyXG5cdFx0Y3JlYXRlVXNlckJ0bih1c2VyQnV0dG9uKSxcclxuXHRcdGNyZWF0ZVVzZXJQYW5lbCgpXHJcblx0KTtcclxuXHJcblx0cmV0dXJuIGhlYWRlcjtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUJyb3dzZXJOYXYgPSAoZmlsbUxpbmssIHNlcmllc0xpbmssIG15TGlzdExpbmssIHNlYXJjaExpbmspID0+IHtcclxuXHRjb25zdCBuYXYgPSBjcmVhdGVFbGVtZW50KFwibmF2XCIsIFtcImJyb3dzZS1oZWFkZXJfX25hdlwiXSk7XHJcblx0Y29uc3QgbmF2TGlua3MgPSBjcmVhdGVFbGVtZW50KFwidWxcIiwgW1wiYnJvd3NlLWhlYWRlcl9fbGlua3NcIl0pO1xyXG5cclxuXHRjb25zdCBsaW5rTmFtZXMgPSBbXHJcblx0XHR7XHJcblx0XHRcdG5hbWU6IGZpbG1MaW5rLFxyXG5cdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvZmlsbS1pY29uLnN2Z1wiLFxyXG5cdFx0fSxcclxuXHRcdHsgbmFtZTogc2VyaWVzTGluaywgc3JjOiBcIi4vc3JjL2ljb25zL3Nlcmllcy1pY29uLnN2Z1wiIH0sXHJcblx0XHR7XHJcblx0XHRcdG5hbWU6IG15TGlzdExpbmssXHJcblx0XHRcdHNyYzogXCIuL3NyYy9pY29ucy9saXN0LWljb24uc3ZnXCIsXHJcblx0XHR9LFxyXG5cdFx0eyBuYW1lOiBzZWFyY2hMaW5rLCBzcmM6IFwiLi9zcmMvaWNvbnMvc2VhcmNoLWljb24uc3ZnXCIgfSxcclxuXHRdO1xyXG5cclxuXHRsaW5rTmFtZXMuZm9yRWFjaCgobGluaywgaW5kZXgpID0+IHtcclxuXHRcdGNvbnN0IHNyY3MgPSBbXCJtb3ZpZXMuaHRtbFwiLCBcInNlcmllcy5odG1sXCIsIFwibXktbGlzdC5odG1sXCIsIFwic2VhcmNoLmh0bWxcIl07XHJcblxyXG5cdFx0Y29uc3QgbGlzdEl0ZW0gPSBjcmVhdGVFbGVtZW50KFwibGlcIiwgW1wiYnJvd3NlLWhlYWRlcl9faXRlbVwiXSk7XHJcblx0XHRjb25zdCBsaW5rRWwgPSBjcmVhdGVFbGVtZW50KFwiYVwiLCBbXCJicm93c2UtaGVhZGVyX19saW5rXCJdLCB7XHJcblx0XHRcdGhyZWY6IHNyY3NbaW5kZXhdLFxyXG5cdFx0fSk7XHJcblx0XHRjb25zdCBpY29uID0gY3JlYXRlRWxlbWVudChcImltZ1wiLCBbXCJicm93c2UtaGVhZGVyX19saW5rLWljb25cIl0sIHtcclxuXHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0XHRzcmM6IGxpbmsuc3JjLFxyXG5cdFx0XHRhbHQ6IFwiXCIsXHJcblx0XHR9KTtcclxuXHRcdGNvbnN0IHRleHQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXCJicm93c2UtaGVhZGVyX19saW5rLXRleHRcIl0pO1xyXG5cclxuXHRcdHRleHQudGV4dENvbnRlbnQgPSBsaW5rLm5hbWU7XHJcblxyXG5cdFx0bGlua0VsLmFwcGVuZChpY29uLCB0ZXh0KTtcclxuXHRcdGxpc3RJdGVtLmFwcGVuZChsaW5rRWwpO1xyXG5cclxuXHRcdG5hdkxpbmtzLmFwcGVuZChsaXN0SXRlbSk7XHJcblx0fSk7XHJcblxyXG5cdG5hdi5hcHBlbmQobmF2TGlua3MpO1xyXG5cclxuXHRyZXR1cm4gbmF2O1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlVXNlckJ0biA9ICh1c2VyQnRuQXJpYSkgPT4ge1xyXG5cdGNvbnN0IHVzZXJCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImJyb3dzZS1oZWFkZXJfX3VzZXItYm94XCJdKTtcclxuXHRjb25zdCB1c2VyQnRuID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJicm93c2UtaGVhZGVyX191c2VyXCJdLCB7XHJcblx0XHRcImFyaWEtbGFiZWxcIjogdXNlckJ0bkFyaWEsXHJcblx0fSk7XHJcblx0Y29uc3QgdXNlckljb24gPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcImJyb3dzZS1oZWFkZXJfX3VzZXItaWNvblwiXSwge1xyXG5cdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdFx0bG9hZGluZzogXCJsYXp5XCIsXHJcblx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvdXNlci1pY29uLnN2Z1wiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdH0pO1xyXG5cclxuXHR1c2VyQnRuLmFwcGVuZCh1c2VySWNvbik7XHJcblx0dXNlckJveC5hcHBlbmQodXNlckJ0bik7XHJcblxyXG5cdHVzZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdHNob3dVc2VyUGFuZWwodXNlckJveCk7XHJcblx0fSk7XHJcblxyXG5cdHJldHVybiB1c2VyQm94O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1haW5IZXJvU2VjdGlvbiA9IChtb3ZpZXMsIHRyYW5zbGF0aW9ucywgcGFyZW50KSA9PiB7XHJcblx0Y29uc3QgYnJvd3NlTWFpbiA9IGNyZWF0ZUVsZW1lbnQoXCJtYWluXCIsIFtcImJyb3dzZS1tYWluXCJdKTtcclxuXHRjb25zdCBicm93c2VNYWluU2VjdGlvbiA9IGNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIsIFtcclxuXHRcdFwiYnJvd3NlLW1haW5fX2hlcm8tc2VjdGlvblwiLFxyXG5cdF0pO1xyXG5cdGNvbnN0IGltYWdlc0Nhcm91c2VsbCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1xyXG5cdFx0XCJicm93c2UtbWFpbl9faW1hZ2UtY2Fyb3VzZWxsXCIsXHJcblx0XSk7XHJcblx0Y29uc3QgaW1hZ2VzSW5zaWRlU2xpZGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJicm93c2UtbWFpbl9faW1hZ2VzXCJdKTtcclxuXHRtb3ZpZXMuZm9yRWFjaCgoeyBpZCwgdGl0bGUsIG5hbWUsIG92ZXJ2aWV3ID0gXCJcIiwgYmFja2Ryb3BfcGF0aCB9KSA9PiB7XHJcblx0XHRjb25zdCBpbWdTcmMgPSBiYWNrZHJvcF9wYXRoO1xyXG5cdFx0Y29uc3QgaW1hZ2VCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImJyb3dzZS1tYWluX19pbWctYm94XCJdKTtcclxuXHRcdGNvbnN0IGltYWdlID0gY3JlYXRlRWxlbWVudChcImltZ1wiLCBbXCJicm93c2UtbWFpbl9faW1nXCJdLCB7XHJcblx0XHRcdGFsdDogYCR7XHJcblx0XHRcdFx0dHJhbnNsYXRpb25zPy5icm93c2VQYWdlPy5jYXJvdXNlbGxJbWFnZXM/LmFyaWEuY2Fyb3VzZWxsSW1hZ2VBbHRcclxuXHRcdFx0fSAke3RpdGxlIHx8IG5hbWV9YCxcclxuXHRcdFx0c3JjOiBpbWdTcmNcclxuXHRcdFx0XHQ/IGdldEltYWdlVXJsKGltZ1NyYywgXCJvcmlnaW5hbFwiKVxyXG5cdFx0XHRcdDogXCIuL2Rpc3QvaW1nL2ltZy1wbGFjZWhvbGRlci5zdmdcIixcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgdGV4dEJveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wiYnJvd3NlLW1haW5fX3RleHQtYm94XCJdKTtcclxuXHRcdGNvbnN0IGZpbG1UaXRsZSA9IGNyZWF0ZUVsZW1lbnQoXCJoMlwiLCBbXCJicm93c2UtbWFpbl9fY2Fyb3VzZWxsLXRpdGxlXCJdKTtcclxuXHRcdGNvbnN0IGZpbG1JbmZvID0gY3JlYXRlRWxlbWVudChcInBcIiwgW1wiYnJvd3NlLW1haW5fX2Nhcm91c2VsbC1vdmVydmlld1wiXSwge1xyXG5cdFx0XHR0YWJpbmRleDogLTEsXHJcblx0XHR9KTtcclxuXHJcblx0XHRmaWxtVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuXHRcdGZpbG1JbmZvLnRleHRDb250ZW50ID0gb3ZlcnZpZXc7XHJcblxyXG5cdFx0dGV4dEJveC5hcHBlbmQoZmlsbVRpdGxlLCBmaWxtSW5mbywgY3JlYXRlQWN0aW9uQnV0dG9ucyhpZCwgdHJhbnNsYXRpb25zKSk7XHJcblx0XHRpbWFnZUJveC5hcHBlbmQoaW1hZ2UsIHRleHRCb3gpO1xyXG5cdFx0aW1hZ2VzSW5zaWRlU2xpZGVyLmFwcGVuZChpbWFnZUJveCk7XHJcblx0XHRpbWFnZXNDYXJvdXNlbGwuYXBwZW5kKGltYWdlc0luc2lkZVNsaWRlcik7XHJcblxyXG5cdFx0YnJvd3NlTWFpblNlY3Rpb24uYXBwZW5kKGltYWdlc0Nhcm91c2VsbCk7XHJcblx0XHRicm93c2VNYWluLmFwcGVuZChicm93c2VNYWluU2VjdGlvbik7XHJcblx0fSk7XHJcblx0cGFyZW50LmFwcGVuZChicm93c2VNYWluKTtcclxuXHJcblx0aW1hZ2VzQ2Fyb3VzZWxsLmFwcGVuZChjcmVhdGVDYXJvdXNlbGxDb250cm9scyhtb3ZpZXMsIHRyYW5zbGF0aW9ucykpO1xyXG59O1xyXG5jb25zdCBjcmVhdGVBY3Rpb25CdXR0b25zID0gKFxyXG5cdGlkLFxyXG5cdHtcclxuXHRcdGJyb3dzZVBhZ2U6IHtcclxuXHRcdFx0YWN0aW9uQnRuczogeyB0cmFpbGVyQnRuVGV4dCwgbW9yZUluZm9CdG5UZXh0IH0sXHJcblx0XHR9LFxyXG5cdH1cclxuKSA9PiB7XHJcblx0Y29uc3QgYWN0aW9uQnRuc1BhbmVsID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJicm93c2UtbWFpbl9fYWN0aW9uLWJ0bnNcIl0pO1xyXG5cdGNvbnN0IHNob3dUcmFpbGVyQnRuID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJicm93c2UtbWFpbl9fdHJhaWxlci1idG5cIl0sIHtcclxuXHRcdFwiZGF0YS10cmFpbGVyXCI6IGlkLFxyXG5cdFx0XCJkYXRhLXR5cGVcIjogXCJtb3ZpZVwiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IHNob3dUcmFpbGVyVGV4dCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcImJyb3dzZS1tYWluX19zZWUtdHJhaWxlclwiXSk7XHJcblx0Y29uc3Qgc2VlTW9yZUJ0biA9IGNyZWF0ZUVsZW1lbnQoXCJhXCIsIFtcImJyb3dzZS1tYWluX19zZWUtbW9yZS1idG5cIl0sIHtcclxuXHRcdFwiZGF0YS1tb3ZpZVwiOiBpZCxcclxuXHRcdGhyZWY6IGBleHBsb3JlLmh0bWw/aWQ9JHtpZH0mdHlwZT1tb3ZpZWAsXHJcblx0fSk7XHJcblxyXG5cdHNob3dUcmFpbGVyVGV4dC50ZXh0Q29udGVudCA9IHRyYWlsZXJCdG5UZXh0O1xyXG5cdHNlZU1vcmVCdG4udGV4dENvbnRlbnQgPSBtb3JlSW5mb0J0blRleHQ7XHJcblxyXG5cdHNob3dUcmFpbGVyQnRuLmlubmVySFRNTCA9IGA8c3ZnIGNsYXNzPVwiYnJvd3NlLW1haW5fX3RyYWlsZXItcGxheS1pY29uXCJcclxuXHR4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCJcclxuXHR2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiMwMDBcIiBzdHJva2U9XCIjMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMlwiXHJcblx0c3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCJcclxuXHRjbGFzcz1cImZlYXRoZXIgZmVhdGhlci1wbGF5XCI+XHJcblx0PHBvbHlnb24gcG9pbnRzPVwiNSAzIDE5IDEyIDUgMjEgNSAzXCI+PC9wb2x5Z29uPlxyXG5cdDwvc3ZnPmA7XHJcblxyXG5cdHNob3dUcmFpbGVyQnRuLmFwcGVuZChzaG93VHJhaWxlclRleHQpO1xyXG5cclxuXHRhY3Rpb25CdG5zUGFuZWwuYXBwZW5kKHNob3dUcmFpbGVyQnRuLCBzZWVNb3JlQnRuKTtcclxuXHJcblx0cmV0dXJuIGFjdGlvbkJ0bnNQYW5lbDtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcm91c2VsbENvbnRyb2xzID0gKFxyXG5cdG1vdmllcyxcclxuXHR7XHJcblx0XHRicm93c2VQYWdlOiB7XHJcblx0XHRcdGNhcm91c2VsbEJ0bnM6IHsgYXJpYSB9LFxyXG5cdFx0fSxcclxuXHR9XHJcbikgPT4ge1xyXG5cdGNvbnN0IGNhcm91c2VsbENvbnRyb2xzID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXHJcblx0XHRcImJyb3dzZS1tYWluX19jYXJvdXNlbGwtY29udHJvbHNcIixcclxuXHRdKTtcclxuXHJcblx0bW92aWVzLmZvckVhY2goKG1vdmllLCBpbmRleCkgPT4ge1xyXG5cdFx0Y29uc3QgY2Fyb3VzZWxsQnRuID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJicm93c2UtbWFpbl9fYnRuXCJdLCB7XHJcblx0XHRcdFwiZGF0YS1pbWdcIjogaW5kZXgsXHJcblx0XHRcdFwiYXJpYS1sYWJlbFwiOiBgJHthcmlhfSAke2luZGV4fWAsXHJcblx0XHR9KTtcclxuXHRcdGNvbnN0IGNhcm91c2VsbEJ0blByb2dyZXNzQmFyID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XHRcImJyb3dzZS1tYWluX19wcm9ncmVzcy1iYXJcIixcclxuXHRcdF0pO1xyXG5cclxuXHRcdGNhcm91c2VsbEJ0bi5hcHBlbmQoY2Fyb3VzZWxsQnRuUHJvZ3Jlc3NCYXIpO1xyXG5cclxuXHRcdGNhcm91c2VsbENvbnRyb2xzLmFwcGVuZChjYXJvdXNlbGxCdG4pO1xyXG5cdH0pO1xyXG5cdHJldHVybiBjYXJvdXNlbGxDb250cm9scztcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVGaWxtU2xpZGVyID0gKGZpbG1zLCB0cmFuc2xhdGlvbnMsIGluZGV4LCB0aXRsZSwgdHlwZSkgPT4ge1xyXG5cdGNvbnN0IHByb3BlckZpbG1zID0gZmlsbXNbaW5kZXhdPy5yZXN1bHRzIHx8IFtdO1xyXG5cdGlmICghcHJvcGVyRmlsbXMubGVuZ3RoKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKGBObyBmaWxtcyBmb3VuZCBmb3IgaW5kZXggJHtpbmRleH1gKTtcclxuXHRcdHNob3dFcnJvclBvcHVwKGBObyBmaWxtcyBmb3VuZCBmb3IgaW5kZXggJHtpbmRleH1gLCBcIiNkYzRhMzRcIik7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRjb25zdCBicm93c2VTZWN0aW9uID0gY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIiwgW1wiYnJvd3NlLXNlY3Rpb25cIl0pO1xyXG5cdGNvbnN0IHNlY3Rpb25UaXRsZSA9IGNyZWF0ZUVsZW1lbnQoXCJoM1wiLCBbXCJicm93c2Utc2VjdGlvbl9fdGl0bGVcIl0pO1xyXG5cdGNvbnN0IHNlY3Rpb25TbGlkZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImJyb3dzZS1zZWN0aW9uX19zbGlkZXJcIl0sIHtcclxuXHRcdFwiZGF0YS1pbmRleFwiOiAwLFxyXG5cdH0pO1xyXG5cdGNvbnN0IHNlY3Rpb25JbWFnZXMgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImJyb3dzZS1zZWN0aW9uX19zbGlkZXItaW1hZ2VzXCJdKTtcclxuXHJcblx0Y29uc3Qgc2hvd1ByZXZTbGlkZUJ0biA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImJ1dHRvblwiLFxyXG5cdFx0W1wiYnJvd3NlLXNlY3Rpb25fX3NsaWRlci1idG5cIiwgXCJicm93c2Utc2VjdGlvbl9fc2xpZGVyLXByZXYtYnRuXCJdLFxyXG5cdFx0e1xyXG5cdFx0XHRcImFyaWEtbGFiZWxcIjogdHJhbnNsYXRpb25zPy5icm93c2VTZWN0aW9uPy5hcmlhPy5zaG93UHJldlNsaWRlQnRuLFxyXG5cdFx0fVxyXG5cdCk7XHJcblx0Y29uc3Qgc2hvd05leHRTbGlkZUJ0biA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImJ1dHRvblwiLFxyXG5cdFx0W1wiYnJvd3NlLXNlY3Rpb25fX3NsaWRlci1idG5cIiwgXCJicm93c2Utc2VjdGlvbl9fc2xpZGVyLW5leHQtYnRuXCJdLFxyXG5cdFx0eyBcImFyaWEtbGFiZWxcIjogdHJhbnNsYXRpb25zPy5icm93c2VTZWN0aW9uPy5hcmlhPy5zaG93TmV4dFNsaWRlQnRuIH1cclxuXHQpO1xyXG5cdGNvbnN0IHNob3dQcmV2U2xpZGVJY29uID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiaW1nXCIsXHJcblx0XHRbXCJicm93c2Utc2VjdGlvbl9fc2xpZGVyLWJ0bi1pY29uXCJdLFxyXG5cdFx0e1xyXG5cdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvY2hldnJvbi1sZWZ0LnN2Z1wiLFxyXG5cdFx0XHR3aWR0aDogXCIyNFwiLFxyXG5cdFx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdFx0bG9hZGluZzogXCJsYXp5XCIsXHJcblx0XHRcdGFsdDogXCJcIixcclxuXHRcdH1cclxuXHQpO1xyXG5cdGNvbnN0IHNob3dOZXh0U2xpZGVJY29uID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiaW1nXCIsXHJcblx0XHRbXCJicm93c2Utc2VjdGlvbl9fc2xpZGVyLWJ0bi1pY29uXCJdLFxyXG5cdFx0e1xyXG5cdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvY2hldnJvbi1yaWdodC5zdmdcIixcclxuXHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0XHRhbHQ6IFwiXCIsXHJcblx0XHR9XHJcblx0KTtcclxuXHJcblx0c2VjdGlvblRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcblxyXG5cdHNob3dOZXh0U2xpZGVCdG4uYXBwZW5kKHNob3dOZXh0U2xpZGVJY29uKTtcclxuXHRzaG93UHJldlNsaWRlQnRuLmFwcGVuZChzaG93UHJldlNsaWRlSWNvbik7XHJcblxyXG5cdGNyZWF0ZUZpbG1Qb3N0ZXJzKHByb3BlckZpbG1zLCB0cmFuc2xhdGlvbnMsIHNlY3Rpb25JbWFnZXMsIHR5cGUpO1xyXG5cclxuXHRzZWN0aW9uU2xpZGVyLmFwcGVuZChzZWN0aW9uSW1hZ2VzLCBzaG93UHJldlNsaWRlQnRuLCBzaG93TmV4dFNsaWRlQnRuKTtcclxuXHRicm93c2VTZWN0aW9uLmFwcGVuZChzZWN0aW9uVGl0bGUsIHNlY3Rpb25TbGlkZXIpO1xyXG5cclxuXHRyZXR1cm4gYnJvd3NlU2VjdGlvbjtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUZpbG1Qb3N0ZXJzID0gKHByb3BlckZpbG1zLCB0cmFuc2xhdGlvbnMsIHBhcmVudCwgdHlwZSkgPT4ge1xyXG5cdHByb3BlckZpbG1zLmZvckVhY2goKHsgaWQsIHRpdGxlLCBuYW1lLCBwb3N0ZXJfcGF0aCwgbWVkaWFfdHlwZSB9KSA9PiB7XHJcblx0XHRjb25zdCBpbWdTcmMgPSBwb3N0ZXJfcGF0aDtcclxuXHRcdGNvbnN0IHNlY3Rpb25Cb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImJyb3dzZS1zZWN0aW9uX19zbGlkZXItYm94XCJdKTtcclxuXHJcblx0XHRjb25zdCBzZWN0aW9uTGluayA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcdFwiYVwiLFxyXG5cdFx0XHRbXCJicm93c2Utc2VjdGlvbl9fc2xpZGVyLWltZy1saW5rXCJdLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aHJlZjogYGV4cGxvcmUuaHRtbD9pZD0ke2lkfSZ0eXBlPSR7bWVkaWFfdHlwZSB8fCB0eXBlfWAsXHJcblx0XHRcdFx0XCJhcmlhLWxhYmVsXCI6IHRyYW5zbGF0aW9ucz8uYnJvd3NlU2VjdGlvbj8uYXJpYT8uc2hvd01vcmVJbmZvQWJvdXRGaWxtLFxyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cdFx0Y29uc3Qgc2VjdGlvbkZpbG1Qb3N0ZXIgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XHRcImltZ1wiLFxyXG5cdFx0XHRbXCJicm93c2Utc2VjdGlvbl9fc2xpZGVyLWltZ1wiXSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGFsdDogYCR7XHJcblx0XHRcdFx0XHR0cmFuc2xhdGlvbnM/LmJyb3dzZVBhZ2U/LmNhcm91c2VsbEltYWdlcz8uYXJpYT8uY2Fyb3VzZWxsSW1hZ2VBbHRcclxuXHRcdFx0XHR9ICR7dGl0bGUgfHwgbmFtZX1gLFxyXG5cdFx0XHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0XHRcdHdpZHRoOiBcIlwiLFxyXG5cdFx0XHRcdGhlaWdodDogXCJcIixcclxuXHRcdFx0XHRzcmM6IGltZ1NyY1xyXG5cdFx0XHRcdFx0PyBnZXRJbWFnZVVybChpbWdTcmMsIFwib3JpZ2luYWxcIilcclxuXHRcdFx0XHRcdDogXCIuL2Rpc3QvaW1nL2ltZy1wbGFjZWhvbGRlci5zdmdcIixcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IHNlY3Rpb25BZGRUb0xpc3RCdG4gPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XHRcImJ1dHRvblwiLFxyXG5cdFx0XHRbXCJicm93c2Utc2VjdGlvbl9fYWRkLXRvLWxpc3QtYnRuXCJdLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0XCJhcmlhLWxhYmVsXCI6IHRyYW5zbGF0aW9ucz8uYnJvd3NlU2VjdGlvbj8uYXJpYT8uYWRkVG9MaXN0QnRuLFxyXG5cdFx0XHRcdFwiZGF0YS1tb3ZpZVwiOiBpZCxcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IHNlY3Rpb25BZGRUb0xpc3RJY29uID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFx0XCJpbWdcIixcclxuXHRcdFx0W1wiYnJvd3NlLXNlY3Rpb25fX2FkZC10by1saXN0LWljb25cIl0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvYWRkLXByb2ZpbGUuc3ZnXCIsXHJcblx0XHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdFx0XHRsb2FkaW5nOiBcImxhenlcIixcclxuXHRcdFx0XHRhbHQ6IFwiXCIsXHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0XHRjb25zdCBzZWN0aW9uVG9vbHRpcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcImJyb3dzZS1zZWN0aW9uX190b29sdGlwXCJdKTtcclxuXHJcblx0XHRzZWN0aW9uVG9vbHRpcC50ZXh0Q29udGVudCA9IHRyYW5zbGF0aW9ucz8uYnJvd3NlU2VjdGlvbj8uaW5mbztcclxuXHJcblx0XHRzZWN0aW9uQWRkVG9MaXN0QnRuLmFwcGVuZChzZWN0aW9uQWRkVG9MaXN0SWNvbik7XHJcblxyXG5cdFx0c2VjdGlvbkxpbmsuYXBwZW5kKHNlY3Rpb25GaWxtUG9zdGVyKTtcclxuXHJcblx0XHRzZWN0aW9uQm94LmFwcGVuZChzZWN0aW9uTGluaywgc2VjdGlvbkFkZFRvTGlzdEJ0biwgc2VjdGlvblRvb2x0aXApO1xyXG5cclxuXHRcdHBhcmVudC5hcHBlbmQoc2VjdGlvbkJveCk7XHJcblx0fSk7XHJcbn07XHJcbmNvbnN0IGNyZWF0ZU92ZXJsYXkgPSAoKSA9PiB7XHJcblx0Y29uc3Qgb3ZlcmxheSA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wib3ZlcmxheVwiXSk7XHJcblxyXG5cdHJldHVybiBvdmVybGF5O1xyXG59O1xyXG5jb25zdCBzaG93VXNlclBhbmVsID0gKHVzZXJCb3gpID0+IHtcclxuXHRjb25zdCBwYW5lbCA9IHVzZXJCb3gubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdHBhbmVsLmNsYXNzTGlzdC50b2dnbGUoXCJ2aXNpYmxlXCIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNsb3NlQWxsTm90Q2xpY2tlZCA9IChlKSA9PiB7XHJcblx0Y29uc3QgdXNlclBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5icm93c2UtaGVhZGVyX191c2VyLXBhbmVsXCIpO1xyXG5cdGNvbnN0IHVzZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJyb3dzZS1oZWFkZXJfX3VzZXJcIik7XHJcblxyXG5cdGlmIChcclxuXHRcdHVzZXJQYW5lbC5jbGFzc0xpc3QuY29udGFpbnMoXCJ2aXNpYmxlXCIpICYmXHJcblx0XHRlLnRhcmdldCAhPT0gdXNlclBhbmVsICYmXHJcblx0XHRlLnRhcmdldCAhPT0gdXNlckJ0biAmJlxyXG5cdFx0IXVzZXJQYW5lbC5jb250YWlucyhlLnRhcmdldClcclxuXHQpXHJcblx0XHR1c2VyUGFuZWwuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlRm91ckNhdGVnb3JpZXMgPSAoe1xyXG5cdGJyb3dzZVBhZ2U6IHtcclxuXHRcdGNhdGVnb3JpZXM6IHsgYW5pbWF0aW9ucywgaG9ycm9yLCBjb21lZHksIGZhbnRhc3kgfSxcclxuXHR9LFxyXG59KSA9PiB7XHJcblx0Y29uc3QgY2F0ZWdvcmllc1NlY3Rpb24gPSBjcmVhdGVFbGVtZW50KFwic2VjdGlvblwiLCBbXCJjYXRlZ29yaWVzXCJdKTtcclxuXHRjb25zdCBjYXRlZ29yaWVzQm94ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJjYXRlZ29yaWVzX19ib3hcIl0pO1xyXG5cclxuXHRjb25zdCBjYXRlZ29yeUFuaW1hdGVkQ2FyZCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1xyXG5cdFx0XCJjYXRlZ29yaWVzX19ib3gtY2FyZFwiLFxyXG5cdFx0XCJjYXRlZ29yaWVzX19ib3gtY2FyZC0tYW5pbWF0aW9uc1wiLFxyXG5cdF0pO1xyXG5cdGNvbnN0IGNhdGVnb3J5RmFudGFzeUNhcmQgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcclxuXHRcdFwiY2F0ZWdvcmllc19fYm94LWNhcmRcIixcclxuXHRcdFwiY2F0ZWdvcmllc19fYm94LWNhcmQtLWZhbnRhc3lcIixcclxuXHRdKTtcclxuXHRjb25zdCBjYXRlZ29yeUhvcnJvckNhcmQgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcclxuXHRcdFwiY2F0ZWdvcmllc19fYm94LWNhcmRcIixcclxuXHRcdFwiY2F0ZWdvcmllc19fYm94LWNhcmQtLWhvcnJvcnNcIixcclxuXHRdKTtcclxuXHRjb25zdCBjYXRlZ29yeUNvbWVkeUNhcmQgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcclxuXHRcdFwiY2F0ZWdvcmllc19fYm94LWNhcmRcIixcclxuXHRcdFwiY2F0ZWdvcmllc19fYm94LWNhcmQtLWNvbWVkeVwiLFxyXG5cdF0pO1xyXG5cclxuXHRjb25zdCBjYXRlZ29yeUFuaW1hdGVkTGluayA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImFcIixcclxuXHRcdFtcImNhdGVnb3JpZXNfX2JveC1saW5rXCIsIFwiY2F0ZWdvcmllc19fYm94LWxpbmstLWFuaW1hdGlvbnNcIl0sXHJcblx0XHR7IGhyZWY6IFwiY2F0ZWdvcmllcy5odG1sP2NhdGVnb3J5PWFuaW1hdGVkXCIgfVxyXG5cdCk7XHJcblx0Y29uc3QgY2F0ZWdvcnlGYW50YXN5TGluayA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImFcIixcclxuXHRcdFtcImNhdGVnb3JpZXNfX2JveC1saW5rXCIsIFwiY2F0ZWdvcmllc19fYm94LWxpbmstLWZhbnRhc3lcIl0sXHJcblx0XHR7IGhyZWY6IFwiY2F0ZWdvcmllcy5odG1sP2NhdGVnb3J5PWZhbnRhc3lcIiB9XHJcblx0KTtcclxuXHRjb25zdCBjYXRlZ29yeUhvcnJvckxpbmsgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJhXCIsXHJcblx0XHRbXCJjYXRlZ29yaWVzX19ib3gtbGlua1wiLCBcImNhdGVnb3JpZXNfX2JveC1saW5rLS1ob3Jyb3JzXCJdLFxyXG5cdFx0eyBocmVmOiBcImNhdGVnb3JpZXMuaHRtbD9jYXRlZ29yeT1ob3Jyb3JcIiB9XHJcblx0KTtcclxuXHRjb25zdCBjYXRlZ29yeUNvbWVkeUxpbmsgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJhXCIsXHJcblx0XHRbXCJjYXRlZ29yaWVzX19ib3gtbGlua1wiLCBcImNhdGVnb3JpZXNfX2JveC1saW5rLS1jb21lZHlcIl0sXHJcblx0XHR7IGhyZWY6IFwiY2F0ZWdvcmllcy5odG1sP2NhdGVnb3J5PWNvbWVkeVwiIH1cclxuXHQpO1xyXG5cclxuXHRjYXRlZ29yeUFuaW1hdGVkTGluay50ZXh0Q29udGVudCA9IGFuaW1hdGlvbnM7XHJcblx0Y2F0ZWdvcnlGYW50YXN5TGluay50ZXh0Q29udGVudCA9IGZhbnRhc3k7XHJcblx0Y2F0ZWdvcnlIb3Jyb3JMaW5rLnRleHRDb250ZW50ID0gaG9ycm9yO1xyXG5cdGNhdGVnb3J5Q29tZWR5TGluay50ZXh0Q29udGVudCA9IGNvbWVkeTtcclxuXHJcblx0Y2F0ZWdvcnlBbmltYXRlZENhcmQuYXBwZW5kKGNhdGVnb3J5QW5pbWF0ZWRMaW5rKTtcclxuXHRjYXRlZ29yeUZhbnRhc3lDYXJkLmFwcGVuZChjYXRlZ29yeUZhbnRhc3lMaW5rKTtcclxuXHRjYXRlZ29yeUhvcnJvckNhcmQuYXBwZW5kKGNhdGVnb3J5SG9ycm9yTGluayk7XHJcblx0Y2F0ZWdvcnlDb21lZHlDYXJkLmFwcGVuZChjYXRlZ29yeUNvbWVkeUxpbmspO1xyXG5cclxuXHRjYXRlZ29yaWVzQm94LmFwcGVuZChcclxuXHRcdGNhdGVnb3J5QW5pbWF0ZWRDYXJkLFxyXG5cdFx0Y2F0ZWdvcnlGYW50YXN5Q2FyZCxcclxuXHRcdGNhdGVnb3J5SG9ycm9yQ2FyZCxcclxuXHRcdGNhdGVnb3J5Q29tZWR5Q2FyZFxyXG5cdCk7XHJcblxyXG5cdGNhdGVnb3JpZXNTZWN0aW9uLmFwcGVuZChjYXRlZ29yaWVzQm94KTtcclxuXHJcblx0cmV0dXJuIGNhdGVnb3JpZXNTZWN0aW9uO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNwZWNpZmllZFNlY3Rpb25Qb3N0ZXIgPSAoZmlsbXNBcnIsIHRyYW5zbGF0aW9ucykgPT4ge1xyXG5cdGNvbnN0IG1haW4gPSBjcmVhdGVFbGVtZW50KFwibWFpblwiLCBbXCJzcGVjaWZpZWQtY2F0ZWdvcnlfX21haW5cIl0pO1xyXG5cdGNvbnN0IHNlY3Rpb24gPSBjcmVhdGVFbGVtZW50KFwic2VjdGlvblwiLCBbXCJzcGVjaWZpZWQtY2F0ZWdvcnlcIl0pO1xyXG5cdGNvbnN0IHNlY3Rpb25Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcclxuXHRcdFwic3BlY2lmaWVkLWNhdGVnb3J5X19jb250YWluZXJcIixcclxuXHRdKTtcclxuXHJcblx0ZmlsbXNBcnIuZm9yRWFjaCgoYXJyLCBpbmRleCkgPT4ge1xyXG5cdFx0aWYgKCFhcnIpIHJldHVybjtcclxuXHJcblx0XHRhcnIuZm9yRWFjaCgoeyBpZCwgdGl0bGUsIG5hbWUsIHBvc3Rlcl9wYXRoIH0pID0+IHtcclxuXHRcdFx0Y29uc3QgdHlwZSA9IGluZGV4ID09PSAwID8gXCJtb3ZpZVwiIDogXCJ0dlwiO1xyXG5cdFx0XHRjb25zdCBpbWdTcmMgPSBwb3N0ZXJfcGF0aDtcclxuXHJcblx0XHRcdGNvbnN0IHNlY3Rpb25JdGVtID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJzcGVjaWZpZWQtY2F0ZWdvcnlfX2l0ZW1cIl0pO1xyXG5cclxuXHRcdFx0Y29uc3Qgc2VjdGlvbkxpbmsgPSBjcmVhdGVFbGVtZW50KFwiYVwiLCBbXCJzcGVjaWZpZWQtY2F0ZWdvcnlfX2xpbmtcIl0sIHtcclxuXHRcdFx0XHRocmVmOiBgZXhwbG9yZS5odG1sP2lkPSR7aWR9JnR5cGU9JHt0eXBlfWAsXHJcblx0XHRcdFx0XCJhcmlhLWxhYmVsXCI6IHRyYW5zbGF0aW9ucz8uYnJvd3NlU2VjdGlvbj8uYXJpYT8uc2hvd01vcmVJbmZvQWJvdXRGaWxtLFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNvbnN0IHNlY3Rpb25Qb3N0ZXIgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwiaW1nXCIsXHJcblx0XHRcdFx0W1wiYnJvd3NlLXNlY3Rpb25fX3NsaWRlci1pbWdcIl0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0YWx0OiBgJHtcclxuXHRcdFx0XHRcdFx0dHJhbnNsYXRpb25zPy5icm93c2VQYWdlPy5jYXJvdXNlbGxJbWFnZXM/LmFyaWE/LmNhcm91c2VsbEltYWdlQWx0XHJcblx0XHRcdFx0XHR9ICR7dGl0bGUgfHwgbmFtZX1gLFxyXG5cdFx0XHRcdFx0bG9hZGluZzogXCJsYXp5XCIsXHJcblx0XHRcdFx0XHRzcmM6IGltZ1NyY1xyXG5cdFx0XHRcdFx0XHQ/IGdldEltYWdlVXJsKGltZ1NyYywgXCJvcmlnaW5hbFwiKVxyXG5cdFx0XHRcdFx0XHQ6IFwiLi9kaXN0L2ltZy9pbWctcGxhY2Vob2xkZXIuc3ZnXCIsXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Y29uc3Qgc2VjdGlvbkFkZFRvTGlzdEJ0biA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJidXR0b25cIixcclxuXHRcdFx0XHRbXCJicm93c2Utc2VjdGlvbl9fYWRkLXRvLWxpc3QtYnRuXCJdLFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFwiYXJpYS1sYWJlbFwiOiB0cmFuc2xhdGlvbnM/LmJyb3dzZVNlY3Rpb24/LmFyaWE/LmFkZFRvTGlzdEJ0bixcclxuXHRcdFx0XHRcdFwiZGF0YS1tb3ZpZVwiOiBpZCxcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRjb25zdCBzZWN0aW9uQWRkVG9MaXN0SWNvbiA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJpbWdcIixcclxuXHRcdFx0XHRbXCJicm93c2Utc2VjdGlvbl9fYWRkLXRvLWxpc3QtaWNvblwiXSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR3aWR0aDogXCIyNFwiLFxyXG5cdFx0XHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdFx0XHRsb2FkaW5nOiBcImxhenlcIixcclxuXHRcdFx0XHRcdGFsdDogXCJcIixcclxuXHRcdFx0XHRcdHNyYzogXCIuL3NyYy9pY29ucy9hZGQtcHJvZmlsZS5zdmdcIixcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRjb25zdCBzZWN0aW9uVG9vbHRpcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcImJyb3dzZS1zZWN0aW9uX190b29sdGlwXCJdKTtcclxuXHRcdFx0c2VjdGlvblRvb2x0aXAudGV4dENvbnRlbnQgPSB0cmFuc2xhdGlvbnM/LmJyb3dzZVNlY3Rpb24/LmluZm87XHJcblxyXG5cdFx0XHRzZWN0aW9uQWRkVG9MaXN0QnRuLmFwcGVuZChzZWN0aW9uQWRkVG9MaXN0SWNvbik7XHJcblx0XHRcdHNlY3Rpb25MaW5rLmFwcGVuZChzZWN0aW9uUG9zdGVyKTtcclxuXHRcdFx0c2VjdGlvbkl0ZW0uYXBwZW5kKHNlY3Rpb25MaW5rLCBzZWN0aW9uQWRkVG9MaXN0QnRuLCBzZWN0aW9uVG9vbHRpcCk7XHJcblx0XHRcdHNlY3Rpb25Db250YWluZXIuYXBwZW5kKHNlY3Rpb25JdGVtKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRzZWN0aW9uLmFwcGVuZChzZWN0aW9uQ29udGFpbmVyKTtcclxuXHRtYWluLmFwcGVuZChzZWN0aW9uKTtcclxuXHJcblx0cmV0dXJuIG1haW47XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlRXhwbG9yZUhlcm9TZWN0aW9uID0gKFxyXG5cdHsgdGl0bGUsIG5hbWUsIGlkLCBiYWNrZHJvcF9wYXRoLCBvdmVydmlldyB9LFxyXG5cdHRyYW5zbGF0aW9uc1xyXG4pID0+IHtcclxuXHRjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG5cdGNvbnN0IHR5cGUgPSB1cmxQYXJhbXMuZ2V0KFwidHlwZVwiKTtcclxuXHJcblx0Y29uc3QgbWFpbkJveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wiZXhwbG9yZV9fZmlsbS1wb3N0ZXJcIl0pO1xyXG5cdGNvbnN0IGNvbnRlbnRCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImV4cGxvcmVfX2ZpbG0tY29udGVudFwiXSk7XHJcblx0Y29uc3QgbWFpblRpdGxlID0gY3JlYXRlRWxlbWVudChcImgxXCIsIFtcImV4cGxvcmVfX2ZpbG0tdGl0bGVcIiwgXCJhbmltYXRlZFwiXSk7XHJcblx0Y29uc3QgZGVzY3JpcHRpb24gPSBjcmVhdGVFbGVtZW50KFwicFwiLCBbXCJleHBsb3JlX19maWxtLWluZm9cIiwgXCJhbmltYXRlZFwiXSk7XHJcblx0Y29uc3QgdHJhaWxlckJ0biA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImJ1dHRvblwiLFxyXG5cdFx0W1wiZXhwbG9yZV9fZmlsbS1zaG93LXRyYWlsZXItYnRuXCIsIFwiYW5pbWF0ZWRcIl0sXHJcblx0XHR7IFwiZGF0YS10cmFpbGVyXCI6IGlkLCBcImRhdGEtdHlwZVwiOiB0eXBlIH1cclxuXHQpO1xyXG5cdGNvbnN0IGltZ1NyYyA9IGJhY2tkcm9wX3BhdGg7XHJcblx0Y29uc3QgYWRkVG9MaXN0QnRuID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiYnV0dG9uXCIsXHJcblx0XHRbXCJleHBsb3JlX19maWxtLWFkZC10by1saXN0LWJ0blwiLCBcImFuaW1hdGVkXCJdLFxyXG5cdFx0e1xyXG5cdFx0XHRcImFyaWEtbGFiZWxcIjogdHJhbnNsYXRpb25zPy5icm93c2VTZWN0aW9uPy5hcmlhPy5hZGRUb0xpc3RCdG4sXHJcblx0XHRcdFwiZGF0YS1tb3ZpZVwiOiBpZCxcclxuXHRcdH1cclxuXHQpO1xyXG5cdGNvbnN0IGJhY2tCdG4gPSBjcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFtcImV4cGxvcmVfX2JhY2stYnRuXCIsIFwiYW5pbWF0ZWRcIl0sIHtcclxuXHRcdFwiYXJpYS1sYWJlbFwiOiB0cmFuc2xhdGlvbnMuZXhwbG9yZS5iYWNrQnV0dG9uLFxyXG5cdH0pO1xyXG5cclxuXHRtYWluVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZSB8fCBuYW1lO1xyXG5cdGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gb3ZlcnZpZXc7XHJcblxyXG5cdHRyYWlsZXJCdG4uaW5uZXJIVE1MID0gYDxzdmcgY2xhc3M9XCJleHBsb3JlX190cmFpbGVyLXBsYXktaWNvblwiXHJcblx0eG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiXHJcblx0dmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjMDAwXCIgc3Ryb2tlPVwiIzAwMFwiIHN0cm9rZS13aWR0aD1cIjJcIlxyXG5cdHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiXHJcblx0Y2xhc3M9XCJmZWF0aGVyIGZlYXRoZXItcGxheVwiPlxyXG5cdDxwb2x5Z29uIHBvaW50cz1cIjUgMyAxOSAxMiA1IDIxIDUgM1wiPjwvcG9seWdvbj5cclxuXHQ8L3N2Zz5gO1xyXG5cclxuXHRjb25zdCB0cmFpbGVyVGV4dCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcImV4cGxvcmVfX3NlZS10cmFpbGVyXCJdKTtcclxuXHR0cmFpbGVyVGV4dC50ZXh0Q29udGVudCA9XHJcblx0XHR0cmFuc2xhdGlvbnM/LmJyb3dzZVBhZ2U/LmFjdGlvbkJ0bnM/LnRyYWlsZXJCdG5UZXh0O1xyXG5cclxuXHR0cmFpbGVyQnRuLmFwcGVuZCh0cmFpbGVyVGV4dCk7XHJcblxyXG5cdGFkZFRvTGlzdEJ0bi5pbm5lckhUTUwgPSBgPGltZyBjbGFzcz1cImV4cGxvcmVfX2ZpbG0tYWRkLWljb25cIiBzcmM9XCIuL3NyYy9pY29ucy9hZGQtcHJvZmlsZS5zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBhbHQ9XCJcIiBsb2FkaW5nPVwibGF6eVwiPmA7XHJcblx0YmFja0J0bi5pbm5lckhUTUwgPSBgPGltZyBjbGFzcz1cImV4cGxvcmVfX2JhY2stYnRuLWljb25cIiBzcmM9XCIuL3NyYy9pY29ucy9jaGV2cm9uLWxlZnQuc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgYWx0PVwiXCIgbG9hZGluZz1cImxhenlcIj5gO1xyXG5cclxuXHRtYWluQm94LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7XHJcblx0XHRpbWdTcmMgPyBnZXRJbWFnZVVybChpbWdTcmMsIFwib3JpZ2luYWxcIikgOiBcIi4vZGlzdC9pbWcvaW1nLXBsYWNlaG9sZGVyLnN2Z1wiXHJcblx0fScpYDtcclxuXHJcblx0YmFja0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0aGlzdG9yeS5iYWNrKCk7XHJcblx0fSk7XHJcblxyXG5cdGNvbnRlbnRCb3guYXBwZW5kKG1haW5UaXRsZSwgZGVzY3JpcHRpb24sIHRyYWlsZXJCdG4sIGFkZFRvTGlzdEJ0biwgYmFja0J0bik7XHJcblx0bWFpbkJveC5hcHBlbmQoY29udGVudEJveCk7XHJcblx0cmV0dXJuIG1haW5Cb3g7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlU2VhcmNoRW5naW5lID0gKHRyYW5zbGF0aW9ucykgPT4ge1xyXG5cdGNvbnN0IHNlYXJjaEVuZ2luZUJveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wic2VhcmNoLWVuZ2luZV9fYm94XCJdKTtcclxuXHRjb25zdCBzZWFyY2hFbmdpbmUgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgW1wic2VhcmNoLWVuZ2luZV9faW5wdXRcIl0sIHtcclxuXHRcdHR5cGU6IFwidGV4dFwiLFxyXG5cdFx0cGxhY2Vob2xkZXI6IHRyYW5zbGF0aW9ucz8uc2VhcmNoRW5naW5lPy5wbGFjZWhvbGRlcixcclxuXHR9KTtcclxuXHRjb25zdCBzZWFyY2hFbmdpbmVJY29uID0gY3JlYXRlRWxlbWVudChcImltZ1wiLCBbXCJzZWFyY2gtZW5naW5lX19pY29uXCJdLCB7XHJcblx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvc2VhcmNoLWljb24uc3ZnXCIsXHJcblx0XHR3aWR0aDogXCIyNFwiLFxyXG5cdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRsb2FkaW5nOiBcImxhenlcIixcclxuXHRcdGFsdDogXCJcIixcclxuXHR9KTtcclxuXHJcblx0c2VhcmNoRW5naW5lQm94LmFwcGVuZChzZWFyY2hFbmdpbmUsIHNlYXJjaEVuZ2luZUljb24pO1xyXG5cclxuXHRyZXR1cm4gc2VhcmNoRW5naW5lQm94O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUZpbHRlcmVkRmlsbXNTZWN0aW9uID0gKGZpbHRlcmVkRmlsbXMsIHRyYW5zbGF0aW9ucykgPT4ge1xyXG5cdGNvbnN0IHNlY3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XCIuc3BlY2lmaWVkLWNhdGVnb3J5X19jb250YWluZXJcIlxyXG5cdCk7XHJcblx0c2VjdGlvbkNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuXHRpZiAoZmlsdGVyZWRGaWxtcy5sZW5ndGggPT09IDApIHtcclxuXHRcdGNvbnN0IGxhY2tPZkNvbnRlbnQgPSBjcmVhdGVFbGVtZW50KFwicFwiLCBbXCJsYWNrLW9mLWNvbnRlbnRfX3RleHRcIl0pO1xyXG5cdFx0bGFja09mQ29udGVudC50ZXh0Q29udGVudCA9IHRyYW5zbGF0aW9ucz8uc2VhcmNoRW5naW5lPy5sYWNrT2ZDb250ZW50O1xyXG5cdFx0c2VjdGlvbkNvbnRhaW5lci5hcHBlbmQobGFja09mQ29udGVudCk7XHJcblxyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgbGFja09mQ29udGVudFR4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGFjay1vZi1jb250ZW50X190ZXh0XCIpO1xyXG5cdGxhY2tPZkNvbnRlbnRUeHQ/LnJlbW92ZSgpO1xyXG5cclxuXHRmaWx0ZXJlZEZpbG1zLmZvckVhY2goKHsgbWVkaWFfdHlwZSwgaWQsIHRpdGxlLCBuYW1lLCBwb3N0ZXJfcGF0aCB9KSA9PiB7XHJcblx0XHRjb25zdCBpbWdTcmMgPSBwb3N0ZXJfcGF0aDtcclxuXHJcblx0XHRjb25zdCBwb3N0ZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcInNwZWNpZmllZC1jYXRlZ29yeV9faXRlbVwiXSk7XHJcblxyXG5cdFx0Y29uc3QgcG9zdGVyTGluayA9IGNyZWF0ZUVsZW1lbnQoXCJhXCIsIFtcInNwZWNpZmllZC1jYXRlZ29yeV9fbGlua1wiXSwge1xyXG5cdFx0XHRocmVmOiBgZXhwbG9yZS5odG1sP2lkPSR7aWR9JnR5cGU9JHttZWRpYV90eXBlIHx8IFwibW92aWVcIn1gLFxyXG5cdFx0XHRcImFyaWEtbGFiZWxcIjogdHJhbnNsYXRpb25zPy5icm93c2VTZWN0aW9uPy5hcmlhPy5zaG93TW9yZUluZm9BYm91dEZpbG0sXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBzZWN0aW9uSW1nID0gY3JlYXRlRWxlbWVudChcImltZ1wiLCBbXCJicm93c2Utc2VjdGlvbl9fc2xpZGVyLWltZ1wiXSwge1xyXG5cdFx0XHRhbHQ6IGAke1xyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucz8uYnJvd3NlUGFnZT8uY2Fyb3VzZWxsSW1hZ2VzPy5hcmlhPy5jYXJvdXNlbGxJbWFnZUFsdFxyXG5cdFx0XHR9ICR7dGl0bGUgfHwgbmFtZX1gLFxyXG5cdFx0XHRsb2FkaW5nOiBcImxhenlcIixcclxuXHRcdFx0c3JjOiBnZXRJbWFnZVVybChpbWdTcmMsIFwib3JpZ2luYWxcIiksXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBhZGRUb0xpc3RCdG4gPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XHRcImJ1dHRvblwiLFxyXG5cdFx0XHRbXCJicm93c2Utc2VjdGlvbl9fYWRkLXRvLWxpc3QtYnRuXCJdLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0XCJhcmlhLWxhYmVsXCI6IHRyYW5zbGF0aW9ucz8uYnJvd3NlU2VjdGlvbj8uYXJpYT8uYWRkVG9MaXN0QnRuLFxyXG5cdFx0XHRcdFwiZGF0YS1tb3ZpZVwiOiBpZCxcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHJcblx0XHRjb25zdCBhZGRUb0xpc3RJY29uID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFx0XCJpbWdcIixcclxuXHRcdFx0W1wiYnJvd3NlLXNlY3Rpb25fX2FkZC10by1saXN0LWljb25cIl0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHR3aWR0aDogXCIyNFwiLFxyXG5cdFx0XHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdFx0XHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0XHRcdGFsdDogXCJcIixcclxuXHRcdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvYWRkLXByb2ZpbGUuc3ZnXCIsXHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblxyXG5cdFx0Y29uc3QgdG9vbHRpcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcImJyb3dzZS1zZWN0aW9uX190b29sdGlwXCJdKTtcclxuXHRcdHRvb2x0aXAudGV4dENvbnRlbnQgPSB0cmFuc2xhdGlvbnM/LmJyb3dzZVNlY3Rpb24/LmluZm87XHJcblxyXG5cdFx0cG9zdGVyTGluay5hcHBlbmQoc2VjdGlvbkltZyk7XHJcblx0XHRhZGRUb0xpc3RCdG4uYXBwZW5kKGFkZFRvTGlzdEljb24pO1xyXG5cdFx0cG9zdGVyLmFwcGVuZChwb3N0ZXJMaW5rLCBhZGRUb0xpc3RCdG4sIHRvb2x0aXApO1xyXG5cclxuXHRcdHNlY3Rpb25Db250YWluZXIuYXBwZW5kKHBvc3Rlcik7XHJcblx0fSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlVHJhaWxlcldpbmRvdyA9IGFzeW5jIChlKSA9PiB7XHJcblx0Y29uc3Qgd2luZG93RXhpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmFpbGVyLXdpbmRvd1wiKTtcclxuXHJcblx0aWYgKHdpbmRvd0V4aXN0cykgcmV0dXJuO1xyXG5cclxuXHRjb25zdCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yb290XCIpO1xyXG5cdGNvbnN0IGlkID0gZS50YXJnZXQuZGF0YXNldC50cmFpbGVyO1xyXG5cdGNvbnN0IHR5cGUgPSBlLnRhcmdldC5kYXRhc2V0LnR5cGU7XHJcblxyXG5cdGNvbnN0IHRyYWlsZXJJRCA9IGF3YWl0IGdldFZpZGVvVHJhaWxlcklkKGlkLCB0eXBlKTtcclxuXHJcblx0aWYgKCF0cmFpbGVySUQpIHJldHVybjtcclxuXHJcblx0Y29uc3QgbWFpbldpbmRvdyA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1widHJhaWxlci13aW5kb3dcIl0pO1xyXG5cdGNvbnN0IHZpZGVvRnJhbWUgPSBjcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIsIFtcInRyYWlsZXItZnJhbWVcIl0sIHtcclxuXHRcdHNyYzogYGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyR7dHJhaWxlcklEfWAsXHJcblx0XHRhbGxvd2Z1bGxzY3JlZW46IHRydWUsXHJcblx0fSk7XHJcblx0Y29uc3QgY2xvc2VXaW5kb3dCdG4gPSBjcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFtcImNsb3NlLXRyYWlsZXItd2luZG93XCJdKTtcclxuXHRjb25zdCBjbG9zZVdpbmRvd0ljb24gPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcImNsb3NlLXRyYWlsZXItd2luZG93LWljb25cIl0sIHtcclxuXHRcdGFsdDogXCJcIixcclxuXHRcdHNyYzogXCIuL3NyYy9pY29ucy9jbG9zZS1pY29uLnN2Z1wiLFxyXG5cdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdH0pO1xyXG5cclxuXHRjbG9zZVdpbmRvd0J0bi5hcHBlbmQoY2xvc2VXaW5kb3dJY29uKTtcclxuXHRtYWluV2luZG93LmFwcGVuZCh2aWRlb0ZyYW1lLCBjbG9zZVdpbmRvd0J0bik7XHJcblxyXG5cdHJvb3QuYXBwZW5kKG1haW5XaW5kb3csIGNyZWF0ZU92ZXJsYXkoKSk7XHJcbn07XHJcbmNvbnN0IGdldFZpZGVvVHJhaWxlcklkID0gYXN5bmMgKGlkLCB0eXBlKSA9PiB7XHJcblx0Y29uc3QgVVJMID0gYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvJHt0eXBlfS8ke2lkfS92aWRlb3NcclxuYDtcclxuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFVSTCwgb3B0aW9ucyk7XHJcblx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHRjb25zdCB0cmFpbGVyID0gZGF0YS5yZXN1bHRzLmZpbmQoXHJcblx0XHQoZWwpID0+XHJcblx0XHRcdGVsLm5hbWUgPT09IFwiT2ZmaWNpYWwgVHJhaWxlclwiIHx8XHJcblx0XHRcdGVsLm5hbWUgPT09IFwiT2ZmaWNpYWwgVHJhaWxlciAjMVwiIHx8XHJcblx0XHRcdGVsLm5hbWUgPT09IFwiT2ZmaWNpYWwgVHJhaWxlciAjMlwiIHx8XHJcblx0XHRcdGVsLm5hbWUuaW5jbHVkZXMoXCJPZmZpY2lhbCBUcmFpbGVyXCIpIHx8XHJcblx0XHRcdGVsLm5hbWUuaW5jbHVkZXMoXCJUcmFpbGVyXCIpXHJcblx0KTtcclxuXHJcblx0aWYgKCF0cmFpbGVyKSB7XHJcblx0XHRzaG93RXJyb3JQb3B1cChcclxuXHRcdFx0XCJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgdGhlIHRyYWlsZXIgZm9yIHRoaXMgdmlkZW8uXCIsXHJcblx0XHRcdFwiI2RjNGEzNFwiXHJcblx0XHQpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRjb25zdCB0cmFpbGVyS2V5ID0gdHJhaWxlci5rZXk7XHJcblxyXG5cdHJldHVybiB0cmFpbGVyS2V5O1xyXG59O1xyXG5leHBvcnQgY29uc3QgaGlkZVRyYWlsZXJXaW5kb3cgPSAoKSA9PiB7XHJcblx0Y29uc3QgdHJhaWxlcldpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJhaWxlci13aW5kb3dcIik7XHJcblx0Y29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuXHJcblx0dHJhaWxlcldpbmRvdy5yZW1vdmUoKTtcclxuXHRvdmVybGF5LnJlbW92ZSgpO1xyXG59O1xyXG4iXX0=
