import{createElement}from"./helpers.min.js";import{setUserPreference}from"./updateStateFunctions.min.js";const USERNAME="handsomeUser404",PASSWORD="5jksH9d.";export const createLoginHeader=({header:{alt:{logo:e},aria:{logoLink:t,changeLanguageButton:a}}},n,r,o,l)=>{const i=createElement("header",["header"]),s=createElement("a",["header__logo","login-header__logo"],{href:"/","aria-label":`${t}`}),c=createElement("img",["header__logo-img","login-header__logo-img"],{src:"./src/icons/logo.svg",alt:`${e}`,width:"24",height:"24"}),d=createElement("span",["header__logo-text","login-header__logo-text"]);d.textContent="Stream",s.append(c,d),i.append(s);const p=createElement("button",["login-header__lang-select"],{"aria-label":`${a}`}),m=createElement("span",["login-header__lang-platform-lang"]),g=createElement("img",["login-header__lang-arrow"],{src:"./src/icons/chevron-down.svg",alt:"",width:"24",height:"24"}),_=createElement("ul",["login-header__lang-list"]);for(let e=0;e<n;e++){const t=createElement("li",["login-header__lang-choice"],{tabindex:0}),a=Object.keys(r)[e],n=Object.values(r)[e];t.dataset.lang=a,t.textContent=n,t.style.animationDelay=100*e+"ms",_.append(t)}return m.textContent=r[o],p.addEventListener("click",e=>{l.call(p,e,m)}),p.append(m,g,_),i.append(p),i};export const createLoginPage=({main:{text:{title:e,subtitle:t,description:a,button:n},placeholder:{username:r,password:o}}})=>{const l=createElement("main",["main"]),i=createElement("div",["wrapper"]),s=createElement("h1"),c=createElement("span",["main__title"]),d=createElement("span",["main__subtitle"]),p=createElement("p",["main__text"]),m=createElement("form",["main__form"]),g=createElement("input",["main__form-input","main__form-input--username"],{type:"text",placeholder:r}),_=createElement("input",["main__form-input","main__form-input--password"],{type:"password",placeholder:o}),f=createElement("button",["main__form-button"],{type:"submit"}),h=createElement("span",["main__form-button-text"]),u=createElement("p",["main__form-error-txt"]);return c.textContent=e,d.textContent=t,p.textContent=a,h.textContent=n,s.append(c,d),f.append(h),m.append(g,_,f,u),i.append(s,p,m),l.append(i),f.addEventListener("click",e=>{const t=JSON.parse?.(localStorage.getItem("userData"));handleLoginValidation(e,g,_,translations.main.text.errorRequired,translations.main.text.errorInvalid,USERNAME,PASSWORD,u)||(u.classList.remove("visible"),e.target.append(showSmallLoader()),e.target.disabled=!0,setTimeout(()=>{e.target.disabled=!1,hideSmallLoader(),setUserPreference("translations",translations,t),setUserPreference("loggedIn",!0,t),window.location.href="profiles.html"},3e3))}),l};const handleLoginValidation=(e,t,a,n,r,o,l,i)=>(e.preventDefault(),""===t.value.trim()||""===a.value.trim()?(i.classList.add("visible"),i.textContent=n,n):t.value.trim()!==o||a.value.trim()!==l?(e.target.disabled=!0,e.target.append(showSmallLoader()),i.classList.remove("visible"),setTimeout(()=>{i.classList.add("visible"),i.textContent=r,e.target.disabled=!1,hideSmallLoader()},3e3),r):null);export const showBigLoader=()=>{const e=createElement("div",["loading-area"]);return e.innerHTML='            <svg class="loader-big" viewBox="0 0 120 120" width="120" height="120">\n                <defs>\n                    <linearGradient id="loader-accent" x1="0%" y1="0%" x2="100%" y2="0%">\n                        <stop offset="0%" stop-color="#4da8da" stop-opacity="0.8" />\n                        <stop offset="70%" stop-color="#4da8da" stop-opacity="0.4" />\n                        <stop offset="100%" stop-color="#4da8da" stop-opacity="0" />\n                    </linearGradient>\n                </defs>\n                <circle class="loading-circle-big" r="35" cx="60" cy="60"></circle>\n            </svg>',e};export const hideBigLoader=()=>{const e=document.querySelector(".loading-area");e?.remove()};export const showSmallLoader=()=>{const e=createElement("div",["loading-area-small"]);return e.innerHTML='<svg class="loader-small" viewBox="0 0 120 120" width="120" height="120">\n                <defs>\n                    <linearGradient id="loader-accent-small" x1="0%" y1="0%" x2="100%" y2="0%">\n                        <stop offset="0%" stop-color="white" stop-opacity="0.8" />\n                        <stop offset="70%" stop-color="white" stop-opacity="0.3" />\n                        <stop offset="100%" stop-color="white" stop-opacity="0" />\n                    </linearGradient>\n                </defs>\n                <circle class="loading-circle-small" r="12" cx="60" cy="60"></circle>\n            </svg>',e};export const hideSmallLoader=()=>{document.querySelector(".loading-area-small").remove()};export const createProfilesPage=({profiles:{text:{title:e,addProfileInfo:t},aria:{addProfileBtn:a,userProfileBtn:n}},userProfiles:r})=>{JSON.parse?.(localStorage.getItem("userData"));const o=document.querySelector(".container"),l=createElement("main",["main-profiles"]),i=createElement("div",["wrapper"]),s=createElement("h1",["main__title","main-profiles__title"]),c=createElement("div",["main-profiles__box"]);s.textContent=e,c.append(createProfileAddBtn(a,t)),i.append(s,c),l.append(i),o.append(l)};const createProfile=(e,t)=>{const a=JSON.parse?.(localStorage.getItem("userData"));let n,r;const o=["#dc4a34","#062E63","#FAC044"],l=new Set;do{n=Math.trunc(Math.random()*o.length)}while(l.has(randomNumber));l.add(n),r=o[n];const i=createElement("div",["main-profiles__profile"]),s=createElement("div",["main-profiles__avatar"]),c=createElement("button",["main-profiles__btn"]),d=createElement("div",["main-profiles__user-info"]),p=createElement("input",["main-profiles__name"],{type:"text",readonly:!0,value:""}),m=createElement("button",["main-profiles__edit-name"],{"aria-label":e}),g=createElement("img",["main-profiles__edit-icon"],{width:"24",height:"24",loading:"lazy",alt:""});return c.innerHTML='<svg class="main-profiles__img" width="150" height="150" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">\n\t<circle cx="70" cy="70" r="8" fill="white" />\n\t<circle cx="130" cy="70" r="8" fill="white" />\n\t<path d="M60 110 Q100 150 140 110" stroke="white" stroke-width="6"\n\tfill="transparent" stroke-linecap="round" />\n\t</svg>',c.style.backgroundColor=r,s.append(c),m.append(g),d.append(p,m),i.append(s,d),t.push(i),setUserPreference("userProfiles",t,a),i},createProfileAddBtn=(e,t)=>{const a=createElement("div",["main-profiles__add-profile"]),n=createElement("div",["main-profiles__avatar"]),r=createElement("button",["main-profiles__btn","main-profiles__btn--add-profile"],{"aria-label":e}),o=createElement("img",["main-profiles__add-img"],{src:"./src/icons/add-profile.svg",loading:"lazy",alt:""}),l=createElement("span",["main-profiles__name"]);return l.textContent=t,r.append(o),n.append(r),a.append(n,l),a};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy5taW4uanMiLCJuYW1lcyI6WyJjcmVhdGVFbGVtZW50Iiwic2V0VXNlclByZWZlcmVuY2UiLCJVU0VSTkFNRSIsIlBBU1NXT1JEIiwiY3JlYXRlTG9naW5IZWFkZXIiLCJoZWFkZXIiLCJhbHQiLCJsb2dvIiwiYXJpYSIsImxvZ29MaW5rIiwiY2hhbmdlTGFuZ3VhZ2VCdXR0b24iLCJsYW5nQW1vdW50IiwibGFuZ05hbWVzIiwibGFuZ3VhZ2UiLCJoYW5kbGVMYW5nU2VsZWN0IiwicGFnZUxvZ28iLCJocmVmIiwibG9nb0ltZyIsInNyYyIsIndpZHRoIiwiaGVpZ2h0IiwibG9nb1RleHQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZCIsImxhbmdTZWxlY3QiLCJsYW5nUGxhdGZvcm1MYW5nIiwibGFuZ0Fycm93IiwibGFuZ0xpc3QiLCJpIiwibGFuZ0Nob2ljZSIsInRhYmluZGV4IiwiZGF0YSIsIk9iamVjdCIsImtleXMiLCJ0ZXh0IiwidmFsdWVzIiwiZGF0YXNldCIsImxhbmciLCJzdHlsZSIsImFuaW1hdGlvbkRlbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjYWxsIiwiY3JlYXRlTG9naW5QYWdlIiwibWFpbiIsInRpdGxlIiwic3VidGl0bGUiLCJkZXNjcmlwdGlvbiIsImJ1dHRvbiIsInBsYWNlaG9sZGVyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIm1haW5Db250ZW50Iiwid3JhcHBlciIsImxvZ2luVGl0bGUiLCJsb2dpblRpdGxlVG9wIiwibG9naW5UaXRsZUJvdHRvbSIsImxvZ2luVGV4dCIsImZvcm0iLCJ1c2VybmFtZUlucHV0IiwidHlwZSIsInBhc3N3b3JkSW5wdXQiLCJzdWJtaXRCdG4iLCJidXR0b25UZXh0IiwiZXJyb3JUeHQiLCJ1c2VyRGF0YSIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJoYW5kbGVMb2dpblZhbGlkYXRpb24iLCJ0cmFuc2xhdGlvbnMiLCJlcnJvclJlcXVpcmVkIiwiZXJyb3JJbnZhbGlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGFyZ2V0Iiwic2hvd1NtYWxsTG9hZGVyIiwiZGlzYWJsZWQiLCJzZXRUaW1lb3V0IiwiaGlkZVNtYWxsTG9hZGVyIiwid2luZG93IiwibG9jYXRpb24iLCJyZXF1aXJlRXJyb3IiLCJpbnZhbGlkRXJyb3IiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwidHJpbSIsImFkZCIsInNob3dCaWdMb2FkZXIiLCJsb2FkaW5nQXJlYSIsImlubmVySFRNTCIsImhpZGVCaWdMb2FkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVQcm9maWxlc1BhZ2UiLCJwcm9maWxlcyIsImFkZFByb2ZpbGVJbmZvIiwiYWRkUHJvZmlsZUJ0biIsInVzZXJQcm9maWxlQnRuIiwidXNlclByb2ZpbGVzIiwiY29udGFpbmVyIiwicHJvZmlsZXNQYWdlTWFpbiIsInByb2ZpbGVzVGl0bGUiLCJwcm9maWxlc0JveCIsImNyZWF0ZVByb2ZpbGVBZGRCdG4iLCJjcmVhdGVQcm9maWxlIiwiYXJpYUluZm8iLCJpbmRleCIsImNvbG9yIiwiY29sb3JzIiwidXNlZENvbG9ycyIsIlNldCIsIk1hdGgiLCJ0cnVuYyIsInJhbmRvbSIsImxlbmd0aCIsImhhcyIsInJhbmRvbU51bWJlciIsInVzZXJQcm9maWxlIiwidXNlckF2YXRhckJveCIsInVzZXJQcm9maWxlSW5mb0JveCIsInVzZXJQcm9maWxlSW5mbyIsInJlYWRvbmx5IiwiZWRpdFVzZXJJbmZvQnRuIiwiZWRpdFVzZXJJbmZvSWNvbiIsImxvYWRpbmciLCJiYWNrZ3JvdW5kQ29sb3IiLCJwdXNoIiwiaW5mbyIsImFkZFByb2ZpbGVCb3giLCJhZGRQcm9maWxlQXZhdGFyIiwiYWRkUHJvZmlsZVBsdXNJY29uIl0sInNvdXJjZXMiOlsiY29tcG9uZW50cy5qcyJdLCJtYXBwaW5ncyI6Ik9BQVNBLGtCQUFxQiwwQkFDckJDLHNCQUF5QixnQ0FFbEMsTUFBTUMsU0FBVyxrQkFDWEMsU0FBVyxrQkFF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Ii4vaGVscGVycy5taW4uanNcIjtcclxuaW1wb3J0IHsgc2V0VXNlclByZWZlcmVuY2UgfSBmcm9tIFwiLi91cGRhdGVTdGF0ZUZ1bmN0aW9ucy5taW4uanNcIjtcclxuXHJcbmNvbnN0IFVTRVJOQU1FID0gXCJoYW5kc29tZVVzZXI0MDRcIjtcclxuY29uc3QgUEFTU1dPUkQgPSBcIjVqa3NIOWQuXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlTG9naW5IZWFkZXIgPSAoXHJcblx0e1xyXG5cdFx0aGVhZGVyOiB7XHJcblx0XHRcdGFsdDogeyBsb2dvIH0sXHJcblx0XHRcdGFyaWE6IHsgbG9nb0xpbmssIGNoYW5nZUxhbmd1YWdlQnV0dG9uIH0sXHJcblx0XHR9LFxyXG5cdH0sXHJcblx0bGFuZ0Ftb3VudCxcclxuXHRsYW5nTmFtZXMsXHJcblx0bGFuZ3VhZ2UsXHJcblx0aGFuZGxlTGFuZ1NlbGVjdFxyXG4pID0+IHtcclxuXHQvLyBsb2dvXHJcblx0Y29uc3QgaGVhZGVyID0gY3JlYXRlRWxlbWVudChcImhlYWRlclwiLCBbXCJoZWFkZXJcIl0pO1xyXG5cdGNvbnN0IHBhZ2VMb2dvID0gY3JlYXRlRWxlbWVudChcImFcIiwgW1wiaGVhZGVyX19sb2dvXCIsIFwibG9naW4taGVhZGVyX19sb2dvXCJdLCB7XHJcblx0XHRocmVmOiBcIi9cIixcclxuXHRcdFwiYXJpYS1sYWJlbFwiOiBgJHtsb2dvTGlua31gLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGxvZ29JbWcgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJpbWdcIixcclxuXHRcdFtcImhlYWRlcl9fbG9nby1pbWdcIiwgXCJsb2dpbi1oZWFkZXJfX2xvZ28taW1nXCJdLFxyXG5cdFx0e1xyXG5cdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvbG9nby5zdmdcIixcclxuXHRcdFx0YWx0OiBgJHtsb2dvfWAsXHJcblx0XHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdFx0fVxyXG5cdCk7XHJcblx0Y29uc3QgbG9nb1RleHQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXHJcblx0XHRcImhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XHRcImxvZ2luLWhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XSk7XHJcblx0bG9nb1RleHQudGV4dENvbnRlbnQgPSBcIlN0cmVhbVwiO1xyXG5cdHBhZ2VMb2dvLmFwcGVuZChsb2dvSW1nLCBsb2dvVGV4dCk7XHJcblx0aGVhZGVyLmFwcGVuZChwYWdlTG9nbyk7XHJcblx0Ly8gZW5kIG9mIGxvZ29cclxuXHJcblx0Ly8gbGFuZ3VhZ2Ugc2VsZWN0b3JcclxuXHRjb25zdCBsYW5nU2VsZWN0ID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctc2VsZWN0XCJdLCB7XHJcblx0XHRcImFyaWEtbGFiZWxcIjogYCR7Y2hhbmdlTGFuZ3VhZ2VCdXR0b259YCxcclxuXHR9KTtcclxuXHRjb25zdCBsYW5nUGxhdGZvcm1MYW5nID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XCJsb2dpbi1oZWFkZXJfX2xhbmctcGxhdGZvcm0tbGFuZ1wiLFxyXG5cdF0pO1xyXG5cdGNvbnN0IGxhbmdBcnJvdyA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wibG9naW4taGVhZGVyX19sYW5nLWFycm93XCJdLCB7XHJcblx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvY2hldnJvbi1kb3duLnN2Z1wiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGxhbmdMaXN0ID0gY3JlYXRlRWxlbWVudChcInVsXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1saXN0XCJdKTtcclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsYW5nQW1vdW50OyBpKyspIHtcclxuXHRcdGNvbnN0IGxhbmdDaG9pY2UgPSBjcmVhdGVFbGVtZW50KFwibGlcIiwgW1wibG9naW4taGVhZGVyX19sYW5nLWNob2ljZVwiXSwge1xyXG5cdFx0XHR0YWJpbmRleDogMCxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgZGF0YSA9IE9iamVjdC5rZXlzKGxhbmdOYW1lcylbaV07XHJcblx0XHRjb25zdCB0ZXh0ID0gT2JqZWN0LnZhbHVlcyhsYW5nTmFtZXMpW2ldO1xyXG5cclxuXHRcdGxhbmdDaG9pY2UuZGF0YXNldC5sYW5nID0gZGF0YTtcclxuXHRcdGxhbmdDaG9pY2UudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0bGFuZ0Nob2ljZS5zdHlsZS5hbmltYXRpb25EZWxheSA9IGkgKiAxMDAgKyBcIm1zXCI7XHJcblx0XHRsYW5nTGlzdC5hcHBlbmQobGFuZ0Nob2ljZSk7XHJcblx0fVxyXG5cclxuXHRsYW5nUGxhdGZvcm1MYW5nLnRleHRDb250ZW50ID0gbGFuZ05hbWVzW2xhbmd1YWdlXTtcclxuXHJcblx0bGFuZ1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdGhhbmRsZUxhbmdTZWxlY3QuY2FsbChsYW5nU2VsZWN0LCBlLCBsYW5nUGxhdGZvcm1MYW5nKTtcclxuXHR9KTtcclxuXHJcblx0bGFuZ1NlbGVjdC5hcHBlbmQobGFuZ1BsYXRmb3JtTGFuZywgbGFuZ0Fycm93LCBsYW5nTGlzdCk7XHJcblx0aGVhZGVyLmFwcGVuZChsYW5nU2VsZWN0KTtcclxuXHJcblx0cmV0dXJuIGhlYWRlcjtcclxuXHQvLyBlbmQgb2YgbGFuZ3VhZ2Ugc2VsZWN0b3JcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVMb2dpblBhZ2UgPSAoe1xyXG5cdG1haW46IHtcclxuXHRcdHRleHQ6IHsgdGl0bGUsIHN1YnRpdGxlLCBkZXNjcmlwdGlvbiwgYnV0dG9uIH0sXHJcblx0XHRwbGFjZWhvbGRlcjogeyB1c2VybmFtZSwgcGFzc3dvcmQgfSxcclxuXHR9LFxyXG59KSA9PiB7XHJcblx0Y29uc3QgbWFpbkNvbnRlbnQgPSBjcmVhdGVFbGVtZW50KFwibWFpblwiLCBbXCJtYWluXCJdKTtcclxuXHRjb25zdCB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJ3cmFwcGVyXCJdKTtcclxuXHRjb25zdCBsb2dpblRpdGxlID0gY3JlYXRlRWxlbWVudChcImgxXCIpO1xyXG5cdGNvbnN0IGxvZ2luVGl0bGVUb3AgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBbXCJtYWluX190aXRsZVwiXSk7XHJcblx0Y29uc3QgbG9naW5UaXRsZUJvdHRvbSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcIm1haW5fX3N1YnRpdGxlXCJdKTtcclxuXHRjb25zdCBsb2dpblRleHQgPSBjcmVhdGVFbGVtZW50KFwicFwiLCBbXCJtYWluX190ZXh0XCJdKTtcclxuXHRjb25zdCBmb3JtID0gY3JlYXRlRWxlbWVudChcImZvcm1cIiwgW1wibWFpbl9fZm9ybVwiXSk7XHJcblx0Y29uc3QgdXNlcm5hbWVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImlucHV0XCIsXHJcblx0XHRbXCJtYWluX19mb3JtLWlucHV0XCIsIFwibWFpbl9fZm9ybS1pbnB1dC0tdXNlcm5hbWVcIl0sXHJcblx0XHR7IHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogdXNlcm5hbWUgfVxyXG5cdCk7XHJcblx0Y29uc3QgcGFzc3dvcmRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcImlucHV0XCIsXHJcblx0XHRbXCJtYWluX19mb3JtLWlucHV0XCIsIFwibWFpbl9fZm9ybS1pbnB1dC0tcGFzc3dvcmRcIl0sXHJcblx0XHR7IHR5cGU6IFwicGFzc3dvcmRcIiwgcGxhY2Vob2xkZXI6IHBhc3N3b3JkIH1cclxuXHQpO1xyXG5cdGNvbnN0IHN1Ym1pdEJ0biA9IGNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgW1wibWFpbl9fZm9ybS1idXR0b25cIl0sIHtcclxuXHRcdHR5cGU6IFwic3VibWl0XCIsXHJcblx0fSk7XHJcblx0Y29uc3QgYnV0dG9uVGV4dCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcIm1haW5fX2Zvcm0tYnV0dG9uLXRleHRcIl0pO1xyXG5cclxuXHRjb25zdCBlcnJvclR4dCA9IGNyZWF0ZUVsZW1lbnQoXCJwXCIsIFtcIm1haW5fX2Zvcm0tZXJyb3ItdHh0XCJdKTtcclxuXHRsb2dpblRpdGxlVG9wLnRleHRDb250ZW50ID0gdGl0bGU7XHJcblx0bG9naW5UaXRsZUJvdHRvbS50ZXh0Q29udGVudCA9IHN1YnRpdGxlO1xyXG5cdGxvZ2luVGV4dC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG5cdGJ1dHRvblRleHQudGV4dENvbnRlbnQgPSBidXR0b247XHJcblxyXG5cdGxvZ2luVGl0bGUuYXBwZW5kKGxvZ2luVGl0bGVUb3AsIGxvZ2luVGl0bGVCb3R0b20pO1xyXG5cdHN1Ym1pdEJ0bi5hcHBlbmQoYnV0dG9uVGV4dCk7XHJcblx0Zm9ybS5hcHBlbmQodXNlcm5hbWVJbnB1dCwgcGFzc3dvcmRJbnB1dCwgc3VibWl0QnRuLCBlcnJvclR4dCk7XHJcblxyXG5cdHdyYXBwZXIuYXBwZW5kKGxvZ2luVGl0bGUsIGxvZ2luVGV4dCwgZm9ybSk7XHJcblx0bWFpbkNvbnRlbnQuYXBwZW5kKHdyYXBwZXIpO1xyXG5cclxuXHRzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRjb25zdCB1c2VyRGF0YSA9IEpTT04ucGFyc2U/Lihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJEYXRhXCIpKTtcclxuXHJcblx0XHRjb25zdCByZXN1bHRzID0gaGFuZGxlTG9naW5WYWxpZGF0aW9uKFxyXG5cdFx0XHRlLFxyXG5cdFx0XHR1c2VybmFtZUlucHV0LFxyXG5cdFx0XHRwYXNzd29yZElucHV0LFxyXG5cdFx0XHR0cmFuc2xhdGlvbnMubWFpbi50ZXh0LmVycm9yUmVxdWlyZWQsXHJcblx0XHRcdHRyYW5zbGF0aW9ucy5tYWluLnRleHQuZXJyb3JJbnZhbGlkLFxyXG5cdFx0XHRVU0VSTkFNRSxcclxuXHRcdFx0UEFTU1dPUkQsXHJcblx0XHRcdGVycm9yVHh0XHJcblx0XHQpO1xyXG5cclxuXHRcdGlmICghcmVzdWx0cykge1xyXG5cdFx0XHRlcnJvclR4dC5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKTtcclxuXHRcdFx0ZS50YXJnZXQuYXBwZW5kKHNob3dTbWFsbExvYWRlcigpKTtcclxuXHRcdFx0ZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0ZS50YXJnZXQuZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRoaWRlU21hbGxMb2FkZXIoKTtcclxuXHJcblx0XHRcdFx0c2V0VXNlclByZWZlcmVuY2UoXCJ0cmFuc2xhdGlvbnNcIiwgdHJhbnNsYXRpb25zLCB1c2VyRGF0YSk7XHJcblx0XHRcdFx0c2V0VXNlclByZWZlcmVuY2UoXCJsb2dnZWRJblwiLCB0cnVlLCB1c2VyRGF0YSk7XHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcInByb2ZpbGVzLmh0bWxcIjsgLy8gcHJ6ZWrFm2NpZSBuYSBzdHJvbsSZIHogcHJvZmlsYW1pXHJcblx0XHRcdH0sIDMwMDApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRyZXR1cm4gbWFpbkNvbnRlbnQ7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVMb2dpblZhbGlkYXRpb24gPSAoXHJcblx0ZSxcclxuXHR1c2VybmFtZUlucHV0LFxyXG5cdHBhc3N3b3JkSW5wdXQsXHJcblx0cmVxdWlyZUVycm9yLFxyXG5cdGludmFsaWRFcnJvcixcclxuXHR1c2VybmFtZSxcclxuXHRwYXNzd29yZCxcclxuXHRlcnJvclR4dFxyXG4pID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdGlmICh1c2VybmFtZUlucHV0LnZhbHVlLnRyaW0oKSA9PT0gXCJcIiB8fCBwYXNzd29yZElucHV0LnZhbHVlLnRyaW0oKSA9PT0gXCJcIikge1xyXG5cdFx0ZXJyb3JUeHQuY2xhc3NMaXN0LmFkZChcInZpc2libGVcIik7XHJcblx0XHRlcnJvclR4dC50ZXh0Q29udGVudCA9IHJlcXVpcmVFcnJvcjtcclxuXHRcdHJldHVybiByZXF1aXJlRXJyb3I7XHJcblx0fSBlbHNlIGlmIChcclxuXHRcdHVzZXJuYW1lSW5wdXQudmFsdWUudHJpbSgpICE9PSB1c2VybmFtZSB8fFxyXG5cdFx0cGFzc3dvcmRJbnB1dC52YWx1ZS50cmltKCkgIT09IHBhc3N3b3JkXHJcblx0KSB7XHJcblx0XHRlLnRhcmdldC5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHRlLnRhcmdldC5hcHBlbmQoc2hvd1NtYWxsTG9hZGVyKCkpO1xyXG5cdFx0ZXJyb3JUeHQuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XHJcblxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGVycm9yVHh0LmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpO1xyXG5cdFx0XHRlcnJvclR4dC50ZXh0Q29udGVudCA9IGludmFsaWRFcnJvcjtcclxuXHJcblx0XHRcdGUudGFyZ2V0LmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRoaWRlU21hbGxMb2FkZXIoKTtcclxuXHRcdH0sIDMwMDApO1xyXG5cdFx0cmV0dXJuIGludmFsaWRFcnJvcjtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNob3dCaWdMb2FkZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgbG9hZGluZ0FyZWEgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcImxvYWRpbmctYXJlYVwiXSk7XHJcblx0bG9hZGluZ0FyZWEuaW5uZXJIVE1MID0gYCAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJsb2FkZXItYmlnXCIgdmlld0JveD1cIjAgMCAxMjAgMTIwXCIgd2lkdGg9XCIxMjBcIiBoZWlnaHQ9XCIxMjBcIj5cclxuICAgICAgICAgICAgICAgIDxkZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD1cImxvYWRlci1hY2NlbnRcIiB4MT1cIjAlXCIgeTE9XCIwJVwiIHgyPVwiMTAwJVwiIHkyPVwiMCVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdG9wLWNvbG9yPVwiIzRkYThkYVwiIHN0b3Atb3BhY2l0eT1cIjAuOFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjcwJVwiIHN0b3AtY29sb3I9XCIjNGRhOGRhXCIgc3RvcC1vcGFjaXR5PVwiMC40XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMTAwJVwiIHN0b3AtY29sb3I9XCIjNGRhOGRhXCIgc3RvcC1vcGFjaXR5PVwiMFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cclxuICAgICAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3M9XCJsb2FkaW5nLWNpcmNsZS1iaWdcIiByPVwiMzVcIiBjeD1cIjYwXCIgY3k9XCI2MFwiPjwvY2lyY2xlPlxyXG4gICAgICAgICAgICA8L3N2Zz5gO1xyXG5cdHJldHVybiBsb2FkaW5nQXJlYTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGhpZGVCaWdMb2FkZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgbG9hZGluZ0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvYWRpbmctYXJlYVwiKTtcclxuXHRsb2FkaW5nQXJlYT8ucmVtb3ZlKCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2hvd1NtYWxsTG9hZGVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IGxvYWRpbmdBcmVhID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJsb2FkaW5nLWFyZWEtc21hbGxcIl0pO1xyXG5cdGxvYWRpbmdBcmVhLmlubmVySFRNTCA9IGA8c3ZnIGNsYXNzPVwibG9hZGVyLXNtYWxsXCIgdmlld0JveD1cIjAgMCAxMjAgMTIwXCIgd2lkdGg9XCIxMjBcIiBoZWlnaHQ9XCIxMjBcIj5cclxuICAgICAgICAgICAgICAgIDxkZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD1cImxvYWRlci1hY2NlbnQtc21hbGxcIiB4MT1cIjAlXCIgeTE9XCIwJVwiIHgyPVwiMTAwJVwiIHkyPVwiMCVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdG9wLWNvbG9yPVwid2hpdGVcIiBzdG9wLW9wYWNpdHk9XCIwLjhcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCI3MCVcIiBzdG9wLWNvbG9yPVwid2hpdGVcIiBzdG9wLW9wYWNpdHk9XCIwLjNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3RvcC1jb2xvcj1cIndoaXRlXCIgc3RvcC1vcGFjaXR5PVwiMFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cclxuICAgICAgICAgICAgICAgIDwvZGVmcz5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3M9XCJsb2FkaW5nLWNpcmNsZS1zbWFsbFwiIHI9XCIxMlwiIGN4PVwiNjBcIiBjeT1cIjYwXCI+PC9jaXJjbGU+XHJcbiAgICAgICAgICAgIDwvc3ZnPmA7XHJcblxyXG5cdHJldHVybiBsb2FkaW5nQXJlYTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGhpZGVTbWFsbExvYWRlciA9ICgpID0+IHtcclxuXHRjb25zdCBsb2FkaW5nQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9hZGluZy1hcmVhLXNtYWxsXCIpO1xyXG5cdGxvYWRpbmdBcmVhLnJlbW92ZSgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVByb2ZpbGVzUGFnZSA9ICh7XHJcblx0cHJvZmlsZXM6IHtcclxuXHRcdHRleHQ6IHsgdGl0bGUsIGFkZFByb2ZpbGVJbmZvIH0sXHJcblx0XHRhcmlhOiB7IGFkZFByb2ZpbGVCdG4sIHVzZXJQcm9maWxlQnRuIH0sXHJcblx0fSxcclxuXHR1c2VyUHJvZmlsZXMsXHJcbn0pID0+IHtcclxuXHRjb25zdCB1c2VyRGF0YSA9IEpTT04ucGFyc2U/Lihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJEYXRhXCIpKTtcclxuXHRjb25zdCB1c2VyUHJvZmlsZXNBcnIgPSB1c2VyRGF0YT8udXNlclByb2ZpbGVzO1xyXG5cclxuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHRjb25zdCBwcm9maWxlc1BhZ2VNYWluID0gY3JlYXRlRWxlbWVudChcIm1haW5cIiwgW1wibWFpbi1wcm9maWxlc1wiXSk7XHJcblx0Y29uc3Qgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wid3JhcHBlclwiXSk7XHJcblx0Y29uc3QgcHJvZmlsZXNUaXRsZSA9IGNyZWF0ZUVsZW1lbnQoXCJoMVwiLCBbXHJcblx0XHRcIm1haW5fX3RpdGxlXCIsXHJcblx0XHRcIm1haW4tcHJvZmlsZXNfX3RpdGxlXCIsXHJcblx0XSk7XHJcblx0Y29uc3QgcHJvZmlsZXNCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX2JveFwiXSk7XHJcblxyXG5cdHByb2ZpbGVzVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuXHJcblx0Ly8gaWYgKCF1c2VyRGF0YSB8fCAhdXNlclByb2ZpbGVzQXJyIHx8IHVzZXJQcm9maWxlc0Fyci5sZW5ndGggPT09IDApIHtcclxuXHJcblx0Ly8gfVxyXG5cclxuXHRwcm9maWxlc0JveC5hcHBlbmQoY3JlYXRlUHJvZmlsZUFkZEJ0bihhZGRQcm9maWxlQnRuLCBhZGRQcm9maWxlSW5mbykpO1xyXG5cdHdyYXBwZXIuYXBwZW5kKHByb2ZpbGVzVGl0bGUsIHByb2ZpbGVzQm94KTtcclxuXHRwcm9maWxlc1BhZ2VNYWluLmFwcGVuZCh3cmFwcGVyKTtcclxuXHJcblx0Y29udGFpbmVyLmFwcGVuZChwcm9maWxlc1BhZ2VNYWluKTtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZVByb2ZpbGUgPSAoYXJpYUluZm8sIHVzZXJQcm9maWxlcykgPT4ge1xyXG5cdGNvbnN0IHVzZXJEYXRhID0gSlNPTi5wYXJzZT8uKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckRhdGFcIikpO1xyXG5cclxuXHRsZXQgaW5kZXg7XHJcblx0bGV0IGNvbG9yO1xyXG5cdGNvbnN0IGNvbG9ycyA9IFtcIiNkYzRhMzRcIiwgXCIjMDYyRTYzXCIsIFwiI0ZBQzA0NFwiXTtcclxuXHRjb25zdCB1c2VkQ29sb3JzID0gbmV3IFNldCgpO1xyXG5cclxuXHRkbyB7XHJcblx0XHRpbmRleCA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpO1xyXG5cdH0gd2hpbGUgKHVzZWRDb2xvcnMuaGFzKHJhbmRvbU51bWJlcikpO1xyXG5cclxuXHR1c2VkQ29sb3JzLmFkZChpbmRleCk7XHJcblxyXG5cdGNvbG9yID0gY29sb3JzW2luZGV4XTtcclxuXHJcblx0Y29uc3QgdXNlclByb2ZpbGUgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX3Byb2ZpbGVcIl0pO1xyXG5cdGNvbnN0IHVzZXJBdmF0YXJCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX2F2YXRhclwiXSk7XHJcblx0Y29uc3QgdXNlclByb2ZpbGVCdG4gPSBjcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFtcIm1haW4tcHJvZmlsZXNfX2J0blwiXSk7XHJcblxyXG5cdGNvbnN0IHVzZXJQcm9maWxlSW5mb0JveCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgW1wibWFpbi1wcm9maWxlc19fdXNlci1pbmZvXCJdKTtcclxuXHRjb25zdCB1c2VyUHJvZmlsZUluZm8gPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgW1wibWFpbi1wcm9maWxlc19fbmFtZVwiXSwge1xyXG5cdFx0dHlwZTogXCJ0ZXh0XCIsXHJcblx0XHRyZWFkb25seTogdHJ1ZSxcclxuXHRcdHZhbHVlOiBcIlwiLCAvLyBkbyB1enVwZcWCbmllbmlhXHJcblx0fSk7XHJcblx0Y29uc3QgZWRpdFVzZXJJbmZvQnRuID0gY3JlYXRlRWxlbWVudChcclxuXHRcdFwiYnV0dG9uXCIsXHJcblx0XHRbXCJtYWluLXByb2ZpbGVzX19lZGl0LW5hbWVcIl0sXHJcblx0XHR7IFwiYXJpYS1sYWJlbFwiOiBhcmlhSW5mbyB9XHJcblx0KTtcclxuXHRjb25zdCBlZGl0VXNlckluZm9JY29uID0gY3JlYXRlRWxlbWVudChcImltZ1wiLCBbXCJtYWluLXByb2ZpbGVzX19lZGl0LWljb25cIl0sIHtcclxuXHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdH0pO1xyXG5cclxuXHR1c2VyUHJvZmlsZUJ0bi5pbm5lckhUTUwgPSBgPHN2ZyBjbGFzcz1cIm1haW4tcHJvZmlsZXNfX2ltZ1wiIHdpZHRoPVwiMTUwXCIgaGVpZ2h0PVwiMTUwXCIgdmlld0JveD1cIjAgMCAyMDAgMjAwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxyXG5cdDxjaXJjbGUgY3g9XCI3MFwiIGN5PVwiNzBcIiByPVwiOFwiIGZpbGw9XCJ3aGl0ZVwiIC8+XHJcblx0PGNpcmNsZSBjeD1cIjEzMFwiIGN5PVwiNzBcIiByPVwiOFwiIGZpbGw9XCJ3aGl0ZVwiIC8+XHJcblx0PHBhdGggZD1cIk02MCAxMTAgUTEwMCAxNTAgMTQwIDExMFwiIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlLXdpZHRoPVwiNlwiXHJcblx0ZmlsbD1cInRyYW5zcGFyZW50XCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIC8+XHJcblx0PC9zdmc+YDtcclxuXHR1c2VyUHJvZmlsZUJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcclxuXHJcblx0dXNlckF2YXRhckJveC5hcHBlbmQodXNlclByb2ZpbGVCdG4pO1xyXG5cdGVkaXRVc2VySW5mb0J0bi5hcHBlbmQoZWRpdFVzZXJJbmZvSWNvbik7XHJcblx0dXNlclByb2ZpbGVJbmZvQm94LmFwcGVuZCh1c2VyUHJvZmlsZUluZm8sIGVkaXRVc2VySW5mb0J0bik7XHJcblx0dXNlclByb2ZpbGUuYXBwZW5kKHVzZXJBdmF0YXJCb3gsIHVzZXJQcm9maWxlSW5mb0JveCk7XHJcblxyXG5cdHVzZXJQcm9maWxlcy5wdXNoKHVzZXJQcm9maWxlKTsgLy8gZG9kYXdhbmllIGRvIHRhYmxpY3kgeiBwcm9maWxhbWlcclxuXHRzZXRVc2VyUHJlZmVyZW5jZShcInVzZXJQcm9maWxlc1wiLCB1c2VyUHJvZmlsZXMsIHVzZXJEYXRhKTtcclxuXHJcblx0cmV0dXJuIHVzZXJQcm9maWxlO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlUHJvZmlsZUFkZEJ0biA9IChhcmlhSW5mbywgaW5mbykgPT4ge1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVCb3ggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFtcIm1haW4tcHJvZmlsZXNfX2FkZC1wcm9maWxlXCJdKTtcclxuXHRjb25zdCBhZGRQcm9maWxlQXZhdGFyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBbXCJtYWluLXByb2ZpbGVzX19hdmF0YXJcIl0pO1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVCdG4gPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XCJidXR0b25cIixcclxuXHRcdFtcIm1haW4tcHJvZmlsZXNfX2J0blwiLCBcIm1haW4tcHJvZmlsZXNfX2J0bi0tYWRkLXByb2ZpbGVcIl0sXHJcblx0XHR7IFwiYXJpYS1sYWJlbFwiOiBhcmlhSW5mbyB9XHJcblx0KTtcclxuXHRjb25zdCBhZGRQcm9maWxlUGx1c0ljb24gPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcIm1haW4tcHJvZmlsZXNfX2FkZC1pbWdcIl0sIHtcclxuXHRcdHNyYzogXCIuL3NyYy9pY29ucy9hZGQtcHJvZmlsZS5zdmdcIixcclxuXHRcdGxvYWRpbmc6IFwibGF6eVwiLFxyXG5cdFx0YWx0OiBcIlwiLFxyXG5cdH0pO1xyXG5cdGNvbnN0IGFkZFByb2ZpbGVJbmZvID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1wibWFpbi1wcm9maWxlc19fbmFtZVwiXSk7XHJcblxyXG5cdGFkZFByb2ZpbGVJbmZvLnRleHRDb250ZW50ID0gaW5mbztcclxuXHJcblx0YWRkUHJvZmlsZUJ0bi5hcHBlbmQoYWRkUHJvZmlsZVBsdXNJY29uKTtcclxuXHRhZGRQcm9maWxlQXZhdGFyLmFwcGVuZChhZGRQcm9maWxlQnRuKTtcclxuXHRhZGRQcm9maWxlQm94LmFwcGVuZChhZGRQcm9maWxlQXZhdGFyLCBhZGRQcm9maWxlSW5mbyk7XHJcblxyXG5cdHJldHVybiBhZGRQcm9maWxlQm94O1xyXG59O1xyXG4iXX0=
