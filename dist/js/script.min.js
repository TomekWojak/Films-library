import{createElement}from"./helpers.min.js";import{updateElement}from"./updateStateFunctions.min.js";import{createLoginPage,showLoader,hideLoader}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){document.querySelector(".root");const e=document.querySelector(".container");let t=function(){let e=navigator.language||navigator.userLanguage;return e&&"pl"===e&&"en"===e?(e=e.slice(0,2).toLowerCase(),e):"pl"}();const a={pl:"Polski",en:"English"};let n={};window.translations={};let o=Object.keys(a).length;(()=>{const e=JSON.parse(localStorage.getItem("userData"))?.preferredLanguage;e&&(t=e)})();(async()=>{try{e.append(showLoader());const a=await fetch(`./src/json/${t}.json`),n=await a.json();translations=n}catch{console.error("Error loading initial translation file")}finally{hideLoader()}e.prepend(r()),e.append(createLoginPage(translations))})();const r=()=>{const e=createElement("header",["header"]),n=createElement("a",["header__logo","login-header__logo"],{href:"/","aria-label":`${translations.header.aria.logoLink}`}),r=createElement("img",["header__logo-img","login-header__logo-img"],{src:"./src/icons/logo.svg",alt:`${translations.header.alt.logo}`,width:"24",height:"24"}),i=createElement("span",["header__logo-text","login-header__logo-text"]);i.textContent="Stream",n.append(r,i),e.append(n);const s=createElement("button",["login-header__lang-select"],{"aria-label":`${translations.header.aria.changeLanguageButton}`}),c=createElement("span",["login-header__lang-platform-lang"]),g=createElement("img",["login-header__lang-arrow"],{src:"./src/icons/chevron-down.svg",alt:"",width:"24",height:"24"}),d=createElement("ul",["login-header__lang-list"]);for(let e=0;e<o;e++){const t=createElement("li",["login-header__lang-choice"]),n=Object.keys(a)[e],o=Object.values(a)[e];t.dataset.lang=n,t.textContent=o,t.style.animationDelay=100*e+"ms",d.append(t)}return c.textContent=a[t],s.addEventListener("click",e=>{l.call(s,e,c)}),s.append(c,g,d),e.append(s),e};function l(e,n){if(this.classList.toggle("active"),e.target.matches(".login-header__lang-choice")){const o=e.target.dataset.lang;n.textContent=a[o],t=o,(async()=>{try{const e=await fetch(`./src/json/${t}.json`);if(!e.ok)throw new Error("Network response was not ok");const a=await e.json();translations=a,console.log(translations),updateElement("login-header__logo","aria",translations.header.aria.logoLink),updateElement("login-header__logo-img","alt",translations.header.alt.logo),updateElement("login-header__lang-select","aria",translations.header.aria.changeLanguageButton),updateElement("main__title","text",translations.main.text.title),updateElement("main__subtitle","text",translations.main.text.subtitle),updateElement("main__text","text",translations.main.text.description),updateElement("main__form-input--username","placeholder",translations.main.placeholder.username),updateElement("main__form-input--password","placeholder",translations.main.placeholder.password),updateElement("main__form-button","text",translations.main.text.button),updateElement("main__form-error-txt","text",translations.main.text.errorRequired)}catch{console.error("Error loading translation file")}})(),i("preferredLanguage",t)}}const i=(e,t)=>{const a=JSON.parse(localStorage.getItem("userData"))||{};a[e]=t,n={...n,...a},localStorage.setItem("userData",JSON.stringify(n))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsIm5hbWVzIjpbImNyZWF0ZUVsZW1lbnQiLCJ1cGRhdGVFbGVtZW50IiwiY3JlYXRlTG9naW5QYWdlIiwic2hvd0xvYWRlciIsImhpZGVMb2FkZXIiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyIiwibGFuZ3VhZ2UiLCJ1c2VyTGFuZyIsIm5hdmlnYXRvciIsInVzZXJMYW5ndWFnZSIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJoYW5kbGVVc2VyTGFuZ3VhZ2UiLCJsYW5nTmFtZXMiLCJwbCIsImVuIiwidXNlckRhdGEiLCJ3aW5kb3ciLCJ0cmFuc2xhdGlvbnMiLCJsYW5nQW1vdW50IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInByZWZlcnJlZExhbmciLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJnZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlIiwiYXN5bmMiLCJhcHBlbmQiLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJjb25zb2xlIiwiZXJyb3IiLCJwcmVwZW5kIiwiY3JlYXRlTG9naW5IZWFkZXIiLCJsb2FkRmlyc3RUcmFuc2xhdGlvbnMiLCJoZWFkZXIiLCJsb2dvIiwiaHJlZiIsImFyaWEiLCJsb2dvTGluayIsImxvZ29JbWciLCJzcmMiLCJhbHQiLCJ3aWR0aCIsImhlaWdodCIsImxvZ29UZXh0IiwidGV4dENvbnRlbnQiLCJsYW5nU2VsZWN0IiwiY2hhbmdlTGFuZ3VhZ2VCdXR0b24iLCJsYW5nUGxhdGZvcm1MYW5nIiwibGFuZ0Fycm93IiwibGFuZ0xpc3QiLCJpIiwibGFuZ0Nob2ljZSIsInRleHQiLCJ2YWx1ZXMiLCJkYXRhc2V0IiwibGFuZyIsInN0eWxlIiwiYW5pbWF0aW9uRGVsYXkiLCJlIiwiaGFuZGxlTGFuZ1NlbGVjdCIsImNhbGwiLCJsYW5nVGV4dCIsInRoaXMiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwic2VsZWN0ZWRMYW5nIiwib2siLCJFcnJvciIsImxvZyIsIm1haW4iLCJ0aXRsZSIsInN1YnRpdGxlIiwiZGVzY3JpcHRpb24iLCJwbGFjZWhvbGRlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJidXR0b24iLCJlcnJvclJlcXVpcmVkIiwibG9hZFRyYW5zbGF0aW9ucyIsInNldFVzZXJMYW5ndWFnZVByZWZlcmVuY2UiLCJvcHRpb24iLCJ2YWx1ZSIsImN1cnJlbnRVc2VyRGF0YSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiXSwic291cmNlcyI6WyJzY3JpcHQuanMiXSwibWFwcGluZ3MiOiJPQUFTQSxrQkFBcUIsMEJBQ3JCQyxrQkFBcUIsdUNBQ3JCQyxnQkFBaUJDLFdBQVlDLGVBQWtCLHNCQUV4REMsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUNoQ0QsU0FBU0UsY0FBYyxTQUFwQyxNQUNNQyxFQUFZSCxTQUFTRSxjQUFjLGNBQ3pDLElBQUlFLEVBT0osV0FDQyxJQUFJQyxFQUFXQyxVQUFVRixVQUFZRSxVQUFVQyxhQUUvQyxPQUFLRixHQUF5QixPQUFiQSxHQUFrQyxPQUFiQSxHQUV0Q0EsRUFBV0EsRUFBU0csTUFBTSxFQUFHLEdBQUdDLGNBRXpCSixHQUp5RCxJQUtqRSxDQWZlSyxHQUNmLE1BQU1DLEVBQVksQ0FBRUMsR0FBSSxTQUFVQyxHQUFJLFdBQ3RDLElBQUlDLEVBQVcsQ0FBQyxFQUNoQkMsT0FBT0MsYUFBZSxDQUFDLEVBRXZCLElBQUlDLEVBRGNDLE9BQU9DLEtBQUtSLEdBQ0hTLE9BV08sTUFDakMsTUFBTUMsRUFBZ0JDLEtBQUtDLE1BQzFCQyxhQUFhQyxRQUFRLGNBQ25CQyxrQkFFQ0wsSUFBZWpCLEVBQVdpQixJQUUvQk0sR0FFOEJDLFdBQzdCLElBQ0N6QixFQUFVMEIsT0FBTy9CLGNBRWpCLE1BQU1nQyxRQUFpQkMsTUFBTSxjQUFjM0IsVUFDckM0QixRQUFhRixFQUFTRyxPQUM1QmpCLGFBQWVnQixDQUNo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QixhQUFhNkQsS0FBS25CLEtBQUswQixRQUNsRXhGLGNBQ0MsdUJBQ0EsT0FDQW9CLGFBQWE2RCxLQUFLbkIsS0FBSzJCLGNBRXpCLENBQUUsTUFDRG5ELFFBQVFDLE1BQU0saUNBQ2YsR0EyRUNtRCxHQUNBQyxFQUEwQixvQkFBcUJuRixFQUNoRCxDQUNELENBQ0EsTUFBTW1GLEVBQTRCLENBQUNDLEVBQVFDLEtBQzFDLE1BQU1DLEVBQWtCcEUsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxjQUFnQixDQUFDLEVBQ3pFaUUsRUFBZ0JGLEdBQVVDLEVBQzFCM0UsRUFBVyxJQUFLQSxLQUFhNEUsR0FDN0JsRSxhQUFhbUUsUUFBUSxXQUFZckUsS0FBS3NFLFVBQVU5RSxJQUVsRCIsImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSBcIi4vaGVscGVycy5taW4uanNcIjtcclxuaW1wb3J0IHsgdXBkYXRlRWxlbWVudCB9IGZyb20gXCIuL3VwZGF0ZVN0YXRlRnVuY3Rpb25zLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVMb2dpblBhZ2UsIHNob3dMb2FkZXIsIGhpZGVMb2FkZXIgfSBmcm9tIFwiLi9jb21wb25lbnRzLm1pbi5qc1wiO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG5cdGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJvb3RcIik7XHJcblx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcblx0bGV0IGxhbmd1YWdlID0gaGFuZGxlVXNlckxhbmd1YWdlKCk7XHJcblx0Y29uc3QgbGFuZ05hbWVzID0geyBwbDogXCJQb2xza2lcIiwgZW46IFwiRW5nbGlzaFwiIH07XHJcblx0bGV0IHVzZXJEYXRhID0ge307XHJcblx0d2luZG93LnRyYW5zbGF0aW9ucyA9IHt9O1xyXG5cdGNvbnN0IGxhbmdDb2RlcyA9IE9iamVjdC5rZXlzKGxhbmdOYW1lcyk7XHJcblx0bGV0IGxhbmdBbW91bnQgPSBsYW5nQ29kZXMubGVuZ3RoO1xyXG5cclxuXHRmdW5jdGlvbiBoYW5kbGVVc2VyTGFuZ3VhZ2UoKSB7XHJcblx0XHRsZXQgdXNlckxhbmcgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZTtcclxuXHJcblx0XHRpZiAoIXVzZXJMYW5nIHx8IHVzZXJMYW5nICE9PSBcInBsXCIgfHwgdXNlckxhbmcgIT09IFwiZW5cIikgcmV0dXJuIFwicGxcIjtcclxuXHJcblx0XHR1c2VyTGFuZyA9IHVzZXJMYW5nLnNsaWNlKDAsIDIpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0cmV0dXJuIHVzZXJMYW5nO1xyXG5cdH1cclxuXHRjb25zdCBnZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlID0gKCkgPT4ge1xyXG5cdFx0Y29uc3QgcHJlZmVycmVkTGFuZyA9IEpTT04ucGFyc2UoXHJcblx0XHRcdGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckRhdGFcIilcclxuXHRcdCk/LnByZWZlcnJlZExhbmd1YWdlO1xyXG5cclxuXHRcdGlmIChwcmVmZXJyZWRMYW5nKSBsYW5ndWFnZSA9IHByZWZlcnJlZExhbmc7XHJcblx0fTtcclxuXHRnZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlKCk7XHJcblxyXG5cdGNvbnN0IGxvYWRGaXJzdFRyYW5zbGF0aW9ucyA9IGFzeW5jICgpID0+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnRhaW5lci5hcHBlbmQoc2hvd0xvYWRlcigpKTtcclxuXHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC4vc3JjL2pzb24vJHtsYW5ndWFnZX0uanNvbmApO1xyXG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cdFx0XHR0cmFuc2xhdGlvbnMgPSBkYXRhO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGluaXRpYWwgdHJhbnNsYXRpb24gZmlsZVwiKTtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdGhpZGVMb2FkZXIoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBUFBFTkQgU0VDVElPTlxyXG5cdFx0Y29udGFpbmVyLnByZXBlbmQoY3JlYXRlTG9naW5IZWFkZXIoKSk7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKGNyZWF0ZUxvZ2luUGFnZSh0cmFuc2xhdGlvbnMpKTtcclxuXHR9O1xyXG5cclxuXHRsb2FkRmlyc3RUcmFuc2xhdGlvbnMoKTtcclxuXHRjb25zdCBsb2FkVHJhbnNsYXRpb25zID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgLi9zcmMvanNvbi8ke2xhbmd1YWdlfS5qc29uYCk7XHJcblxyXG5cdFx0XHRpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoXCJOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2tcIik7XHJcblxyXG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cdFx0XHR0cmFuc2xhdGlvbnMgPSBkYXRhO1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0cmFuc2xhdGlvbnMpO1xyXG5cdFx0XHQvLyBVUERBVEUgRUxFTUVOVFNcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcclxuXHRcdFx0XHRcImxvZ2luLWhlYWRlcl9fbG9nb1wiLFxyXG5cdFx0XHRcdFwiYXJpYVwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5sb2dvTGlua1xyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibG9naW4taGVhZGVyX19sb2dvLWltZ1wiLFxyXG5cdFx0XHRcdFwiYWx0XCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLmhlYWRlci5hbHQubG9nb1xyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibG9naW4taGVhZGVyX19sYW5nLXNlbGVjdFwiLFxyXG5cdFx0XHRcdFwiYXJpYVwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5jaGFuZ2VMYW5ndWFnZUJ1dHRvblxyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fdGl0bGVcIiwgXCJ0ZXh0XCIsIHRyYW5zbGF0aW9ucy5tYWluLnRleHQudGl0bGUpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fc3VidGl0bGVcIiwgXCJ0ZXh0XCIsIHRyYW5zbGF0aW9ucy5tYWluLnRleHQuc3VidGl0bGUpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fdGV4dFwiLCBcInRleHRcIiwgdHJhbnNsYXRpb25zLm1haW4udGV4dC5kZXNjcmlwdGlvbik7XHJcblx0XHRcdHVwZGF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJtYWluX19mb3JtLWlucHV0LS11c2VybmFtZVwiLFxyXG5cdFx0XHRcdFwicGxhY2Vob2xkZXJcIixcclxuXHRcdFx0XHR0cmFuc2xhdGlvbnMubWFpbi5wbGFjZWhvbGRlci51c2VybmFtZVxyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibWFpbl9fZm9ybS1pbnB1dC0tcGFzc3dvcmRcIixcclxuXHRcdFx0XHRcInBsYWNlaG9sZGVyXCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLm1haW4ucGxhY2Vob2xkZXIucGFzc3dvcmRcclxuXHRcdFx0KTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcIm1haW5fX2Zvcm0tYnV0dG9uXCIsIFwidGV4dFwiLCB0cmFuc2xhdGlvbnMubWFpbi50ZXh0LmJ1dHRvbik7XHJcblx0XHRcdHVwZGF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJtYWluX19mb3JtLWVycm9yLXR4dFwiLFxyXG5cdFx0XHRcdFwidGV4dFwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5tYWluLnRleHQuZXJyb3JSZXF1aXJlZFxyXG5cdFx0XHQpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHRyYW5zbGF0aW9uIGZpbGVcIik7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgY3JlYXRlTG9naW5IZWFkZXIgPSAoKSA9PiB7XHJcblx0XHQvLyBsb2dvXHJcblx0XHRjb25zdCBoZWFkZXIgPSBjcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIsIFtcImhlYWRlclwiXSk7XHJcblx0XHRjb25zdCBsb2dvID0gY3JlYXRlRWxlbWVudChcImFcIiwgW1wiaGVhZGVyX19sb2dvXCIsIFwibG9naW4taGVhZGVyX19sb2dvXCJdLCB7XHJcblx0XHRcdGhyZWY6IFwiL1wiLFxyXG5cdFx0XHRcImFyaWEtbGFiZWxcIjogYCR7dHJhbnNsYXRpb25zLmhlYWRlci5hcmlhLmxvZ29MaW5rfWAsXHJcblx0XHR9KTtcclxuXHRcdGNvbnN0IGxvZ29JbWcgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XHRcImltZ1wiLFxyXG5cdFx0XHRbXCJoZWFkZXJfX2xvZ28taW1nXCIsIFwibG9naW4taGVhZGVyX19sb2dvLWltZ1wiXSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHNyYzogXCIuL3NyYy9pY29ucy9sb2dvLnN2Z1wiLFxyXG5cdFx0XHRcdGFsdDogYCR7dHJhbnNsYXRpb25zLmhlYWRlci5hbHQubG9nb31gLFxyXG5cdFx0XHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0XHRjb25zdCBsb2dvVGV4dCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcclxuXHRcdFx0XCJoZWFkZXJfX2xvZ28tdGV4dFwiLFxyXG5cdFx0XHRcImxvZ2luLWhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XHRdKTtcclxuXHRcdGxvZ29UZXh0LnRleHRDb250ZW50ID0gXCJTdHJlYW1cIjtcclxuXHRcdGxvZ28uYXBwZW5kKGxvZ29JbWcsIGxvZ29UZXh0KTtcclxuXHRcdGhlYWRlci5hcHBlbmQobG9nbyk7XHJcblx0XHQvLyBlbmQgb2YgbG9nb1xyXG5cclxuXHRcdC8vIGxhbmd1YWdlIHNlbGVjdG9yXHJcblx0XHRjb25zdCBsYW5nU2VsZWN0ID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctc2VsZWN0XCJdLCB7XHJcblx0XHRcdFwiYXJpYS1sYWJlbFwiOiBgJHt0cmFuc2xhdGlvbnMuaGVhZGVyLmFyaWEuY2hhbmdlTGFuZ3VhZ2VCdXR0b259YCxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgbGFuZ1BsYXRmb3JtTGFuZyA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcclxuXHRcdFx0XCJsb2dpbi1oZWFkZXJfX2xhbmctcGxhdGZvcm0tbGFuZ1wiLFxyXG5cdFx0XSk7XHJcblx0XHRjb25zdCBsYW5nQXJyb3cgPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1hcnJvd1wiXSwge1xyXG5cdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvY2hldnJvbi1kb3duLnN2Z1wiLFxyXG5cdFx0XHRhbHQ6IFwiXCIsXHJcblx0XHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdFx0fSk7XHJcblx0XHRjb25zdCBsYW5nTGlzdCA9IGNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctbGlzdFwiXSk7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsYW5nQW1vdW50OyBpKyspIHtcclxuXHRcdFx0Y29uc3QgbGFuZ0Nob2ljZSA9IGNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctY2hvaWNlXCJdKTtcclxuXHRcdFx0Y29uc3QgZGF0YSA9IE9iamVjdC5rZXlzKGxhbmdOYW1lcylbaV07XHJcblx0XHRcdGNvbnN0IHRleHQgPSBPYmplY3QudmFsdWVzKGxhbmdOYW1lcylbaV07XHJcblxyXG5cdFx0XHRsYW5nQ2hvaWNlLmRhdGFzZXQubGFuZyA9IGRhdGE7XHJcblx0XHRcdGxhbmdDaG9pY2UudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0XHRsYW5nQ2hvaWNlLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gaSAqIDEwMCArIFwibXNcIjtcclxuXHRcdFx0bGFuZ0xpc3QuYXBwZW5kKGxhbmdDaG9pY2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxhbmdQbGF0Zm9ybUxhbmcudGV4dENvbnRlbnQgPSBsYW5nTmFtZXNbbGFuZ3VhZ2VdO1xyXG5cclxuXHRcdGxhbmdTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRcdGhhbmRsZUxhbmdTZWxlY3QuY2FsbChsYW5nU2VsZWN0LCBlLCBsYW5nUGxhdGZvcm1MYW5nKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGxhbmdTZWxlY3QuYXBwZW5kKGxhbmdQbGF0Zm9ybUxhbmcsIGxhbmdBcnJvdywgbGFuZ0xpc3QpO1xyXG5cdFx0aGVhZGVyLmFwcGVuZChsYW5nU2VsZWN0KTtcclxuXHJcblx0XHRyZXR1cm4gaGVhZGVyO1xyXG5cdFx0Ly8gZW5kIG9mIGxhbmd1YWdlIHNlbGVjdG9yXHJcblx0fTtcclxuXHRmdW5jdGlvbiBoYW5kbGVMYW5nU2VsZWN0KGUsIGxhbmdUZXh0KSB7XHJcblx0XHRjb25zdCBzZWxlY3RCdG4gPSB0aGlzO1xyXG5cdFx0c2VsZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcblx0XHRpZiAoZS50YXJnZXQubWF0Y2hlcyhcIi5sb2dpbi1oZWFkZXJfX2xhbmctY2hvaWNlXCIpKSB7XHJcblx0XHRcdGNvbnN0IHNlbGVjdGVkTGFuZyA9IGUudGFyZ2V0LmRhdGFzZXQubGFuZztcclxuXHRcdFx0bGFuZ1RleHQudGV4dENvbnRlbnQgPSBsYW5nTmFtZXNbc2VsZWN0ZWRMYW5nXTtcclxuXHRcdFx0bGFuZ3VhZ2UgPSBzZWxlY3RlZExhbmc7XHJcblxyXG5cdFx0XHRsb2FkVHJhbnNsYXRpb25zKGxhbmd1YWdlKTtcclxuXHRcdFx0c2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZShcInByZWZlcnJlZExhbmd1YWdlXCIsIGxhbmd1YWdlKTtcclxuXHRcdH1cclxuXHR9XHJcblx0Y29uc3Qgc2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZSA9IChvcHRpb24sIHZhbHVlKSA9PiB7XHJcblx0XHRjb25zdCBjdXJyZW50VXNlckRhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckRhdGFcIikpIHx8IHt9O1xyXG5cdFx0Y3VycmVudFVzZXJEYXRhW29wdGlvbl0gPSB2YWx1ZTtcclxuXHRcdHVzZXJEYXRhID0geyAuLi51c2VyRGF0YSwgLi4uY3VycmVudFVzZXJEYXRhIH07XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJEYXRhXCIsIEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSk7XHJcblx0fTtcclxufSk7XHJcbiJdfQ==
