import{createElement}from"./helpers.min.js";import{updateElement}from"./updateStateFunctions.min.js";import{createLoginPage,showBigLoader,hideBigLoader}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){document.querySelector(".root");const e=document.querySelector(".container");let t=function(){let e=navigator.language||navigator.userLanguage;return e&&"pl"===e&&"en"===e?(e=e.slice(0,2).toLowerCase(),e):"pl"}();const a={pl:"Polski",en:"English"};let n={};window.translations={};let o=Object.keys(a).length;(()=>{const e=JSON.parse(localStorage.getItem("userData"))?.preferredLanguage;e&&(t=e)})();(async()=>{try{e.append(showBigLoader());const a=await fetch(`./src/json/${t}.json`),n=await a.json();translations=n}catch{console.error("Error loading initial translation file")}finally{hideBigLoader()}e.prepend(r()),e.append(createLoginPage(translations))})();const r=()=>{const e=createElement("header",["header"]),n=createElement("a",["header__logo","login-header__logo"],{href:"/","aria-label":`${translations.header.aria.logoLink}`}),r=createElement("img",["header__logo-img","login-header__logo-img"],{src:"./src/icons/logo.svg",alt:`${translations.header.alt.logo}`,width:"24",height:"24"}),i=createElement("span",["header__logo-text","login-header__logo-text"]);i.textContent="Stream",n.append(r,i),e.append(n);const s=createElement("button",["login-header__lang-select"],{"aria-label":`${translations.header.aria.changeLanguageButton}`}),g=createElement("span",["login-header__lang-platform-lang"]),c=createElement("img",["login-header__lang-arrow"],{src:"./src/icons/chevron-down.svg",alt:"",width:"24",height:"24"}),d=createElement("ul",["login-header__lang-list"]);for(let e=0;e<o;e++){const t=createElement("li",["login-header__lang-choice"]),n=Object.keys(a)[e],o=Object.values(a)[e];t.dataset.lang=n,t.textContent=o,t.style.animationDelay=100*e+"ms",d.append(t)}return g.textContent=a[t],s.addEventListener("click",e=>{l.call(s,e,g)}),s.append(g,c,d),e.append(s),e};function l(e,n){if(this.classList.toggle("active"),e.target.matches(".login-header__lang-choice")){const o=e.target.dataset.lang;n.textContent=a[o],t=o,(async()=>{try{const e=await fetch(`./src/json/${t}.json`);if(!e.ok)throw new Error("Network response was not ok");const a=await e.json();translations=a,console.log(translations),updateElement("login-header__logo","aria",translations.header.aria.logoLink),updateElement("login-header__logo-img","alt",translations.header.alt.logo),updateElement("login-header__lang-select","aria",translations.header.aria.changeLanguageButton),updateElement("main__title","text",translations.main.text.title),updateElement("main__subtitle","text",translations.main.text.subtitle),updateElement("main__text","text",translations.main.text.description),updateElement("main__form-input--username","placeholder",translations.main.placeholder.username),updateElement("main__form-input--password","placeholder",translations.main.placeholder.password),updateElement("main__form-button-text","text",translations.main.text.button),updateElement("main__form-error-txt","text",translations.main.text.errorRequired)}catch{console.error("Error loading translation file")}})(),i("preferredLanguage",t)}}const i=(e,t)=>{const a=JSON.parse(localStorage.getItem("userData"))||{};a[e]=t,n={...n,...a},localStorage.setItem("userData",JSON.stringify(n))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsIm5hbWVzIjpbImNyZWF0ZUVsZW1lbnQiLCJ1cGRhdGVFbGVtZW50IiwiY3JlYXRlTG9naW5QYWdlIiwic2hvd0JpZ0xvYWRlciIsImhpZGVCaWdMb2FkZXIiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyIiwibGFuZ3VhZ2UiLCJ1c2VyTGFuZyIsIm5hdmlnYXRvciIsInVzZXJMYW5ndWFnZSIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJoYW5kbGVVc2VyTGFuZ3VhZ2UiLCJsYW5nTmFtZXMiLCJwbCIsImVuIiwidXNlckRhdGEiLCJ3aW5kb3ciLCJ0cmFuc2xhdGlvbnMiLCJsYW5nQW1vdW50IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInByZWZlcnJlZExhbmciLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJnZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlIiwiYXN5bmMiLCJhcHBlbmQiLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJjb25zb2xlIiwiZXJyb3IiLCJwcmVwZW5kIiwiY3JlYXRlTG9naW5IZWFkZXIiLCJsb2FkRmlyc3RUcmFuc2xhdGlvbnMiLCJoZWFkZXIiLCJsb2dvIiwiaHJlZiIsImFyaWEiLCJsb2dvTGluayIsImxvZ29JbWciLCJzcmMiLCJhbHQiLCJ3aWR0aCIsImhlaWdodCIsImxvZ29UZXh0IiwidGV4dENvbnRlbnQiLCJsYW5nU2VsZWN0IiwiY2hhbmdlTGFuZ3VhZ2VCdXR0b24iLCJsYW5nUGxhdGZvcm1MYW5nIiwibGFuZ0Fycm93IiwibGFuZ0xpc3QiLCJpIiwibGFuZ0Nob2ljZSIsInRleHQiLCJ2YWx1ZXMiLCJkYXRhc2V0IiwibGFuZyIsInN0eWxlIiwiYW5pbWF0aW9uRGVsYXkiLCJlIiwiaGFuZGxlTGFuZ1NlbGVjdCIsImNhbGwiLCJsYW5nVGV4dCIsInRoaXMiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwic2VsZWN0ZWRMYW5nIiwib2siLCJFcnJvciIsImxvZyIsIm1haW4iLCJ0aXRsZSIsInN1YnRpdGxlIiwiZGVzY3JpcHRpb24iLCJwbGFjZWhvbGRlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJidXR0b24iLCJlcnJvclJlcXVpcmVkIiwibG9hZFRyYW5zbGF0aW9ucyIsInNldFVzZXJMYW5ndWFnZVByZWZlcmVuY2UiLCJvcHRpb24iLCJ2YWx1ZSIsImN1cnJlbnRVc2VyRGF0YSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiXSwic291cmNlcyI6WyJzY3JpcHQuanMiXSwibWFwcGluZ3MiOiJPQUFTQSxrQkFBcUIsMEJBQ3JCQyxrQkFBcUIsdUNBRTdCQyxnQkFDQUMsY0FDQUMsa0JBQ00sc0JBRVBDLFNBQVNDLGlCQUFpQixtQkFBb0IsV0FDaENELFNBQVNFLGNBQWMsU0FBcEMsTUFFTUMsRUFBWUgsU0FBU0UsY0FBYyxjQUV6QyxJQUFJRSxFQVlKLFdBQ0MsSUFBSUMsRUFBV0MsVUFBVUYsVUFBWUUsVUFBVUMsYUFFL0MsT0FBS0YsR0FBeUIsT0FBYkEsR0FBa0MsT0FBYkEsR0FFdENBLEVBQVdBLEVBQVNHLE1BQU0sRUFBRyxHQUFHQyxjQUV6QkosR0FKeUQsSUFLakUsQ0FwQmVLLEdBRWYsTUFBTUMsRUFBWSxDQUFFQyxHQUFJLFNBQVVDLEdBQUksV0FFdEMsSUFBSUMsRUFBVyxDQUFDLEVBRWhCQyxPQUFPQyxhQUFlLENBQUMsRUFJdkIsSUFBSUMsRUFGY0MsT0FBT0MsS0FBS1IsR0FFSFMsT0FXTyxNQUNqQyxNQUFNQyxFQUFnQkMsS0FBS0MsTUFDMUJDLGFBQWFDLFFBQVEsY0FDbkJDLGtCQUVDTCxJQUFlakIsRUFBV2lCLElBRS9CTSxHQUU4QkMsV0FDN0IsSUFDQ3pCLEVBQVUwQixPQUFPL0IsaUJBRWpCLE1BQU1nQyxRQUFpQkMsTUFBTSxjQUFjM0IsVUFDckM0QixRQUFhRixFQUFTRyxPQUM1QmpCLGFBQWVn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T0FDQW9CLGFBQWE2RCxLQUFLbkIsS0FBSzBCLFFBRXhCeEYsY0FDQyx1QkFDQSxPQUNBb0IsYUFBYTZELEtBQUtuQixLQUFLMkIsY0FFekIsQ0FBRSxNQUNEbkQsUUFBUUMsTUFBTSxpQ0FDZixHQTJFQ21ELEdBQ0FDLEVBQTBCLG9CQUFxQm5GLEVBQ2hELENBQ0QsQ0FDQSxNQUFNbUYsRUFBNEIsQ0FBQ0MsRUFBUUMsS0FDMUMsTUFBTUMsRUFBa0JwRSxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGNBQWdCLENBQUMsRUFDekVpRSxFQUFnQkYsR0FBVUMsRUFDMUIzRSxFQUFXLElBQUtBLEtBQWE0RSxHQUM3QmxFLGFBQWFtRSxRQUFRLFdBQVlyRSxLQUFLc0UsVUFBVTlFLElBRWxEIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwiLi9oZWxwZXJzLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyB1cGRhdGVFbGVtZW50IH0gZnJvbSBcIi4vdXBkYXRlU3RhdGVGdW5jdGlvbnMubWluLmpzXCI7XHJcbmltcG9ydCB7XHJcblx0Y3JlYXRlTG9naW5QYWdlLFxyXG5cdHNob3dCaWdMb2FkZXIsXHJcblx0aGlkZUJpZ0xvYWRlcixcclxufSBmcm9tIFwiLi9jb21wb25lbnRzLm1pbi5qc1wiO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG5cdGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJvb3RcIik7XHJcblxyXG5cdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5cclxuXHRsZXQgbGFuZ3VhZ2UgPSBoYW5kbGVVc2VyTGFuZ3VhZ2UoKTtcclxuXHJcblx0Y29uc3QgbGFuZ05hbWVzID0geyBwbDogXCJQb2xza2lcIiwgZW46IFwiRW5nbGlzaFwiIH07XHJcblxyXG5cdGxldCB1c2VyRGF0YSA9IHt9O1xyXG5cclxuXHR3aW5kb3cudHJhbnNsYXRpb25zID0ge307XHJcblxyXG5cdGNvbnN0IGxhbmdDb2RlcyA9IE9iamVjdC5rZXlzKGxhbmdOYW1lcyk7XHJcblxyXG5cdGxldCBsYW5nQW1vdW50ID0gbGFuZ0NvZGVzLmxlbmd0aDtcclxuXHJcblx0ZnVuY3Rpb24gaGFuZGxlVXNlckxhbmd1YWdlKCkge1xyXG5cdFx0bGV0IHVzZXJMYW5nID0gbmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2U7XHJcblxyXG5cdFx0aWYgKCF1c2VyTGFuZyB8fCB1c2VyTGFuZyAhPT0gXCJwbFwiIHx8IHVzZXJMYW5nICE9PSBcImVuXCIpIHJldHVybiBcInBsXCI7XHJcblxyXG5cdFx0dXNlckxhbmcgPSB1c2VyTGFuZy5zbGljZSgwLCAyKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdHJldHVybiB1c2VyTGFuZztcclxuXHR9XHJcblx0Y29uc3QgZ2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZSA9ICgpID0+IHtcclxuXHRcdGNvbnN0IHByZWZlcnJlZExhbmcgPSBKU09OLnBhcnNlKFxyXG5cdFx0XHRsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJEYXRhXCIpXHJcblx0XHQpPy5wcmVmZXJyZWRMYW5ndWFnZTtcclxuXHJcblx0XHRpZiAocHJlZmVycmVkTGFuZykgbGFuZ3VhZ2UgPSBwcmVmZXJyZWRMYW5nO1xyXG5cdH07XHJcblx0Z2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZSgpO1xyXG5cclxuXHRjb25zdCBsb2FkRmlyc3RUcmFuc2xhdGlvbnMgPSBhc3luYyAoKSA9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb250YWluZXIuYXBwZW5kKHNob3dCaWdMb2FkZXIoKSk7XHJcblxyXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAuL3NyYy9qc29uLyR7bGFuZ3VhZ2V9Lmpzb25gKTtcclxuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHRcdFx0dHJhbnNsYXRpb25zID0gZGF0YTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBpbml0aWFsIHRyYW5zbGF0aW9uIGZpbGVcIik7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRoaWRlQmlnTG9hZGVyKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQVBQRU5EIFNFQ1RJT05cclxuXHRcdGNvbnRhaW5lci5wcmVwZW5kKGNyZWF0ZUxvZ2luSGVhZGVyKCkpO1xyXG5cdFx0Y29udGFpbmVyLmFwcGVuZChjcmVhdGVMb2dpblBhZ2UodHJhbnNsYXRpb25zKSk7XHJcblx0fTtcclxuXHJcblx0bG9hZEZpcnN0VHJhbnNsYXRpb25zKCk7XHJcblx0Y29uc3QgbG9hZFRyYW5zbGF0aW9ucyA9IGFzeW5jICgpID0+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC4vc3JjL2pzb24vJHtsYW5ndWFnZX0uanNvbmApO1xyXG5cclxuXHRcdFx0aWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKFwiTmV0d29yayByZXNwb25zZSB3YXMgbm90IG9rXCIpO1xyXG5cclxuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHRcdFx0dHJhbnNsYXRpb25zID0gZGF0YTtcclxuXHRcdFx0Y29uc29sZS5sb2codHJhbnNsYXRpb25zKTtcclxuXHRcdFx0Ly8gVVBEQVRFIEVMRU1FTlRTXHJcblx0XHRcdHVwZGF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJsb2dpbi1oZWFkZXJfX2xvZ29cIixcclxuXHRcdFx0XHRcImFyaWFcIixcclxuXHRcdFx0XHR0cmFuc2xhdGlvbnMuaGVhZGVyLmFyaWEubG9nb0xpbmtcclxuXHRcdFx0KTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcclxuXHRcdFx0XHRcImxvZ2luLWhlYWRlcl9fbG9nby1pbWdcIixcclxuXHRcdFx0XHRcImFsdFwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5oZWFkZXIuYWx0LmxvZ29cclxuXHRcdFx0KTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcclxuXHRcdFx0XHRcImxvZ2luLWhlYWRlcl9fbGFuZy1zZWxlY3RcIixcclxuXHRcdFx0XHRcImFyaWFcIixcclxuXHRcdFx0XHR0cmFuc2xhdGlvbnMuaGVhZGVyLmFyaWEuY2hhbmdlTGFuZ3VhZ2VCdXR0b25cclxuXHRcdFx0KTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcIm1haW5fX3RpdGxlXCIsIFwidGV4dFwiLCB0cmFuc2xhdGlvbnMubWFpbi50ZXh0LnRpdGxlKTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcIm1haW5fX3N1YnRpdGxlXCIsIFwidGV4dFwiLCB0cmFuc2xhdGlvbnMubWFpbi50ZXh0LnN1YnRpdGxlKTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcIm1haW5fX3RleHRcIiwgXCJ0ZXh0XCIsIHRyYW5zbGF0aW9ucy5tYWluLnRleHQuZGVzY3JpcHRpb24pO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibWFpbl9fZm9ybS1pbnB1dC0tdXNlcm5hbWVcIixcclxuXHRcdFx0XHRcInBsYWNlaG9sZGVyXCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLm1haW4ucGxhY2Vob2xkZXIudXNlcm5hbWVcclxuXHRcdFx0KTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcclxuXHRcdFx0XHRcIm1haW5fX2Zvcm0taW5wdXQtLXBhc3N3b3JkXCIsXHJcblx0XHRcdFx0XCJwbGFjZWhvbGRlclwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5tYWluLnBsYWNlaG9sZGVyLnBhc3N3b3JkXHJcblx0XHRcdCk7XHJcblx0XHRcdHVwZGF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJtYWluX19mb3JtLWJ1dHRvbi10ZXh0XCIsXHJcblx0XHRcdFx0XCJ0ZXh0XCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLm1haW4udGV4dC5idXR0b25cclxuXHRcdFx0KTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcclxuXHRcdFx0XHRcIm1haW5fX2Zvcm0tZXJyb3ItdHh0XCIsXHJcblx0XHRcdFx0XCJ0ZXh0XCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLm1haW4udGV4dC5lcnJvclJlcXVpcmVkXHJcblx0XHRcdCk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgdHJhbnNsYXRpb24gZmlsZVwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjb25zdCBjcmVhdGVMb2dpbkhlYWRlciA9ICgpID0+IHtcclxuXHRcdC8vIGxvZ29cclxuXHRcdGNvbnN0IGhlYWRlciA9IGNyZWF0ZUVsZW1lbnQoXCJoZWFkZXJcIiwgW1wiaGVhZGVyXCJdKTtcclxuXHRcdGNvbnN0IGxvZ28gPSBjcmVhdGVFbGVtZW50KFwiYVwiLCBbXCJoZWFkZXJfX2xvZ29cIiwgXCJsb2dpbi1oZWFkZXJfX2xvZ29cIl0sIHtcclxuXHRcdFx0aHJlZjogXCIvXCIsXHJcblx0XHRcdFwiYXJpYS1sYWJlbFwiOiBgJHt0cmFuc2xhdGlvbnMuaGVhZGVyLmFyaWEubG9nb0xpbmt9YCxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgbG9nb0ltZyA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcdFwiaW1nXCIsXHJcblx0XHRcdFtcImhlYWRlcl9fbG9nby1pbWdcIiwgXCJsb2dpbi1oZWFkZXJfX2xvZ28taW1nXCJdLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c3JjOiBcIi4vc3JjL2ljb25zL2xvZ28uc3ZnXCIsXHJcblx0XHRcdFx0YWx0OiBgJHt0cmFuc2xhdGlvbnMuaGVhZGVyLmFsdC5sb2dvfWAsXHJcblx0XHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IGxvZ29UZXh0ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XHRcImhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XHRcdFwibG9naW4taGVhZGVyX19sb2dvLXRleHRcIixcclxuXHRcdF0pO1xyXG5cdFx0bG9nb1RleHQudGV4dENvbnRlbnQgPSBcIlN0cmVhbVwiO1xyXG5cdFx0bG9nby5hcHBlbmQobG9nb0ltZywgbG9nb1RleHQpO1xyXG5cdFx0aGVhZGVyLmFwcGVuZChsb2dvKTtcclxuXHRcdC8vIGVuZCBvZiBsb2dvXHJcblxyXG5cdFx0Ly8gbGFuZ3VhZ2Ugc2VsZWN0b3JcclxuXHRcdGNvbnN0IGxhbmdTZWxlY3QgPSBjcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1zZWxlY3RcIl0sIHtcclxuXHRcdFx0XCJhcmlhLWxhYmVsXCI6IGAke3RyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5jaGFuZ2VMYW5ndWFnZUJ1dHRvbn1gLFxyXG5cdFx0fSk7XHJcblx0XHRjb25zdCBsYW5nUGxhdGZvcm1MYW5nID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XHRcImxvZ2luLWhlYWRlcl9fbGFuZy1wbGF0Zm9ybS1sYW5nXCIsXHJcblx0XHRdKTtcclxuXHRcdGNvbnN0IGxhbmdBcnJvdyA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wibG9naW4taGVhZGVyX19sYW5nLWFycm93XCJdLCB7XHJcblx0XHRcdHNyYzogXCIuL3NyYy9pY29ucy9jaGV2cm9uLWRvd24uc3ZnXCIsXHJcblx0XHRcdGFsdDogXCJcIixcclxuXHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHR9KTtcclxuXHRcdGNvbnN0IGxhbmdMaXN0ID0gY3JlYXRlRWxlbWVudChcInVsXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1saXN0XCJdKTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxhbmdBbW91bnQ7IGkrKykge1xyXG5cdFx0XHRjb25zdCBsYW5nQ2hvaWNlID0gY3JlYXRlRWxlbWVudChcImxpXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1jaG9pY2VcIl0pO1xyXG5cdFx0XHRjb25zdCBkYXRhID0gT2JqZWN0LmtleXMobGFuZ05hbWVzKVtpXTtcclxuXHRcdFx0Y29uc3QgdGV4dCA9IE9iamVjdC52YWx1ZXMobGFuZ05hbWVzKVtpXTtcclxuXHJcblx0XHRcdGxhbmdDaG9pY2UuZGF0YXNldC5sYW5nID0gZGF0YTtcclxuXHRcdFx0bGFuZ0Nob2ljZS50ZXh0Q29udGVudCA9IHRleHQ7XHJcblx0XHRcdGxhbmdDaG9pY2Uuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBpICogMTAwICsgXCJtc1wiO1xyXG5cdFx0XHRsYW5nTGlzdC5hcHBlbmQobGFuZ0Nob2ljZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGFuZ1BsYXRmb3JtTGFuZy50ZXh0Q29udGVudCA9IGxhbmdOYW1lc1tsYW5ndWFnZV07XHJcblxyXG5cdFx0bGFuZ1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdFx0aGFuZGxlTGFuZ1NlbGVjdC5jYWxsKGxhbmdTZWxlY3QsIGUsIGxhbmdQbGF0Zm9ybUxhbmcpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bGFuZ1NlbGVjdC5hcHBlbmQobGFuZ1BsYXRmb3JtTGFuZywgbGFuZ0Fycm93LCBsYW5nTGlzdCk7XHJcblx0XHRoZWFkZXIuYXBwZW5kKGxhbmdTZWxlY3QpO1xyXG5cclxuXHRcdHJldHVybiBoZWFkZXI7XHJcblx0XHQvLyBlbmQgb2YgbGFuZ3VhZ2Ugc2VsZWN0b3JcclxuXHR9O1xyXG5cdGZ1bmN0aW9uIGhhbmRsZUxhbmdTZWxlY3QoZSwgbGFuZ1RleHQpIHtcclxuXHRcdGNvbnN0IHNlbGVjdEJ0biA9IHRoaXM7XHJcblx0XHRzZWxlY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuXHRcdGlmIChlLnRhcmdldC5tYXRjaGVzKFwiLmxvZ2luLWhlYWRlcl9fbGFuZy1jaG9pY2VcIikpIHtcclxuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRMYW5nID0gZS50YXJnZXQuZGF0YXNldC5sYW5nO1xyXG5cdFx0XHRsYW5nVGV4dC50ZXh0Q29udGVudCA9IGxhbmdOYW1lc1tzZWxlY3RlZExhbmddO1xyXG5cdFx0XHRsYW5ndWFnZSA9IHNlbGVjdGVkTGFuZztcclxuXHJcblx0XHRcdGxvYWRUcmFuc2xhdGlvbnMobGFuZ3VhZ2UpO1xyXG5cdFx0XHRzZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlKFwicHJlZmVycmVkTGFuZ3VhZ2VcIiwgbGFuZ3VhZ2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRjb25zdCBzZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlID0gKG9wdGlvbiwgdmFsdWUpID0+IHtcclxuXHRcdGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyRGF0YVwiKSkgfHwge307XHJcblx0XHRjdXJyZW50VXNlckRhdGFbb3B0aW9uXSA9IHZhbHVlO1xyXG5cdFx0dXNlckRhdGEgPSB7IC4uLnVzZXJEYXRhLCAuLi5jdXJyZW50VXNlckRhdGEgfTtcclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlckRhdGFcIiwgSlNPTi5zdHJpbmdpZnkodXNlckRhdGEpKTtcclxuXHR9O1xyXG59KTtcclxuIl19
