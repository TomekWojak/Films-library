import{createElement}from"./helpers.min.js";import{updateElement}from"./updateStateFunctions.min.js";import{createLoginPage,showLoader,hideLoader}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){document.querySelector(".root");const e=document.querySelector(".container");let t=function(){let e=navigator.language||navigator.userLanguage;return e&&"pl"===e&&"en"===e?(e=e.slice(0,2).toLowerCase(),e):"pl"}();const a={pl:"Polski",en:"English"};let n={},o={};let r=Object.keys(a).length;(()=>{const e=JSON.parse(localStorage.getItem("userData"))?.preferredLanguage;e&&(t=e)})();(async()=>{try{e.append(showLoader());const a=await fetch(`./src/json/${t}.json`),n=await a.json();o=n}catch{console.error("Error loading initial translation file")}finally{hideLoader()}console.log(o),e.prepend(i()),e.append(createLoginPage(o))})();const l=async()=>{try{const e=await fetch(`./src/json/${t}.json`);if(!e.ok)throw new Error("Network response was not ok");const a=await e.json();o=a,updateElement("login-header__logo","aria",o.header.aria.logoLink),updateElement("login-header__logo-img","alt",o.header.alt.logo),updateElement("login-header__lang-select","aria",o.header.aria.changeLanguageButton),updateElement("main__title","text",o.main.text.title),updateElement("main__subtitle","text",o.main.text.subtitle),updateElement("main__text","text",o.main.text.description),updateElement("main__form-input--username","placeholder",o.main.placeholder.username),updateElement("main__form-input--password","placeholder",o.main.placeholder.password),updateElement("main__form-button","text",o.main.text.button)}catch{console.error("Error loading translation file")}};l();const i=()=>{const e=createElement("header",["header"]),n=createElement("a",["header__logo","login-header__logo"],{href:"/","aria-label":`${o.header.aria.logoLink}`}),l=createElement("img",["header__logo-img","login-header__logo-img"],{src:"./src/icons/logo.svg",alt:`${o.header.alt.logo}`,width:"24",height:"24"}),i=createElement("span",["header__logo-text","login-header__logo-text"]);i.textContent="Stream",n.append(l,i),e.append(n);const c=createElement("button",["login-header__lang-select"],{"aria-label":`${o.header.aria.changeLanguageButton}`}),g=createElement("span",["login-header__lang-platform-lang"]),d=createElement("img",["login-header__lang-arrow"],{src:"./src/icons/chevron-down.svg",alt:"",width:"24",height:"24"}),m=createElement("ul",["login-header__lang-list"]);for(let e=0;e<r;e++){const t=createElement("li",["login-header__lang-choice"]),n=Object.keys(a)[e],o=Object.values(a)[e];t.dataset.lang=n,t.textContent=o,t.style.animationDelay=100*e+"ms",m.append(t)}return g.textContent=a[t],c.addEventListener("click",e=>{s.call(c,e,g)}),c.append(g,d,m),e.append(c),e};function s(e,n){if(this.classList.toggle("active"),e.target.matches(".login-header__lang-choice")){const o=e.target.dataset.lang;n.textContent=a[o],t=o,c("preferredLanguage",t),l()}}const c=(e,t)=>{const a=JSON.parse(localStorage.getItem("userData"))||{};a[e]=t,n={...n,...a},localStorage.setItem("userData",JSON.stringify(n))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsIm5hbWVzIjpbImNyZWF0ZUVsZW1lbnQiLCJ1cGRhdGVFbGVtZW50IiwiY3JlYXRlTG9naW5QYWdlIiwic2hvd0xvYWRlciIsImhpZGVMb2FkZXIiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyIiwibGFuZ3VhZ2UiLCJ1c2VyTGFuZyIsIm5hdmlnYXRvciIsInVzZXJMYW5ndWFnZSIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJoYW5kbGVVc2VyTGFuZ3VhZ2UiLCJsYW5nTmFtZXMiLCJwbCIsImVuIiwidXNlckRhdGEiLCJ0cmFuc2xhdGlvbnMiLCJsYW5nQW1vdW50IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInByZWZlcnJlZExhbmciLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJnZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlIiwiYXN5bmMiLCJhcHBlbmQiLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJwcmVwZW5kIiwiY3JlYXRlTG9naW5IZWFkZXIiLCJsb2FkRmlyc3RUcmFuc2xhdGlvbnMiLCJsb2FkVHJhbnNsYXRpb25zIiwib2siLCJFcnJvciIsImhlYWRlciIsImFyaWEiLCJsb2dvTGluayIsImFsdCIsImxvZ28iLCJjaGFuZ2VMYW5ndWFnZUJ1dHRvbiIsIm1haW4iLCJ0ZXh0IiwidGl0bGUiLCJzdWJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGxhY2Vob2xkZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiYnV0dG9uIiwiaHJlZiIsImxvZ29JbWciLCJzcmMiLCJ3aWR0aCIsImhlaWdodCIsImxvZ29UZXh0IiwidGV4dENvbnRlbnQiLCJsYW5nU2VsZWN0IiwibGFuZ1BsYXRmb3JtTGFuZyIsImxhbmdBcnJvdyIsImxhbmdMaXN0IiwiaSIsImxhbmdDaG9pY2UiLCJ2YWx1ZXMiLCJkYXRhc2V0IiwibGFuZyIsInN0eWxlIiwiYW5pbWF0aW9uRGVsYXkiLCJlIiwiaGFuZGxlTGFuZ1NlbGVjdCIsImNhbGwiLCJsYW5nVGV4dCIsInRoaXMiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwic2VsZWN0ZWRMYW5nIiwic2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZSIsIm9wdGlvbiIsInZhbHVlIiwiY3VycmVudFVzZXJEYXRhIiwic2V0SXRlbSIsInN0cmluZ2lmeSJdLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJtYXBwaW5ncyI6Ik9BQVNBLGtCQUFxQiwwQkFDckJDLGtCQUFxQix1Q0FDckJDLGdCQUFpQkMsV0FBWUMsZUFBa0Isc0JBRXhEQyxTQUFTQyxpQkFBaUIsbUJBQW9CLFdBQ2hDRCxTQUFTRSxjQUFjLFNBQXBDLE1BQ01DLEVBQVlILFNBQVNFLGNBQWMsY0FDekMsSUFBSUUsRUFPSixXQUNDLElBQUlDLEVBQVdDLFVBQVVGLFVBQVlFLFVBQVVDLGFBRS9DLE9BQUtGLEdBQXlCLE9BQWJBLEdBQWtDLE9BQWJBLEdBRXRDQSxFQUFXQSxFQUFTRyxNQUFNLEVBQUcsR0FBR0MsY0FFekJKLEdBSnlELElBS2pFLENBZmVLLEdBQ2YsTUFBTUMsRUFBWSxDQUFFQyxHQUFJLFNBQVVDLEdBQUksV0FDdEMsSUFBSUMsRUFBVyxDQUFDLEVBQ1pDLEVBQWUsQ0FBQyxFQUVwQixJQUFJQyxFQURjQyxPQUFPQyxLQUFLUCxHQUNIUSxPQVdPLE1BQ2pDLE1BQU1DLEVBQWdCQyxLQUFLQyxNQUMxQkMsYUFBYUMsUUFBUSxjQUNuQkMsa0JBRUNMLElBQWVoQixFQUFXZ0IsSUFFL0JNLEdBRThCQyxXQUM3QixJQUNDeEIsRUFBVXlCLE9BQU85QixjQUVqQixNQUFNK0IsUUFBaUJDLE1BQU0sY0FBYzFCLFVBQ3JDMkIsUUFBYUYsRUFBU0csT0FDNUJqQixFQUFlZ0IsQ0FDaEIsQ0FBRSxNQUNERSxRQUFRQyxNQUFNLHlDQUNmLENBQUUsUUFDRG5DLFlBQ0QsQ0FHQWtDLFFBQVFFLElBQUlwQixHQUNaWixFQUFVaUMsUUFBUUMsS0FDbEJsQyxFQUFVeUIsT0FBTy9CLGdCQUFnQmtCLEtBRWxDdUIsR0FDQSxNQUFNQyxFQUFtQlosVUFDeEIsSUFDQyxNQUFNRSxRQUFpQkMsTUFBTSxjQUFjMUIsVUFFM0MsSUFBS3lCLEVBQVNXLEdBQUksTUFBTSxJQUFJQyxNQUFNLCtCQUVsQyxNQUFNVixRQUFhRixFQUFTRyxPQUM1QmpCLEVBQWVnQixFQUdmbkMsY0FDQyxxQkFDQSxPQUNBbUIsRUFBYTJCLE9BQU9DLEtBQUtDLFVBRTFCaEQsY0FDQyx5QkFDQSxNQUNBbUIsRUFBYTJCLE9BQU9HLElBQUlDLE1BRXpCbEQsY0FDQyw0QkFDQSxPQUNBbUIsRUFBYTJCLE9BQU9DLEtBQUtJLHNCQUUxQm5ELGNBQWMsY0FBZSxPQUFRbUIsRUFBYWlDLEtBQUtDLEtBQUtDLE9BQzVEdEQsY0FBYyxpQkFBa0IsT0FBUW1CLEVBQWFpQyxLQUFLQyxLQUFLRSxVQUMvRHZELGNBQWMsYUFBYyxPQUFRbUIsRUFBYWlDLEtBQUtDLEtBQUtHLGFBQzNEeEQsY0FDQyw2QkFDQSxjQUNBbUIsRUFBYWlDLEtBQUtLLFlBQVlDLFVBRS9CMUQsY0FDQyw2QkFDQSxjQUNBbUIsRUFBYWlDLEtBQUtLLFlBQVlFLFVBRS9CM0QsY0FBYyxvQkFBcUIsT0FBUW1CLEVBQWFpQyxLQUFLQyxLQUFLTyxPQUNuRSxDQUFFLE1BQ0R2QixRQUFRQyxNQUFNLGlDQUNmLEdBRURLLElBRUEsTUFBTUYsRUFBb0IsS0FFekIsTUFBTUssRUFBUy9DLGNBQWMsU0FBVSxDQUFDLFdBQ2xDbUQsRUFBT25ELGNBQWMsSUFBSyxDQUFDLGVBQWdCLHNCQUF1QixDQUN2RThELEtBQU0sSUFDTixhQUFjLEdBQUcxQyxFQUFhMkIsT0FBT0MsS0FBS0MsYUFFckNjLEVBQVUvRCxjQUNmLE1BQ0EsQ0FBQyxtQkFBb0IsMEJBQ3JCLENBQ0NnRSxJQUFLLHVCQUNMZCxJQUFLLEdBQUc5QixFQUFhMkIsT0FBT0csSUFBSUMsT0FDaENjLE1BQU8sS0FDUEMsT0FBUSxPQUdKQyxFQUFXbkUsY0FBYyxPQUFRLENBQ3RDLG9CQUNBLDRCQUVEbUUsRUFBU0MsWUFBYyxTQUN2QmpCLEVBQUtsQixPQUFPOEIsRUFBU0ksR0FDckJwQixFQUFPZCxPQUFPa0IsR0FJZCxNQUFNa0IsRUFBYXJFLGNBQWMsU0FBVSxDQUFDLDZCQUE4QixDQUN6RSxhQUFjLEdBQUdvQixFQUFhMkIsT0FBT0MsS0FBS0kseUJBRXJDa0IsRUFBbUJ0RSxjQUFjLE9BQVEsQ0FDOUMscUNBRUt1RSxFQUFZdkUsY0FBYyxNQUFPLENBQUMsNEJBQTZCLENBQ3BFZ0UsSUFBSywrQkFDTGQsSUFBSyxHQUNMZSxNQUFPLEtBQ1BDLE9BQVEsT0FFSE0sRUFBV3hFLGNBQWMsS0FBTSxDQUFDLDRCQUV0QyxJQUFLLElBQUl5RSxFQUFJLEVBQUdBLEVBQUlwRCxFQUFZb0QsSUFBSyxDQUNwQyxNQUFNQyxFQUFhMUUsY0FBYyxLQUFNLENBQUMsOEJBQ2xDb0MsRUFBT2QsT0FBT0MsS0FBS1AsR0FBV3lELEdBQzlCbkIsRUFBT2hDLE9BQU9xRCxPQUFPM0QsR0FBV3lELEdBRXRDQyxFQUFXRSxRQUFRQyxLQUFPekMsRUFDMUJzQyxFQUFXTixZQUFjZCxFQUN6Qm9CLEVBQVdJLE1BQU1DLGVBQXFCLElBQUpOLEVBQVUsS0FDNUNELEVBQVN2QyxPQUFPeUMsRUFDakIsQ0FXQSxPQVRBSixFQUFpQkYsWUFBY3BELEVBQVVQLEdBRXpDNEQsRUFBVy9ELGlCQUFpQixRQUFVMEUsSUFDckNDLEVBQWlCQyxLQUFLYixFQUFZVyxFQUFHVixLQUd0Q0QsRUFBV3BDLE9BQU9xQyxFQUFrQkMsRUFBV0MsR0FDL0N6QixFQUFPZCxPQUFPb0MsR0FFUHRCLEdBR1IsU0FBU2tDLEVBQWlCRCxFQUFHRyxHQUk1QixHQUhrQkMsS0FDUkMsVUFBVUMsT0FBTyxVQUV2Qk4sRUFBRU8sT0FBT0MsUUFBUSw4QkFBK0IsQ0FDbkQsTUFBTUMsRUFBZVQsRUFBRU8sT0FBT1gsUUFBUUMsS0FDdENNLEVBQVNmLFlBQWNwRCxFQUFVeUUsR0FDakNoRixFQUFXZ0YsRUFFWEMsRUFBMEIsb0JBQXFCakYsR0FDL0NtQyxHQUNELENBQ0QsQ0FDQSxNQUFNOEMsRUFBNEIsQ0FBQ0MsRUFBUUMsS0FDMUMsTUFBTUMsRUFBa0JuRSxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGNBQWdCLENBQUMsRUFDekVnRSxFQUFnQkYsR0FBVUMsRUFDMUJ6RSxFQUFXLElBQUtBLEtBQWEwRSxHQUM3QmpFLGFBQWFrRSxRQUFRLFdBQVlwRSxLQUFLcUUsVUFBVTVFLElBRWxEIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwiLi9oZWxwZXJzLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyB1cGRhdGVFbGVtZW50IH0gZnJvbSBcIi4vdXBkYXRlU3RhdGVGdW5jdGlvbnMubWluLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUxvZ2luUGFnZSwgc2hvd0xvYWRlciwgaGlkZUxvYWRlciB9IGZyb20gXCIuL2NvbXBvbmVudHMubWluLmpzXCI7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcblx0Y29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucm9vdFwiKTtcclxuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHRsZXQgbGFuZ3VhZ2UgPSBoYW5kbGVVc2VyTGFuZ3VhZ2UoKTtcclxuXHRjb25zdCBsYW5nTmFtZXMgPSB7IHBsOiBcIlBvbHNraVwiLCBlbjogXCJFbmdsaXNoXCIgfTtcclxuXHRsZXQgdXNlckRhdGEgPSB7fTtcclxuXHRsZXQgdHJhbnNsYXRpb25zID0ge307XHJcblx0Y29uc3QgbGFuZ0NvZGVzID0gT2JqZWN0LmtleXMobGFuZ05hbWVzKTtcclxuXHRsZXQgbGFuZ0Ftb3VudCA9IGxhbmdDb2Rlcy5sZW5ndGg7XHJcblxyXG5cdGZ1bmN0aW9uIGhhbmRsZVVzZXJMYW5ndWFnZSgpIHtcclxuXHRcdGxldCB1c2VyTGFuZyA9IG5hdmlnYXRvci5sYW5ndWFnZSB8fCBuYXZpZ2F0b3IudXNlckxhbmd1YWdlO1xyXG5cclxuXHRcdGlmICghdXNlckxhbmcgfHwgdXNlckxhbmcgIT09IFwicGxcIiB8fCB1c2VyTGFuZyAhPT0gXCJlblwiKSByZXR1cm4gXCJwbFwiO1xyXG5cclxuXHRcdHVzZXJMYW5nID0gdXNlckxhbmcuc2xpY2UoMCwgMikudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHRyZXR1cm4gdXNlckxhbmc7XHJcblx0fVxyXG5cdGNvbnN0IGdldFVzZXJMYW5ndWFnZVByZWZlcmVuY2UgPSAoKSA9PiB7XHJcblx0XHRjb25zdCBwcmVmZXJyZWRMYW5nID0gSlNPTi5wYXJzZShcclxuXHRcdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyRGF0YVwiKVxyXG5cdFx0KT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblxyXG5cdFx0aWYgKHByZWZlcnJlZExhbmcpIGxhbmd1YWdlID0gcHJlZmVycmVkTGFuZztcclxuXHR9O1xyXG5cdGdldFVzZXJMYW5ndWFnZVByZWZlcmVuY2UoKTtcclxuXHJcblx0Y29uc3QgbG9hZEZpcnN0VHJhbnNsYXRpb25zID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZChzaG93TG9hZGVyKCkpO1xyXG5cclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgLi9zcmMvanNvbi8ke2xhbmd1YWdlfS5qc29uYCk7XHJcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0XHRcdHRyYW5zbGF0aW9ucyA9IGRhdGE7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgaW5pdGlhbCB0cmFuc2xhdGlvbiBmaWxlXCIpO1xyXG5cdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0aGlkZUxvYWRlcigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFQUEVORCBTRUNUSU9OXHJcblx0XHRjb25zb2xlLmxvZyh0cmFuc2xhdGlvbnMpO1xyXG5cdFx0Y29udGFpbmVyLnByZXBlbmQoY3JlYXRlTG9naW5IZWFkZXIoKSk7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKGNyZWF0ZUxvZ2luUGFnZSh0cmFuc2xhdGlvbnMpKTtcclxuXHR9O1xyXG5cdGxvYWRGaXJzdFRyYW5zbGF0aW9ucygpO1xyXG5cdGNvbnN0IGxvYWRUcmFuc2xhdGlvbnMgPSBhc3luYyAoKSA9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAuL3NyYy9qc29uLyR7bGFuZ3VhZ2V9Lmpzb25gKTtcclxuXHJcblx0XHRcdGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihcIk5ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBva1wiKTtcclxuXHJcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0XHRcdHRyYW5zbGF0aW9ucyA9IGRhdGE7XHJcblxyXG5cdFx0XHQvLyBVUERBVEUgRUxFTUVOVFNcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcclxuXHRcdFx0XHRcImxvZ2luLWhlYWRlcl9fbG9nb1wiLFxyXG5cdFx0XHRcdFwiYXJpYVwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5sb2dvTGlua1xyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibG9naW4taGVhZGVyX19sb2dvLWltZ1wiLFxyXG5cdFx0XHRcdFwiYWx0XCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLmhlYWRlci5hbHQubG9nb1xyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibG9naW4taGVhZGVyX19sYW5nLXNlbGVjdFwiLFxyXG5cdFx0XHRcdFwiYXJpYVwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5jaGFuZ2VMYW5ndWFnZUJ1dHRvblxyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fdGl0bGVcIiwgXCJ0ZXh0XCIsIHRyYW5zbGF0aW9ucy5tYWluLnRleHQudGl0bGUpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fc3VidGl0bGVcIiwgXCJ0ZXh0XCIsIHRyYW5zbGF0aW9ucy5tYWluLnRleHQuc3VidGl0bGUpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fdGV4dFwiLCBcInRleHRcIiwgdHJhbnNsYXRpb25zLm1haW4udGV4dC5kZXNjcmlwdGlvbik7XHJcblx0XHRcdHVwZGF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJtYWluX19mb3JtLWlucHV0LS11c2VybmFtZVwiLFxyXG5cdFx0XHRcdFwicGxhY2Vob2xkZXJcIixcclxuXHRcdFx0XHR0cmFuc2xhdGlvbnMubWFpbi5wbGFjZWhvbGRlci51c2VybmFtZVxyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibWFpbl9fZm9ybS1pbnB1dC0tcGFzc3dvcmRcIixcclxuXHRcdFx0XHRcInBsYWNlaG9sZGVyXCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLm1haW4ucGxhY2Vob2xkZXIucGFzc3dvcmRcclxuXHRcdFx0KTtcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcIm1haW5fX2Zvcm0tYnV0dG9uXCIsIFwidGV4dFwiLCB0cmFuc2xhdGlvbnMubWFpbi50ZXh0LmJ1dHRvbik7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgdHJhbnNsYXRpb24gZmlsZVwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdGxvYWRUcmFuc2xhdGlvbnMoKTtcclxuXHJcblx0Y29uc3QgY3JlYXRlTG9naW5IZWFkZXIgPSAoKSA9PiB7XHJcblx0XHQvLyBsb2dvXHJcblx0XHRjb25zdCBoZWFkZXIgPSBjcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIsIFtcImhlYWRlclwiXSk7XHJcblx0XHRjb25zdCBsb2dvID0gY3JlYXRlRWxlbWVudChcImFcIiwgW1wiaGVhZGVyX19sb2dvXCIsIFwibG9naW4taGVhZGVyX19sb2dvXCJdLCB7XHJcblx0XHRcdGhyZWY6IFwiL1wiLFxyXG5cdFx0XHRcImFyaWEtbGFiZWxcIjogYCR7dHJhbnNsYXRpb25zLmhlYWRlci5hcmlhLmxvZ29MaW5rfWAsXHJcblx0XHR9KTtcclxuXHRcdGNvbnN0IGxvZ29JbWcgPSBjcmVhdGVFbGVtZW50KFxyXG5cdFx0XHRcImltZ1wiLFxyXG5cdFx0XHRbXCJoZWFkZXJfX2xvZ28taW1nXCIsIFwibG9naW4taGVhZGVyX19sb2dvLWltZ1wiXSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHNyYzogXCIuL3NyYy9pY29ucy9sb2dvLnN2Z1wiLFxyXG5cdFx0XHRcdGFsdDogYCR7dHJhbnNsYXRpb25zLmhlYWRlci5hbHQubG9nb31gLFxyXG5cdFx0XHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0XHRjb25zdCBsb2dvVGV4dCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcclxuXHRcdFx0XCJoZWFkZXJfX2xvZ28tdGV4dFwiLFxyXG5cdFx0XHRcImxvZ2luLWhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XHRdKTtcclxuXHRcdGxvZ29UZXh0LnRleHRDb250ZW50ID0gXCJTdHJlYW1cIjtcclxuXHRcdGxvZ28uYXBwZW5kKGxvZ29JbWcsIGxvZ29UZXh0KTtcclxuXHRcdGhlYWRlci5hcHBlbmQobG9nbyk7XHJcblx0XHQvLyBlbmQgb2YgbG9nb1xyXG5cclxuXHRcdC8vIGxhbmd1YWdlIHNlbGVjdG9yXHJcblx0XHRjb25zdCBsYW5nU2VsZWN0ID0gY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctc2VsZWN0XCJdLCB7XHJcblx0XHRcdFwiYXJpYS1sYWJlbFwiOiBgJHt0cmFuc2xhdGlvbnMuaGVhZGVyLmFyaWEuY2hhbmdlTGFuZ3VhZ2VCdXR0b259YCxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgbGFuZ1BsYXRmb3JtTGFuZyA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFtcclxuXHRcdFx0XCJsb2dpbi1oZWFkZXJfX2xhbmctcGxhdGZvcm0tbGFuZ1wiLFxyXG5cdFx0XSk7XHJcblx0XHRjb25zdCBsYW5nQXJyb3cgPSBjcmVhdGVFbGVtZW50KFwiaW1nXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1hcnJvd1wiXSwge1xyXG5cdFx0XHRzcmM6IFwiLi9zcmMvaWNvbnMvY2hldnJvbi1kb3duLnN2Z1wiLFxyXG5cdFx0XHRhbHQ6IFwiXCIsXHJcblx0XHRcdHdpZHRoOiBcIjI0XCIsXHJcblx0XHRcdGhlaWdodDogXCIyNFwiLFxyXG5cdFx0fSk7XHJcblx0XHRjb25zdCBsYW5nTGlzdCA9IGNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctbGlzdFwiXSk7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsYW5nQW1vdW50OyBpKyspIHtcclxuXHRcdFx0Y29uc3QgbGFuZ0Nob2ljZSA9IGNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBbXCJsb2dpbi1oZWFkZXJfX2xhbmctY2hvaWNlXCJdKTtcclxuXHRcdFx0Y29uc3QgZGF0YSA9IE9iamVjdC5rZXlzKGxhbmdOYW1lcylbaV07XHJcblx0XHRcdGNvbnN0IHRleHQgPSBPYmplY3QudmFsdWVzKGxhbmdOYW1lcylbaV07XHJcblxyXG5cdFx0XHRsYW5nQ2hvaWNlLmRhdGFzZXQubGFuZyA9IGRhdGE7XHJcblx0XHRcdGxhbmdDaG9pY2UudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0XHRsYW5nQ2hvaWNlLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gaSAqIDEwMCArIFwibXNcIjtcclxuXHRcdFx0bGFuZ0xpc3QuYXBwZW5kKGxhbmdDaG9pY2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxhbmdQbGF0Zm9ybUxhbmcudGV4dENvbnRlbnQgPSBsYW5nTmFtZXNbbGFuZ3VhZ2VdO1xyXG5cclxuXHRcdGxhbmdTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRcdGhhbmRsZUxhbmdTZWxlY3QuY2FsbChsYW5nU2VsZWN0LCBlLCBsYW5nUGxhdGZvcm1MYW5nKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGxhbmdTZWxlY3QuYXBwZW5kKGxhbmdQbGF0Zm9ybUxhbmcsIGxhbmdBcnJvdywgbGFuZ0xpc3QpO1xyXG5cdFx0aGVhZGVyLmFwcGVuZChsYW5nU2VsZWN0KTtcclxuXHJcblx0XHRyZXR1cm4gaGVhZGVyO1xyXG5cdFx0Ly8gZW5kIG9mIGxhbmd1YWdlIHNlbGVjdG9yXHJcblx0fTtcclxuXHRmdW5jdGlvbiBoYW5kbGVMYW5nU2VsZWN0KGUsIGxhbmdUZXh0KSB7XHJcblx0XHRjb25zdCBzZWxlY3RCdG4gPSB0aGlzO1xyXG5cdFx0c2VsZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcblxyXG5cdFx0aWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCIubG9naW4taGVhZGVyX19sYW5nLWNob2ljZVwiKSkge1xyXG5cdFx0XHRjb25zdCBzZWxlY3RlZExhbmcgPSBlLnRhcmdldC5kYXRhc2V0Lmxhbmc7XHJcblx0XHRcdGxhbmdUZXh0LnRleHRDb250ZW50ID0gbGFuZ05hbWVzW3NlbGVjdGVkTGFuZ107XHJcblx0XHRcdGxhbmd1YWdlID0gc2VsZWN0ZWRMYW5nO1xyXG5cclxuXHRcdFx0c2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZShcInByZWZlcnJlZExhbmd1YWdlXCIsIGxhbmd1YWdlKTtcclxuXHRcdFx0bG9hZFRyYW5zbGF0aW9ucyhsYW5ndWFnZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGNvbnN0IHNldFVzZXJMYW5ndWFnZVByZWZlcmVuY2UgPSAob3B0aW9uLCB2YWx1ZSkgPT4ge1xyXG5cdFx0Y29uc3QgY3VycmVudFVzZXJEYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJEYXRhXCIpKSB8fCB7fTtcclxuXHRcdGN1cnJlbnRVc2VyRGF0YVtvcHRpb25dID0gdmFsdWU7XHJcblx0XHR1c2VyRGF0YSA9IHsgLi4udXNlckRhdGEsIC4uLmN1cnJlbnRVc2VyRGF0YSB9O1xyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyRGF0YVwiLCBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSkpO1xyXG5cdH07XHJcbn0pO1xyXG4iXX0=
