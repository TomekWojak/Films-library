import{createElement}from"./helpers.min.js";import{updateElement}from"./updateStateFunctions.min.js";import{createLoginPage}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){document.querySelector(".root");const e=document.querySelector(".container");let t=function(){let e=navigator.language||navigator.userLanguage;return e&&"pl"===e&&"en"===e?(e=e.slice(0,2).toLowerCase(),e):"pl"}();const a={pl:"Polski",en:"English"};let n={},o={};let r=Object.keys(a).length;(()=>{const e=JSON.parse(localStorage.getItem("userData"))?.preferredLanguage;e&&(t=e)})();(async()=>{try{const e=await fetch(`./src/json/${t}.json`),a=await e.json();o=a}catch{console.error("Error loading initial translation file")}console.log(o),e.prepend(i()),e.append(createLoginPage(o))})();const l=async()=>{try{const e=await fetch(`./src/json/${t}.json`);if(!e.ok)throw new Error("Network response was not ok");const a=await e.json();o=a,updateElement("login-header__logo","aria",o.header.aria.logoLink),updateElement("login-header__logo-img","alt",o.header.alt.logo),updateElement("login-header__lang-select","aria",o.header.aria.changeLanguageButton),updateElement("main__title","text",o.main.text.title),updateElement("main__subtitle","text",o.main.text.subtitle),updateElement("main__text","text",o.main.text.description),updateElement("main__form-input--username","text",o.main.placeholder.username),updateElement("main__form-button","text",o.main.text.button)}catch{console.error("Error loading translation file")}};l();const i=()=>{const e=createElement("header",["header"]),n=createElement("a",["header__logo","login-header__logo"],{href:"/","aria-label":`${o.header.aria.logoLink}`}),l=createElement("img",["header__logo-img","login-header__logo-img"],{src:"./src/icons/logo.svg",alt:`${o.header.alt.logo}`,width:"24",height:"24"}),i=createElement("span",["header__logo-text","login-header__logo-text"]);i.textContent="Stream",n.append(l,i),e.append(n);const c=createElement("button",["login-header__lang-select"],{"aria-label":`${o.header.aria.changeLanguageButton}`}),g=createElement("span",["login-header__lang-platform-lang"]),d=createElement("img",["login-header__lang-arrow"],{src:"./src/icons/chevron-down.svg",alt:"",width:"24",height:"24"}),m=createElement("ul",["login-header__lang-list"]);for(let e=0;e<r;e++){const t=createElement("li",["login-header__lang-choice"]),n=Object.keys(a)[e],o=Object.values(a)[e];t.dataset.lang=n,t.textContent=o,t.style.animationDelay=100*e+"ms",m.append(t)}return g.textContent=a[t],c.addEventListener("click",e=>{s.call(c,e,g)}),c.append(g,d,m),e.append(c),e};function s(e,n){if(this.classList.toggle("active"),e.target.matches(".login-header__lang-choice")){const o=e.target.dataset.lang;n.textContent=a[o],t=o,c("preferredLanguage",t),l()}}const c=(e,t)=>{const a=JSON.parse(localStorage.getItem("userData"))||{};a[e]=t,n={...n,...a},localStorage.setItem("userData",JSON.stringify(n))}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsIm5hbWVzIjpbImNyZWF0ZUVsZW1lbnQiLCJ1cGRhdGVFbGVtZW50IiwiY3JlYXRlTG9naW5QYWdlIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsImNvbnRhaW5lciIsImxhbmd1YWdlIiwidXNlckxhbmciLCJuYXZpZ2F0b3IiLCJ1c2VyTGFuZ3VhZ2UiLCJzbGljZSIsInRvTG93ZXJDYXNlIiwiaGFuZGxlVXNlckxhbmd1YWdlIiwibGFuZ05hbWVzIiwicGwiLCJlbiIsInVzZXJEYXRhIiwidHJhbnNsYXRpb25zIiwibGFuZ0Ftb3VudCIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJwcmVmZXJyZWRMYW5nIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInByZWZlcnJlZExhbmd1YWdlIiwiZ2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZSIsImFzeW5jIiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwiY29uc29sZSIsImVycm9yIiwibG9nIiwicHJlcGVuZCIsImNyZWF0ZUxvZ2luSGVhZGVyIiwiYXBwZW5kIiwibG9hZEZpcnN0VHJhbnNsYXRpb25zIiwibG9hZFRyYW5zbGF0aW9ucyIsIm9rIiwiRXJyb3IiLCJoZWFkZXIiLCJhcmlhIiwibG9nb0xpbmsiLCJhbHQiLCJsb2dvIiwiY2hhbmdlTGFuZ3VhZ2VCdXR0b24iLCJtYWluIiwidGV4dCIsInRpdGxlIiwic3VidGl0bGUiLCJkZXNjcmlwdGlvbiIsInBsYWNlaG9sZGVyIiwidXNlcm5hbWUiLCJidXR0b24iLCJocmVmIiwibG9nb0ltZyIsInNyYyIsIndpZHRoIiwiaGVpZ2h0IiwibG9nb1RleHQiLCJ0ZXh0Q29udGVudCIsImxhbmdTZWxlY3QiLCJsYW5nUGxhdGZvcm1MYW5nIiwibGFuZ0Fycm93IiwibGFuZ0xpc3QiLCJpIiwibGFuZ0Nob2ljZSIsInZhbHVlcyIsImRhdGFzZXQiLCJsYW5nIiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsImUiLCJoYW5kbGVMYW5nU2VsZWN0IiwiY2FsbCIsImxhbmdUZXh0IiwidGhpcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRhcmdldCIsIm1hdGNoZXMiLCJzZWxlY3RlZExhbmciLCJzZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlIiwib3B0aW9uIiwidmFsdWUiLCJjdXJyZW50VXNlckRhdGEiLCJzZXRJdGVtIiwic3RyaW5naWZ5Il0sInNvdXJjZXMiOlsic2NyaXB0LmpzIl0sIm1hcHBpbmdzIjoiT0FBU0Esa0JBQXFCLDBCQUNyQkMsa0JBQXFCLHVDQUNyQkMsb0JBQXVCLHNCQUNoQ0MsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUNoQ0QsU0FBU0UsY0FBYyxTQUFwQyxNQUNNQyxFQUFZSCxTQUFTRSxjQUFjLGNBQ3pDLElBQUlFLEVBT0osV0FDQyxJQUFJQyxFQUFXQyxVQUFVRixVQUFZRSxVQUFVQyxhQUUvQyxPQUFLRixHQUF5QixPQUFiQSxHQUFrQyxPQUFiQSxHQUV0Q0EsRUFBV0EsRUFBU0csTUFBTSxFQUFHLEdBQUdDLGNBRXpCSixHQUp5RCxJQUtqRSxDQWZlSyxHQUNmLE1BQU1DLEVBQVksQ0FBRUMsR0FBSSxTQUFVQyxHQUFJLFdBQ3RDLElBQUlDLEVBQVcsQ0FBQyxFQUNaQyxFQUFlLENBQUMsRUFFcEIsSUFBSUMsRUFEY0MsT0FBT0MsS0FBS1AsR0FDSFEsT0FXTyxNQUNqQyxNQUFNQyxFQUFnQkMsS0FBS0MsTUFDMUJDLGFBQWFDLFFBQVEsY0FDbkJDLGtCQUVDTCxJQUFlaEIsRUFBV2dCLElBRS9CTSxHQUU4QkMsV0FDN0IsSUFDQyxNQUFNQyxRQUFpQkMsTUFBTSxjQUFjekIsVUFDckMwQixRQUFhRixFQUFTRyxPQUM1QmhCLEVBQWVlLENBQ2hCLENBQUUsTUFDREUsUUFBUUMsTUFBTSx5Q0FDZixDQUdBRCxRQUFRRSxJQUFJbkIsR0FDWlosRUFBVWdDLFFBQVFDLEtBQ2xCakMsRUFBVWtDLE9BQU90QyxnQkFBZ0JnQixLQUVsQ3VC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YUFBYUMsUUFBUSxjQUFnQixDQUFDLEVBQ3pFK0QsRUFBZ0JGLEdBQVVDLEVBQzFCeEUsRUFBVyxJQUFLQSxLQUFheUUsR0FDN0JoRSxhQUFhaUUsUUFBUSxXQUFZbkUsS0FBS29FLFVBQVUzRSxJQUVsRCIsImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSBcIi4vaGVscGVycy5taW4uanNcIjtcclxuaW1wb3J0IHsgdXBkYXRlRWxlbWVudCB9IGZyb20gXCIuL3VwZGF0ZVN0YXRlRnVuY3Rpb25zLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVMb2dpblBhZ2UgfSBmcm9tIFwiLi9jb21wb25lbnRzLm1pbi5qc1wiO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcblx0Y29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucm9vdFwiKTtcclxuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHRsZXQgbGFuZ3VhZ2UgPSBoYW5kbGVVc2VyTGFuZ3VhZ2UoKTtcclxuXHRjb25zdCBsYW5nTmFtZXMgPSB7IHBsOiBcIlBvbHNraVwiLCBlbjogXCJFbmdsaXNoXCIgfTtcclxuXHRsZXQgdXNlckRhdGEgPSB7fTtcclxuXHRsZXQgdHJhbnNsYXRpb25zID0ge307XHJcblx0Y29uc3QgbGFuZ0NvZGVzID0gT2JqZWN0LmtleXMobGFuZ05hbWVzKTtcclxuXHRsZXQgbGFuZ0Ftb3VudCA9IGxhbmdDb2Rlcy5sZW5ndGg7XHJcblxyXG5cdGZ1bmN0aW9uIGhhbmRsZVVzZXJMYW5ndWFnZSgpIHtcclxuXHRcdGxldCB1c2VyTGFuZyA9IG5hdmlnYXRvci5sYW5ndWFnZSB8fCBuYXZpZ2F0b3IudXNlckxhbmd1YWdlO1xyXG5cclxuXHRcdGlmICghdXNlckxhbmcgfHwgdXNlckxhbmcgIT09IFwicGxcIiB8fCB1c2VyTGFuZyAhPT0gXCJlblwiKSByZXR1cm4gXCJwbFwiO1xyXG5cclxuXHRcdHVzZXJMYW5nID0gdXNlckxhbmcuc2xpY2UoMCwgMikudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHRyZXR1cm4gdXNlckxhbmc7XHJcblx0fVxyXG5cdGNvbnN0IGdldFVzZXJMYW5ndWFnZVByZWZlcmVuY2UgPSAoKSA9PiB7XHJcblx0XHRjb25zdCBwcmVmZXJyZWRMYW5nID0gSlNPTi5wYXJzZShcclxuXHRcdFx0bG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyRGF0YVwiKVxyXG5cdFx0KT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblxyXG5cdFx0aWYgKHByZWZlcnJlZExhbmcpIGxhbmd1YWdlID0gcHJlZmVycmVkTGFuZztcclxuXHR9O1xyXG5cdGdldFVzZXJMYW5ndWFnZVByZWZlcmVuY2UoKTtcclxuXHJcblx0Y29uc3QgbG9hZEZpcnN0VHJhbnNsYXRpb25zID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgLi9zcmMvanNvbi8ke2xhbmd1YWdlfS5qc29uYCk7XHJcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0XHRcdHRyYW5zbGF0aW9ucyA9IGRhdGE7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgaW5pdGlhbCB0cmFuc2xhdGlvbiBmaWxlXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFQUEVORCBTRUNUSU9OXHJcblx0XHRjb25zb2xlLmxvZyh0cmFuc2xhdGlvbnMpO1xyXG5cdFx0Y29udGFpbmVyLnByZXBlbmQoY3JlYXRlTG9naW5IZWFkZXIoKSk7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKGNyZWF0ZUxvZ2luUGFnZSh0cmFuc2xhdGlvbnMpKTtcclxuXHR9O1xyXG5cdGxvYWRGaXJzdFRyYW5zbGF0aW9ucygpO1xyXG5cdGNvbnN0IGxvYWRUcmFuc2xhdGlvbnMgPSBhc3luYyAoKSA9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAuL3NyYy9qc29uLyR7bGFuZ3VhZ2V9Lmpzb25gKTtcclxuXHJcblx0XHRcdGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihcIk5ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBva1wiKTtcclxuXHJcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0XHRcdHRyYW5zbGF0aW9ucyA9IGRhdGE7XHJcblxyXG5cdFx0XHQvLyBVUERBVEUgRUxFTUVOVFNcclxuXHRcdFx0dXBkYXRlRWxlbWVudChcclxuXHRcdFx0XHRcImxvZ2luLWhlYWRlcl9fbG9nb1wiLFxyXG5cdFx0XHRcdFwiYXJpYVwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5sb2dvTGlua1xyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibG9naW4taGVhZGVyX19sb2dvLWltZ1wiLFxyXG5cdFx0XHRcdFwiYWx0XCIsXHJcblx0XHRcdFx0dHJhbnNsYXRpb25zLmhlYWRlci5hbHQubG9nb1xyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFxyXG5cdFx0XHRcdFwibG9naW4taGVhZGVyX19sYW5nLXNlbGVjdFwiLFxyXG5cdFx0XHRcdFwiYXJpYVwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5jaGFuZ2VMYW5ndWFnZUJ1dHRvblxyXG5cdFx0XHQpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fdGl0bGVcIiwgXCJ0ZXh0XCIsIHRyYW5zbGF0aW9ucy5tYWluLnRleHQudGl0bGUpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fc3VidGl0bGVcIiwgXCJ0ZXh0XCIsIHRyYW5zbGF0aW9ucy5tYWluLnRleHQuc3VidGl0bGUpO1xyXG5cdFx0XHR1cGRhdGVFbGVtZW50KFwibWFpbl9fdGV4dFwiLCBcInRleHRcIiwgdHJhbnNsYXRpb25zLm1haW4udGV4dC5kZXNjcmlwdGlvbik7XHJcblx0XHRcdHVwZGF0ZUVsZW1lbnQoXHJcblx0XHRcdFx0XCJtYWluX19mb3JtLWlucHV0LS11c2VybmFtZVwiLFxyXG5cdFx0XHRcdFwidGV4dFwiLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5tYWluLnBsYWNlaG9sZGVyLnVzZXJuYW1lXHJcblx0XHRcdCk7XHJcblx0XHRcdHVwZGF0ZUVsZW1lbnQoJ21haW5fX2Zvcm0tYnV0dG9uJywgJ3RleHQnLCB0cmFuc2xhdGlvbnMubWFpbi50ZXh0LmJ1dHRvbilcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyB0cmFuc2xhdGlvbiBmaWxlXCIpO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0bG9hZFRyYW5zbGF0aW9ucygpO1xyXG5cclxuXHRjb25zdCBjcmVhdGVMb2dpbkhlYWRlciA9ICgpID0+IHtcclxuXHRcdC8vIGxvZ29cclxuXHRcdGNvbnN0IGhlYWRlciA9IGNyZWF0ZUVsZW1lbnQoXCJoZWFkZXJcIiwgW1wiaGVhZGVyXCJdKTtcclxuXHRcdGNvbnN0IGxvZ28gPSBjcmVhdGVFbGVtZW50KFwiYVwiLCBbXCJoZWFkZXJfX2xvZ29cIiwgXCJsb2dpbi1oZWFkZXJfX2xvZ29cIl0sIHtcclxuXHRcdFx0aHJlZjogXCIvXCIsXHJcblx0XHRcdFwiYXJpYS1sYWJlbFwiOiBgJHt0cmFuc2xhdGlvbnMuaGVhZGVyLmFyaWEubG9nb0xpbmt9YCxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgbG9nb0ltZyA9IGNyZWF0ZUVsZW1lbnQoXHJcblx0XHRcdFwiaW1nXCIsXHJcblx0XHRcdFtcImhlYWRlcl9fbG9nby1pbWdcIiwgXCJsb2dpbi1oZWFkZXJfX2xvZ28taW1nXCJdLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c3JjOiBcIi4vc3JjL2ljb25zL2xvZ28uc3ZnXCIsXHJcblx0XHRcdFx0YWx0OiBgJHt0cmFuc2xhdGlvbnMuaGVhZGVyLmFsdC5sb2dvfWAsXHJcblx0XHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0XHRoZWlnaHQ6IFwiMjRcIixcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IGxvZ29UZXh0ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XHRcImhlYWRlcl9fbG9nby10ZXh0XCIsXHJcblx0XHRcdFwibG9naW4taGVhZGVyX19sb2dvLXRleHRcIixcclxuXHRcdF0pO1xyXG5cdFx0bG9nb1RleHQudGV4dENvbnRlbnQgPSBcIlN0cmVhbVwiO1xyXG5cdFx0bG9nby5hcHBlbmQobG9nb0ltZywgbG9nb1RleHQpO1xyXG5cdFx0aGVhZGVyLmFwcGVuZChsb2dvKTtcclxuXHRcdC8vIGVuZCBvZiBsb2dvXHJcblxyXG5cdFx0Ly8gbGFuZ3VhZ2Ugc2VsZWN0b3JcclxuXHRcdGNvbnN0IGxhbmdTZWxlY3QgPSBjcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1zZWxlY3RcIl0sIHtcclxuXHRcdFx0XCJhcmlhLWxhYmVsXCI6IGAke3RyYW5zbGF0aW9ucy5oZWFkZXIuYXJpYS5jaGFuZ2VMYW5ndWFnZUJ1dHRvbn1gLFxyXG5cdFx0fSk7XHJcblx0XHRjb25zdCBsYW5nUGxhdGZvcm1MYW5nID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgW1xyXG5cdFx0XHRcImxvZ2luLWhlYWRlcl9fbGFuZy1wbGF0Zm9ybS1sYW5nXCIsXHJcblx0XHRdKTtcclxuXHRcdGNvbnN0IGxhbmdBcnJvdyA9IGNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgW1wibG9naW4taGVhZGVyX19sYW5nLWFycm93XCJdLCB7XHJcblx0XHRcdHNyYzogXCIuL3NyYy9pY29ucy9jaGV2cm9uLWRvd24uc3ZnXCIsXHJcblx0XHRcdGFsdDogXCJcIixcclxuXHRcdFx0d2lkdGg6IFwiMjRcIixcclxuXHRcdFx0aGVpZ2h0OiBcIjI0XCIsXHJcblx0XHR9KTtcclxuXHRcdGNvbnN0IGxhbmdMaXN0ID0gY3JlYXRlRWxlbWVudChcInVsXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1saXN0XCJdKTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxhbmdBbW91bnQ7IGkrKykge1xyXG5cdFx0XHRjb25zdCBsYW5nQ2hvaWNlID0gY3JlYXRlRWxlbWVudChcImxpXCIsIFtcImxvZ2luLWhlYWRlcl9fbGFuZy1jaG9pY2VcIl0pO1xyXG5cdFx0XHRjb25zdCBkYXRhID0gT2JqZWN0LmtleXMobGFuZ05hbWVzKVtpXTtcclxuXHRcdFx0Y29uc3QgdGV4dCA9IE9iamVjdC52YWx1ZXMobGFuZ05hbWVzKVtpXTtcclxuXHJcblx0XHRcdGxhbmdDaG9pY2UuZGF0YXNldC5sYW5nID0gZGF0YTtcclxuXHRcdFx0bGFuZ0Nob2ljZS50ZXh0Q29udGVudCA9IHRleHQ7XHJcblx0XHRcdGxhbmdDaG9pY2Uuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBpICogMTAwICsgXCJtc1wiO1xyXG5cdFx0XHRsYW5nTGlzdC5hcHBlbmQobGFuZ0Nob2ljZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGFuZ1BsYXRmb3JtTGFuZy50ZXh0Q29udGVudCA9IGxhbmdOYW1lc1tsYW5ndWFnZV07XHJcblxyXG5cdFx0bGFuZ1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdFx0aGFuZGxlTGFuZ1NlbGVjdC5jYWxsKGxhbmdTZWxlY3QsIGUsIGxhbmdQbGF0Zm9ybUxhbmcpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bGFuZ1NlbGVjdC5hcHBlbmQobGFuZ1BsYXRmb3JtTGFuZywgbGFuZ0Fycm93LCBsYW5nTGlzdCk7XHJcblx0XHRoZWFkZXIuYXBwZW5kKGxhbmdTZWxlY3QpO1xyXG5cclxuXHRcdHJldHVybiBoZWFkZXI7XHJcblx0XHQvLyBlbmQgb2YgbGFuZ3VhZ2Ugc2VsZWN0b3JcclxuXHR9O1xyXG5cdGZ1bmN0aW9uIGhhbmRsZUxhbmdTZWxlY3QoZSwgbGFuZ1RleHQpIHtcclxuXHRcdGNvbnN0IHNlbGVjdEJ0biA9IHRoaXM7XHJcblx0XHRzZWxlY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuXHJcblx0XHRpZiAoZS50YXJnZXQubWF0Y2hlcyhcIi5sb2dpbi1oZWFkZXJfX2xhbmctY2hvaWNlXCIpKSB7XHJcblx0XHRcdGNvbnN0IHNlbGVjdGVkTGFuZyA9IGUudGFyZ2V0LmRhdGFzZXQubGFuZztcclxuXHRcdFx0bGFuZ1RleHQudGV4dENvbnRlbnQgPSBsYW5nTmFtZXNbc2VsZWN0ZWRMYW5nXTtcclxuXHRcdFx0bGFuZ3VhZ2UgPSBzZWxlY3RlZExhbmc7XHJcblxyXG5cdFx0XHRzZXRVc2VyTGFuZ3VhZ2VQcmVmZXJlbmNlKFwicHJlZmVycmVkTGFuZ3VhZ2VcIiwgbGFuZ3VhZ2UpO1xyXG5cdFx0XHRsb2FkVHJhbnNsYXRpb25zKGxhbmd1YWdlKTtcclxuXHRcdH1cclxuXHR9XHJcblx0Y29uc3Qgc2V0VXNlckxhbmd1YWdlUHJlZmVyZW5jZSA9IChvcHRpb24sIHZhbHVlKSA9PiB7XHJcblx0XHRjb25zdCBjdXJyZW50VXNlckRhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckRhdGFcIikpIHx8IHt9O1xyXG5cdFx0Y3VycmVudFVzZXJEYXRhW29wdGlvbl0gPSB2YWx1ZTtcclxuXHRcdHVzZXJEYXRhID0geyAuLi51c2VyRGF0YSwgLi4uY3VycmVudFVzZXJEYXRhIH07XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJEYXRhXCIsIEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSk7XHJcblx0fTtcclxufSk7XHJcbiJdfQ==
