import{getData,createBrowsePage,showErrorPopup,showBigLoader,hideBigLoader,createFooter,closeAllNotClicked,createSpecifiedSectionPoster,createSearchEngine,createFilteredFilmsSection}from"./components.min.js";document.addEventListener("DOMContentLoaded",function(){const e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTYwZjM4MjU3NDQ1ZGE1ZGZkYTYxYzE0YWM4YmM4MyIsIm5iZiI6MTc1OTc2NTAzOC45NCwic3ViIjoiNjhlM2UyMmUyNjY5NzY4MzhlYzI3NzI5Iiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.nuGfEjclJLepmzzHi2omNhp29THgrJf9Nv6D4_gTdxA"}},t=window.location.href,i=async(e,i,r)=>{if(t.includes("movies.html")){const t=await o(e);return createSpecifiedSectionPoster(t,i)}if(t.includes("series.html")){const t=await a(e);return createSpecifiedSectionPoster(t,i)}if(!t.includes("my-list.html")){if(t.includes("search.html")){const t=await o(e,1);return r.append(createSearchEngine(i)),n(e,i),createSpecifiedSectionPoster(t,i)}window.location.href="404.html"}},o=async(t,i)=>{const o=[],a=[];for(let o=0;o<(i||3);o++){const i=await fetch(`https://api.themoviedb.org/3/discover/movie?language=${t||"en-US"}&page=${o+1}`,e),n=await i.json();a.push(...n.results)}return o.push(a),o},a=async t=>{const i=[null],o=[];for(let i=0;i<3;i++){const a=await fetch(`https://api.themoviedb.org/3/discover/tv?language=${t||"en-US"}&page=${i+1}`,e),n=await a.json();o.push(...n.results)}return i.push(o),i},n=(e,t)=>{const i=document.querySelector(".search-engine__input");i.focus(),i?.addEventListener("keyup",async i=>{const a=i.target.value;if(""===a.trim()){const i=await o(e,1);createFilteredFilmsSection(i[0],t)}else r(a,e,t)})},r=async(t,i,o)=>{const a=`https://api.themoviedb.org/3/search/multi?query=${encodeURIComponent(t)}&language=${i}`,n=await fetch(a,e),r=(await n.json()).results.filter(e=>"person"!==e.media_type&&e.poster_path&&e.popularity>=5);createFilteredFilmsSection(r,o)};(async()=>{const e=getData(),t=e?.translations,o=e?.preferredLanguage,a=e?.loggedIn,n=document.querySelector(".container"),r=e?.currentProfile;if(e&&a&&r)try{n.append(showBigLoader()),n.append(createBrowsePage(t));const e=await i(o,t,n);n.append(e),n.append(createFooter(t))}catch{showErrorPopup(t.browsePage.loadingDataError,"#dc4a34")}finally{hideBigLoader()}else window.location.href="/"})(),window.addEventListener("click",e=>{closeAllNotClicked(e)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdHMubWluLmpzIiwibmFtZXMiOlsiZ2V0RGF0YSIsImNyZWF0ZUJyb3dzZVBhZ2UiLCJzaG93RXJyb3JQb3B1cCIsInNob3dCaWdMb2FkZXIiLCJoaWRlQmlnTG9hZGVyIiwiY3JlYXRlRm9vdGVyIiwiY2xvc2VBbGxOb3RDbGlja2VkIiwiY3JlYXRlU3BlY2lmaWVkU2VjdGlvblBvc3RlciIsImNyZWF0ZVNlYXJjaEVuZ2luZSIsImNyZWF0ZUZpbHRlcmVkRmlsbXNTZWN0aW9uIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwib3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJhY2NlcHQiLCJBdXRob3JpemF0aW9uIiwiY2F0ZWdvcnkiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJnZXRGaWxtc09yU2VyaWVzIiwiYXN5bmMiLCJjdXJyZW50TGFuZ3VhZ2UiLCJ0cmFuc2xhdGlvbnMiLCJjb250YWluZXIiLCJpbmNsdWRlcyIsImZpbG1zIiwicmVuZGVyRmlsbXMiLCJzZXJpZXMiLCJyZW5kZXJTZXJpZXMiLCJhcHBlbmQiLCJoYW5kbGVTZWFyY2hFbmdpbmUiLCJjdXN0b21BbW91bnQiLCJmaWxtc0FyciIsImNob29zZW5GaWxtcyIsImkiLCJyZXNwb25zZSIsImZldGNoIiwiZmlsbURhdGEiLCJqc29uIiwicHVzaCIsInJlc3VsdHMiLCJzZXJpZXNBcnIiLCJjaG9vc2VuU2VyaWVzIiwic2VyaWVzRGF0YSIsInNlYXJjaEVuZ2luZSIsInF1ZXJ5U2VsZWN0b3IiLCJmb2N1cyIsImUiLCJ2YWx1ZSIsInRhcmdldCIsInRyaW0iLCJmaW5kRmlsbXNCeUtleXdvcmQiLCJpbnB1dFZhbHVlIiwic2VhcmNoRmlsbVVSTCIsImVuY29kZVVSSUNvbXBvbmVudCIsImZpbHRlcmVkRmlsbXMiLCJmaWx0ZXIiLCJmaWxtIiwibWVkaWFfdHlwZSIsInBvc3Rlcl9wYXRoIiwicG9wdWxhcml0eSIsInVzZXJEYXRhIiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJpc0xvZ2dlZEluIiwibG9nZ2VkSW4iLCJjdXJyZW50UHJvZmlsZSIsInNlY3Rpb24iLCJicm93c2VQYWdlIiwibG9hZGluZ0RhdGFFcnJvciIsImNoZWNrQXV0aG9yaXphdGlvbiJdLCJzb3VyY2VzIjpbImxpc3RzLmpzIl0sIm1hcHBpbmdzIjoiT0FDQ0EsUUFDQUMsaUJBQ0FDLGVBQ0FDLGNBQ0FDLGNBQ0FDLGFBQ0FDLG1CQUNBQyw2QkFDQUMsbUJBQ0FDLCtCQUNNLHNCQUVQQyxTQUFTQyxpQkFBaUIsbUJBQW9CLFdBQzdDLE1BQU1DLEVBQVUsQ0FDZkMsT0FBUSxNQUNSQyxRQUFTLENBQ1JDLE9BQVEsbUJBQ1JDLGNBQ0MseVBBT0dDLEVBQVdDLE9BQU9DLFNBQVNDLEtBb0MzQkMsRUFBbUJDLE1BQU9DLEVBQWlCQyxFQUFjQyxLQUM5RCxHQUFJUixFQUFTUyxTQUFTLGVBQWdCLENBQ3JDLE1BQU1DLFFBQWNDLEVBQVlMLEdBQ2hDLE9BQU9oQiw2QkFBNkJvQixFQUFPSCxFQUM1QyxDQUNBLEdBQUlQLEVBQVNTLFNBQVMsZUFBZ0IsQ0FDckMsTUFBTUcsUUFBZUMsRUFBYVAsR0FDbEMsT0FBT2hCLDZCQUE2QnNCLEVBQVFMLEVBQzdDLENBQ0EsSUFBSVAsRUFBU1MsU0FBUyxnQkFBdEIsQ0FJQSxHQUFJVCxFQUFTUyxTQUFTLGVBQWdCLENBQ3JDLE1BQU1DLFFBQWNDLEVBQVlMLEVBQWlCLEdBS2pELE9BSkFFLEVBQVVNLE9BQU92QixtQkFBbUJnQixJQUVwQ1EsRUFBbUJULEVBQWlCQyxHQUU3QmpCLDZCQUE2Qm9CLEVBQU9ILEVBQzVDLENBRUFOLE9BQU9DLFNBQVNDLEtBQU8sVUFWdkIsR0FhS1EsRUFBY04sTUFBT0MsRUFBaUJVLEtBQzNDLE1BQU1DLEVBQVcsR0FDWEMsRUFBZSxHQUVyQixJQUFLLElBQUlDLEVBQUksRUFBR0EsR0FBS0gsR0FwRUEsR0FvRWdDRyxJQUFLLENBQ3pELE1BQU1DLFFBQWlCQyxNQUN0Qix3REFBY2YsR0FBbUIsZ0JBQWdCYSxFQUFJLElBQ3JEeEIsR0FFSzJCLFFBQWlCRixFQUFTRyxPQUNoQ0wsRUFBYU0sUUFBUUYsRUFBU0csUUFDL0IsQ0FHQSxPQUZBUixFQUFTTyxLQUFLTixHQUVQRCxHQUVGSixFQUFlUixNQUFPQyxJQUMzQixNQUFNb0IsRUFBWSxDQUFDLE1BQ2JDLEVBQWdCLEdBQ3RCLElBQUssSUFBSVIsRUFBSSxFQUFHQSxFQW5GSyxFQW1GY0EsSUFBSyxDQUN2QyxNQUFNQyxRQUFpQkMsTUFDdEIscURBQWVmLEdBQW1CLGdCQUFnQmEsRUFBSSxJQUN0RHhCLEdBRUtpQyxRQUFtQlIsRUFBU0csT0FDbENJLEVBQWNILFFBQVFJLEVBQVdILFFBQ2xDLENBSUEsT0FGQUMsRUFBVUYsS0FBS0csR0FFUkQsR0FHRlgsRUFBcUIsQ0FBQ1QsRUFBaUJDLEtBQzVDLE1BQU1zQixFQUFlcEMsU0FBU3FDLGNBQWMseUJBQzVDRCxFQUFhRSxRQUViRixHQUFjbkMsaUJBQWlCLFFBQVNXLE1BQU8yQixJQUM5QyxNQUFNQyxFQUFRRCxFQUFFRSxPQUFPRCxNQUV2QixHQUFxQixLQUFqQkEsRUFBTUUsT0FBZSxDQUN4QixNQUFNekIsUUFBY0MsRUFBWUwsRUFBaUIsR0FDakRkLDJCQUEyQmtCLEVBQU0sR0FBSUgsRUFDdEMsTUFDQzZCLEVBQW1CSCxFQUFPM0IsRUFBaUJDLE1BS3hDNkIsRUFBcUIvQixNQUMxQmdDLEVBQ0EvQixFQUNBQyxLQUVBLE1BQU0rQixFQUFnQixtREFBbURDLG1CQUN4RUYsZUFDYS9CLElBQ1JjLFFBQWlCQyxNQUFNaUIsRUFBZTNDLEdBRXRDNkMsU0FEYXBCLEVBQVNHLFFBQ0RFLFFBQVFnQixPQUNqQ0MsR0FDb0IsV0FBcEJBLEVBQUtDLFlBQ0xELEVBQUtFLGFBQ0xGLEVBQUtHLFlBQWMsR0FFckJyRCwyQkFBMkJnRCxFQUFlakMsSUE1SGhCRixXQUMxQixNQUFNeUMsRUFBVy9ELFVBQ1h3QixFQUFldUMsR0FBVXZDLGFBQ3pCRCxFQUFrQndDLEdBQVVDLGtCQUM1QkMsRUFBYUYsR0FBVUcsU0FDdkJ6QyxFQUFZZixTQUFTcUMsY0FBYyxjQUNuQ29CLEVBQWlCSixHQUFVSSxlQUVqQyxHQUFLSixHQUFhRSxHQUFlRSxFQUtqQyxJQUNDMUMsRUFBVU0sT0FBTzVCLGlCQUVqQnNCLEVBQVVNLE9BQU85QixpQkFBaUJ1QixJQUVsQyxNQUFNNEMsUUFBZ0IvQyxFQUNyQkUsRUFDQUMsRUFDQUMsR0FHREEsRUFBVU0sT0FBT3FDLEdBRWpCM0MsRUFBVU0sT0FBTzFCLGFBQWFtQixHQUMvQixDQUFFLE1BQ0R0QixlQUFlc0IsRUFBYTZDLFdBQVdDLGlCQUFrQixVQUMxRCxDQUFFLFFBQ0RsRSxlQUNELE1BdEJDYyxPQUFPQyxTQUFTQyxLQUFPLEtBc0h6Qm1ELEdBQ0FyRCxPQUFPUCxpQkFBaUIsUUFBVXNDLElBQ2pDM0MsbUJBQW1CMkMsSUFFckIiLCJpZ25vcmVMaXN0IjpbXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuXHRnZXREYXRhLFxyXG5cdGNyZWF0ZUJyb3dzZVBhZ2UsXHJcblx0c2hvd0Vycm9yUG9wdXAsXHJcblx0c2hvd0JpZ0xvYWRlcixcclxuXHRoaWRlQmlnTG9hZGVyLFxyXG5cdGNyZWF0ZUZvb3RlcixcclxuXHRjbG9zZUFsbE5vdENsaWNrZWQsXHJcblx0Y3JlYXRlU3BlY2lmaWVkU2VjdGlvblBvc3RlcixcclxuXHRjcmVhdGVTZWFyY2hFbmdpbmUsXHJcblx0Y3JlYXRlRmlsdGVyZWRGaWxtc1NlY3Rpb24sXHJcbn0gZnJvbSBcIi4vY29tcG9uZW50cy5taW4uanNcIjtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRjb25zdCBvcHRpb25zID0ge1xyXG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxyXG5cdFx0aGVhZGVyczoge1xyXG5cdFx0XHRhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG5cdFx0XHRBdXRob3JpemF0aW9uOlxyXG5cdFx0XHRcdFwiQmVhcmVyIGV5SmhiR2NpT2lKSVV6STFOaUo5LmV5SmhkV1FpT2lJek5UWXdaak00TWpVM05EUTFaR0UxWkdaa1lUWXhZekUwWVdNNFltTTRNeUlzSW01aVppSTZNVGMxT1RjMk5UQXpPQzQ1TkN3aWMzVmlJam9pTmpobE0yVXlNbVV5TmpZNU56WTRNemhsWXpJM056STVJaXdpYzJOdmNHVnpJanBiSW1Gd2FWOXlaV0ZrSWwwc0luWmxjbk5wYjI0aU9qRjkubnVHZkVqY2xKTGVwbXp6SGkyb21OaHAyOVRIZ3JKZjlOdjZENF9nVGR4QVwiLFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cclxuXHRjb25zdCBwb3N0ZXJzQW1vdW50ID0gMztcclxuXHRjb25zdCBmaWxtc1VSTCA9IGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL2Rpc2NvdmVyL21vdmllP2xhbmd1YWdlPWA7XHJcblx0Y29uc3Qgc2VyaWVzVVJMID0gYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvZGlzY292ZXIvdHY/bGFuZ3VhZ2U9YDtcclxuXHRjb25zdCBjYXRlZ29yeSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG5cclxuXHRjb25zdCBjaGVja0F1dGhvcml6YXRpb24gPSBhc3luYyAoKSA9PiB7XHJcblx0XHRjb25zdCB1c2VyRGF0YSA9IGdldERhdGEoKTtcclxuXHRcdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHVzZXJEYXRhPy50cmFuc2xhdGlvbnM7XHJcblx0XHRjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSB1c2VyRGF0YT8ucHJlZmVycmVkTGFuZ3VhZ2U7XHJcblx0XHRjb25zdCBpc0xvZ2dlZEluID0gdXNlckRhdGE/LmxvZ2dlZEluO1xyXG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcblx0XHRjb25zdCBjdXJyZW50UHJvZmlsZSA9IHVzZXJEYXRhPy5jdXJyZW50UHJvZmlsZTtcclxuXHJcblx0XHRpZiAoIXVzZXJEYXRhIHx8ICFpc0xvZ2dlZEluIHx8ICFjdXJyZW50UHJvZmlsZSkge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZChzaG93QmlnTG9hZGVyKCkpO1xyXG5cclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZChjcmVhdGVCcm93c2VQYWdlKHRyYW5zbGF0aW9ucykpO1xyXG5cclxuXHRcdFx0Y29uc3Qgc2VjdGlvbiA9IGF3YWl0IGdldEZpbG1zT3JTZXJpZXMoXHJcblx0XHRcdFx0Y3VycmVudExhbmd1YWdlLFxyXG5cdFx0XHRcdHRyYW5zbGF0aW9ucyxcclxuXHRcdFx0XHRjb250YWluZXJcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNvbnRhaW5lci5hcHBlbmQoc2VjdGlvbik7XHJcblxyXG5cdFx0XHRjb250YWluZXIuYXBwZW5kKGNyZWF0ZUZvb3Rlcih0cmFuc2xhdGlvbnMpKTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRzaG93RXJyb3JQb3B1cCh0cmFuc2xhdGlvbnMuYnJvd3NlUGFnZS5sb2FkaW5nRGF0YUVycm9yLCBcIiNkYzRhMzRcIik7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRoaWRlQmlnTG9hZGVyKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgZ2V0RmlsbXNPclNlcmllcyA9IGFzeW5jIChjdXJyZW50TGFuZ3VhZ2UsIHRyYW5zbGF0aW9ucywgY29udGFpbmVyKSA9PiB7XHJcblx0XHRpZiAoY2F0ZWdvcnkuaW5jbHVkZXMoXCJtb3ZpZXMuaHRtbFwiKSkge1xyXG5cdFx0XHRjb25zdCBmaWxtcyA9IGF3YWl0IHJlbmRlckZpbG1zKGN1cnJlbnRMYW5ndWFnZSk7XHJcblx0XHRcdHJldHVybiBjcmVhdGVTcGVjaWZpZWRTZWN0aW9uUG9zdGVyKGZpbG1zLCB0cmFuc2xhdGlvbnMpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGNhdGVnb3J5LmluY2x1ZGVzKFwic2VyaWVzLmh0bWxcIikpIHtcclxuXHRcdFx0Y29uc3Qgc2VyaWVzID0gYXdhaXQgcmVuZGVyU2VyaWVzKGN1cnJlbnRMYW5ndWFnZSk7XHJcblx0XHRcdHJldHVybiBjcmVhdGVTcGVjaWZpZWRTZWN0aW9uUG9zdGVyKHNlcmllcywgdHJhbnNsYXRpb25zKTtcclxuXHRcdH1cclxuXHRcdGlmIChjYXRlZ29yeS5pbmNsdWRlcyhcIm15LWxpc3QuaHRtbFwiKSkge1xyXG5cdFx0XHQvLyB3eXJlbmRlcnVqIGxpc3TEmVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoY2F0ZWdvcnkuaW5jbHVkZXMoXCJzZWFyY2guaHRtbFwiKSkge1xyXG5cdFx0XHRjb25zdCBmaWxtcyA9IGF3YWl0IHJlbmRlckZpbG1zKGN1cnJlbnRMYW5ndWFnZSwgMSk7XHJcblx0XHRcdGNvbnRhaW5lci5hcHBlbmQoY3JlYXRlU2VhcmNoRW5naW5lKHRyYW5zbGF0aW9ucykpO1xyXG5cclxuXHRcdFx0aGFuZGxlU2VhcmNoRW5naW5lKGN1cnJlbnRMYW5ndWFnZSwgdHJhbnNsYXRpb25zKTtcclxuXHJcblx0XHRcdHJldHVybiBjcmVhdGVTcGVjaWZpZWRTZWN0aW9uUG9zdGVyKGZpbG1zLCB0cmFuc2xhdGlvbnMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCI0MDQuaHRtbFwiO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IHJlbmRlckZpbG1zID0gYXN5bmMgKGN1cnJlbnRMYW5ndWFnZSwgY3VzdG9tQW1vdW50KSA9PiB7XHJcblx0XHRjb25zdCBmaWxtc0FyciA9IFtdO1xyXG5cdFx0Y29uc3QgY2hvb3NlbkZpbG1zID0gW107XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCAoY3VzdG9tQW1vdW50IHx8IHBvc3RlcnNBbW91bnQpOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuXHRcdFx0XHRgJHtmaWxtc1VSTH0ke2N1cnJlbnRMYW5ndWFnZSB8fCBcImVuLVVTXCJ9JnBhZ2U9JHtpICsgMX1gLFxyXG5cdFx0XHRcdG9wdGlvbnNcclxuXHRcdFx0KTtcclxuXHRcdFx0Y29uc3QgZmlsbURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0XHRcdGNob29zZW5GaWxtcy5wdXNoKC4uLmZpbG1EYXRhLnJlc3VsdHMpO1xyXG5cdFx0fVxyXG5cdFx0ZmlsbXNBcnIucHVzaChjaG9vc2VuRmlsbXMpO1xyXG5cclxuXHRcdHJldHVybiBmaWxtc0FycjtcclxuXHR9O1xyXG5cdGNvbnN0IHJlbmRlclNlcmllcyA9IGFzeW5jIChjdXJyZW50TGFuZ3VhZ2UpID0+IHtcclxuXHRcdGNvbnN0IHNlcmllc0FyciA9IFtudWxsXTtcclxuXHRcdGNvbnN0IGNob29zZW5TZXJpZXMgPSBbXTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcG9zdGVyc0Ftb3VudDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcblx0XHRcdFx0YCR7c2VyaWVzVVJMfSR7Y3VycmVudExhbmd1YWdlIHx8IFwiZW4tVVNcIn0mcGFnZT0ke2kgKyAxfWAsXHJcblx0XHRcdFx0b3B0aW9uc1xyXG5cdFx0XHQpO1xyXG5cdFx0XHRjb25zdCBzZXJpZXNEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cdFx0XHRjaG9vc2VuU2VyaWVzLnB1c2goLi4uc2VyaWVzRGF0YS5yZXN1bHRzKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZXJpZXNBcnIucHVzaChjaG9vc2VuU2VyaWVzKTtcclxuXHJcblx0XHRyZXR1cm4gc2VyaWVzQXJyO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGhhbmRsZVNlYXJjaEVuZ2luZSA9IChjdXJyZW50TGFuZ3VhZ2UsIHRyYW5zbGF0aW9ucykgPT4ge1xyXG5cdFx0Y29uc3Qgc2VhcmNoRW5naW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZW5naW5lX19pbnB1dFwiKTtcclxuXHRcdHNlYXJjaEVuZ2luZS5mb2N1cygpO1xyXG5cclxuXHRcdHNlYXJjaEVuZ2luZT8uYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGFzeW5jIChlKSA9PiB7XHJcblx0XHRcdGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWU7XHJcblxyXG5cdFx0XHRpZiAodmFsdWUudHJpbSgpID09PSBcIlwiKSB7XHJcblx0XHRcdFx0Y29uc3QgZmlsbXMgPSBhd2FpdCByZW5kZXJGaWxtcyhjdXJyZW50TGFuZ3VhZ2UsIDEpO1xyXG5cdFx0XHRcdGNyZWF0ZUZpbHRlcmVkRmlsbXNTZWN0aW9uKGZpbG1zWzBdLCB0cmFuc2xhdGlvbnMpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGZpbmRGaWxtc0J5S2V5d29yZCh2YWx1ZSwgY3VycmVudExhbmd1YWdlLCB0cmFuc2xhdGlvbnMpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBmaW5kRmlsbXNCeUtleXdvcmQgPSBhc3luYyAoXHJcblx0XHRpbnB1dFZhbHVlLFxyXG5cdFx0Y3VycmVudExhbmd1YWdlLFxyXG5cdFx0dHJhbnNsYXRpb25zXHJcblx0KSA9PiB7XHJcblx0XHRjb25zdCBzZWFyY2hGaWxtVVJMID0gYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvc2VhcmNoL211bHRpP3F1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxyXG5cdFx0XHRpbnB1dFZhbHVlXHJcblx0XHQpfSZsYW5ndWFnZT0ke2N1cnJlbnRMYW5ndWFnZX1gO1xyXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzZWFyY2hGaWxtVVJMLCBvcHRpb25zKTtcclxuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0XHRjb25zdCBmaWx0ZXJlZEZpbG1zID0gZGF0YS5yZXN1bHRzLmZpbHRlcihcclxuXHRcdFx0KGZpbG0pID0+XHJcblx0XHRcdFx0ZmlsbS5tZWRpYV90eXBlICE9PSBcInBlcnNvblwiICYmXHJcblx0XHRcdFx0ZmlsbS5wb3N0ZXJfcGF0aCAmJlxyXG5cdFx0XHRcdGZpbG0ucG9wdWxhcml0eSA+PSA1LjBcclxuXHRcdCk7XHJcblx0XHRjcmVhdGVGaWx0ZXJlZEZpbG1zU2VjdGlvbihmaWx0ZXJlZEZpbG1zLCB0cmFuc2xhdGlvbnMpO1xyXG5cdH07XHJcblxyXG5cdGNoZWNrQXV0aG9yaXphdGlvbigpO1xyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRcdGNsb3NlQWxsTm90Q2xpY2tlZChlKTtcclxuXHR9KTtcclxufSk7XHJcbiJdfQ==
